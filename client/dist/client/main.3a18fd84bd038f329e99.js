(self.webpackChunkclient=self.webpackChunkclient||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},5366:(e,t,n)=>{"use strict";n.d(t,{deG:()=>Tn,tb:()=>tp,AFp:()=>Qd,ip1:()=>Wd,CZH:()=>Kd,hGG:()=>Wp,z2F:()=>Up,sBO:()=>bh,Sil:()=>dp,_Vd:()=>$c,EJc:()=>sp,SBq:()=>Kc,qLn:()=>fs,vpe:()=>wd,gxx:()=>vo,tBr:()=>Jn,XFs:()=>N,GSi:()=>ka,OlP:()=>bn,zs3:()=>Do,ZZ4:()=>fh,aQg:()=>gh,soG:()=>rp,LVF:()=>Gd,YKP:()=>Rh,v3s:()=>qp,h0i:()=>Nh,PXZ:()=>Op,R0b:()=>mp,FiY:()=>Xn,Lbi:()=>ep,g9A:()=>Xd,E6H:()=>Hd,Qsj:()=>Jc,FYo:()=>Yc,JOm:()=>Ts,Tiy:()=>eh,q3G:()=>Xr,tp0:()=>tr,EAV:()=>zp,Rgc:()=>Ch,dDg:()=>Tp,DyG:()=>En,q4F:()=>nh,GfV:()=>th,s_b:()=>Oh,ifc:()=>F,eFA:()=>Dp,G48:()=>Rp,X6Q:()=>Np,_c5:()=>Gp,VLi:()=>Sp,c2e:()=>np,zSh:()=>bo,wAp:()=>xu,vHH:()=>g,EiD:()=>Yr,mCW:()=>Or,qzn:()=>br,JVY:()=>Ir,pB0:()=>kr,eBb:()=>Sr,L6k:()=>Er,LAX:()=>Cr,cg1:()=>Su,Tjo:()=>$p,kL8:()=>Cu,yhl:()=>Tr,dqk:()=>V,sIi:()=>Wo,CqO:()=>Ba,QGY:()=>qa,F4k:()=>Va,zlt:()=>$h,RDi:()=>xe,AaK:()=>c,z3N:()=>wr,TTD:()=>we,xp6:()=>_i,uIk:()=>na,Tol:()=>Il,ekj:()=>wl,Suo:()=>Dd,Xpm:()=>J,lG2:()=>oe,Yz7:()=>b,cJS:()=>T,oAB:()=>re,Yjl:()=>ae,Y36:()=>Aa,_UZ:()=>La,BQk:()=>Ma,ynx:()=>Fa,qZA:()=>Da,TgZ:()=>Oa,EpF:()=>ja,Ikx:()=>wu,LFG:()=>Wn,$8M:()=>pn,NdJ:()=>za,CRH:()=>Ld,oxw:()=>Wa,Q6J:()=>Ra,iGM:()=>Pd,MAs:()=>Ta,CHM:()=>Ke,oJD:()=>es,LSH:()=>ns,kYT:()=>se,Udp:()=>vl,d8E:()=>bu,YNc:()=>ba,_uU:()=>Fl,hij:()=>Ul});var r=n(5959),s=n(7570),i=n(8318),o=n(1906),a=n(1055);function l(e){for(let t in e)if(e[t]===l)return t;throw Error("Could not find renamed property on target object.")}function u(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function c(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(c).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=l({__forward_ref__:l});function p(e){return e.__forward_ref__=p,e.toString=function(){return c(this())},e}function f(e){return m(e)?e():e}function m(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class g extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function v(e,t){const n=t?` in ${t}`:"";throw new g("201",`No provider for ${_(e)} found${n}`)}function w(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function b(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function T(e){return{providers:e.providers||[],imports:e.imports||[]}}function I(e){return E(e,C)||E(e,x)}function E(e,t){return e.hasOwnProperty(t)?e[t]:null}function S(e){return e&&(e.hasOwnProperty(k)||e.hasOwnProperty(A))?e[k]:null}const C=l({"\u0275prov":l}),k=l({"\u0275inj":l}),x=l({ngInjectableDef:l}),A=l({ngInjectorDef:l});var N=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});let R;function P(e){const t=R;return R=e,t}function O(e,t,n){const r=I(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==t?t:void v(c(e),"Injector")}function D(e){return{toString:e}.toString()}var L=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),F=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});const M="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,j="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,V=M||q||U||j,B={},z=[],H=l({"\u0275cmp":l}),$=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),Z=l({"\u0275mod":l}),W=l({"\u0275loc":l}),K=l({"\u0275fac":l}),Q=l({__NG_ELEMENT_ID__:l});let Y=0;function J(e){return D(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||z,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||F.Emulated,id:"c",styles:e.styles||z,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,s=e.features,i=e.pipes;return n.id+=Y++,n.inputs=ie(e.inputs,t),n.outputs=ie(e.outputs),s&&s.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ee):null,n.pipeDefs=i?()=>("function"==typeof i?i():i).map(te):null,n})}function X(e,t,n){const r=e.\u0275cmp;r.directiveDefs=()=>t.map(ee),r.pipeDefs=()=>n.map(te)}function ee(e){return le(e)||function(e){return e[$]||null}(e)}function te(e){return function(e){return e[G]||null}(e)}const ne={};function re(e){return D(()=>{const t={type:e.type,bootstrap:e.bootstrap||z,declarations:e.declarations||z,imports:e.imports||z,exports:e.exports||z,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ne[e.id]=e.type),t})}function se(e,t){return D(()=>{const n=ue(e,!0);n.declarations=t.declarations||z,n.imports=t.imports||z,n.exports=t.exports||z})}function ie(e,t){if(null==e)return B;const n={};for(const r in e)if(e.hasOwnProperty(r)){let s=e[r],i=s;Array.isArray(s)&&(i=s[1],s=s[0]),n[s]=r,t&&(t[s]=i)}return n}const oe=J;function ae(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function le(e){return e[H]||null}function ue(e,t){const n=e[Z]||null;if(!n&&!0===t)throw new Error(`Type ${c(e)} does not have '\u0275mod' property.`);return n}const ce=20,he=10;function de(e){return Array.isArray(e)&&"object"==typeof e[1]}function pe(e){return Array.isArray(e)&&!0===e[1]}function fe(e){return 0!=(8&e.flags)}function me(e){return 2==(2&e.flags)}function ge(e){return 1==(1&e.flags)}function ye(e){return null!==e.template}function _e(e,t){return e.hasOwnProperty(K)?e[K]:null}class ve{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function we(){return be}function be(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ie),Te}function Te(){const e=Ee(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===B)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function Ie(e,t,n,r){const s=Ee(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:B,current:null}),i=s.current||(s.current={}),o=s.previous,a=this.declaredInputs[n],l=o[a];i[a]=new ve(l&&l.currentValue,t,o===B),e[r]=t}function Ee(e){return e.__ngSimpleChanges__||null}we.ngInherit=!0;const Se="http://www.w3.org/2000/svg",Ce="http://www.w3.org/1998/MathML/";let ke;function xe(e){ke=e}function Ae(){return void 0!==ke?ke:"undefined"!=typeof document?document:void 0}function Ne(e){return!!e.listen}const Re={createRenderer:(e,t)=>Ae()};function Pe(e){for(;Array.isArray(e);)e=e[0];return e}function Oe(e,t){return Pe(t[e])}function De(e,t){return Pe(t[e.index])}function Le(e,t){return e.data[t]}function Fe(e,t){return e[t]}function Me(e,t){const n=t[e];return de(n)?n:n[0]}function Ue(e){return 4==(4&e[2])}function je(e){return 128==(128&e[2])}function qe(e,t){return null==t?null:e[t]}function Ve(e){e[18]=0}function Be(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const ze={lFrame:vt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function He(){return ze.bindingsEnabled}function $e(){ze.bindingsEnabled=!0}function Ge(){ze.bindingsEnabled=!1}function Ze(){return ze.lFrame.lView}function We(){return ze.lFrame.tView}function Ke(e){return ze.lFrame.contextLView=e,e[8]}function Qe(){let e=Ye();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ye(){return ze.lFrame.currentTNode}function Je(){const e=ze.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function Xe(e,t){const n=ze.lFrame;n.currentTNode=e,n.isParent=t}function et(){return ze.lFrame.isParent}function tt(){ze.lFrame.isParent=!1}function nt(){return ze.isInCheckNoChangesMode}function rt(e){ze.isInCheckNoChangesMode=e}function st(){const e=ze.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function it(){return ze.lFrame.bindingIndex}function ot(e){return ze.lFrame.bindingIndex=e}function at(){return ze.lFrame.bindingIndex++}function lt(e){const t=ze.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function ut(e){ze.lFrame.inI18n=e}function ct(e,t){const n=ze.lFrame;n.bindingIndex=n.bindingRootIndex=e,ht(t)}function ht(e){ze.lFrame.currentDirectiveIndex=e}function dt(e){const t=ze.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}function pt(){return ze.lFrame.currentQueryIndex}function ft(e){ze.lFrame.currentQueryIndex=e}function mt(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function gt(e,t,n){if(n&N.SkipSelf){let r=t,s=e;for(;r=r.parent,!(null!==r||n&N.Host||(r=mt(s),null===r)||(s=s[15],10&r.type)););if(null===r)return!1;t=r,e=s}const r=ze.lFrame=_t();return r.currentTNode=t,r.lView=e,!0}function yt(e){const t=_t(),n=e[1];ze.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function _t(){const e=ze.lFrame,t=null===e?null:e.child;return null===t?vt(e):t}function vt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function wt(){const e=ze.lFrame;return ze.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const bt=wt;function Tt(){const e=wt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function It(){return ze.lFrame.selectedIndex}function Et(e){ze.lFrame.selectedIndex=e}function St(){const e=ze.lFrame;return Le(e.tView,e.selectedIndex)}function Ct(){ze.lFrame.currentNamespace=Se}function kt(){ze.lFrame.currentNamespace=Ce}function xt(){ze.lFrame.currentNamespace=null}function At(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:s,ngAfterViewInit:i,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),s&&((e.contentHooks||(e.contentHooks=[])).push(n,s),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,s)),i&&(e.viewHooks||(e.viewHooks=[])).push(-n,i),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function Nt(e,t,n){Ot(e,t,3,n)}function Rt(e,t,n,r){(3&e[2])===n&&Ot(e,t,n,r)}function Pt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ot(e,t,n,r){const s=null!=r?r:-1,i=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<i;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<s||-1==s)&&(Dt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Dt(e,t,n,r){const s=n[r]<0,i=n[r+1],o=e[s?-n[r]:n[r]];if(s){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{i.call(o)}finally{}}}else try{i.call(o)}finally{}}const Lt=-1;class Ft{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Mt(e,t,n){const r=Ne(e);let s=0;for(;s<n.length;){const i=n[s];if("number"==typeof i){if(0!==i)break;s++;const o=n[s++],a=n[s++],l=n[s++];r?e.setAttribute(t,a,l,o):t.setAttributeNS(o,a,l)}else{const o=i,a=n[++s];jt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),s++}}return s}function Ut(e){return 3===e||4===e||6===e}function jt(e){return 64===e.charCodeAt(0)}function qt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const s=t[r];"number"==typeof s?n=s:0===n||Vt(e,n,s,null,-1===n||2===n?t[++r]:null)}}return e}function Vt(e,t,n,r,s){let i=0,o=e.length;if(-1===t)o=-1;else for(;i<e.length;){const n=e[i++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=i-1;break}}}for(;i<e.length;){const t=e[i];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==s&&(e[i+1]=s));if(r===e[i+1])return void(e[i+2]=s)}i++,null!==r&&i++,null!==s&&i++}-1!==o&&(e.splice(o,0,t),i=o+1),e.splice(i++,0,n),null!==r&&e.splice(i++,0,r),null!==s&&e.splice(i++,0,s)}function Bt(e){return e!==Lt}function zt(e){return 32767&e}function Ht(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let $t=!0;function Gt(e){const t=$t;return $t=e,t}let Zt=0;function Wt(e,t){const n=Qt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Kt(r.data,e),Kt(t,null),Kt(r.blueprint,null));const s=Yt(e,t),i=e.injectorIndex;if(Bt(s)){const e=zt(s),n=Ht(s,t),r=n[1].data;for(let s=0;s<8;s++)t[i+s]=n[e+s]|r[e+s]}return t[i+8]=s,i}function Kt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Qt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Yt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,s=t;for(;null!==s;){const e=s[1],t=e.type;if(r=2===t?e.declTNode:1===t?s[6]:null,null===r)return Lt;if(n++,s=s[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Lt}function Jt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Zt++);const s=255&r;t.data[e+(s>>5)]|=1<<s}(e,t,n)}function Xt(e,t,n){if(n&N.Optional)return e;v(t,"NodeInjector")}function en(e,t,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const s=e[9],i=P(void 0);try{return s?s.get(t,r,n&N.Optional):O(t,r,n&N.Optional)}finally{P(i)}}return Xt(r,t,n)}function tn(e,t,n,r=N.Default,s){if(null!==e){const i=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Q)?e[Q]:void 0;return"number"==typeof t?t>=0?255&t:rn:t}(n);if("function"==typeof i){if(!gt(t,e,r))return r&N.Host?Xt(s,n,r):en(t,n,r,s);try{const e=i(r);if(null!=e||r&N.Optional)return e;v(n)}finally{bt()}}else if("number"==typeof i){let s=null,o=Qt(e,t),a=Lt,l=r&N.Host?t[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?Yt(e,t):t[o+8],a!==Lt&&un(r,!1)?(s=t[1],o=zt(a),t=Ht(a,t)):o=-1);-1!==o;){const e=t[1];if(ln(i,o,e.data)){const e=sn(o,t,n,s,r,l);if(e!==nn)return e}a=t[o+8],a!==Lt&&un(r,t[1].data[o+8]===l)&&ln(i,o,t)?(s=e,o=zt(a),t=Ht(a,t)):o=-1}}}return en(t,n,r,s)}const nn={};function rn(){return new cn(Qe(),Ze())}function sn(e,t,n,r,s,i){const o=t[1],a=o.data[e+8],l=on(a,o,n,null==r?me(a)&&$t:r!=o&&0!=(3&a.type),s&N.Host&&i===a);return null!==l?an(t,o,l,a):nn}function on(e,t,n,r,s){const i=e.providerIndexes,o=t.data,a=1048575&i,l=e.directiveStart,u=i>>20,c=s?a+u:e.directiveEnd;for(let h=r?a:a+u;h<c;h++){const e=o[h];if(h<l&&n===e||h>=l&&e.type===n)return h}if(s){const e=o[l];if(e&&ye(e)&&e.type===n)return l}return null}function an(e,t,n,r){let s=e[n];const i=t.data;if(s instanceof Ft){const o=s;o.resolving&&function(e,t){throw new g("200",`Circular dependency in DI detected for ${e}`)}(_(i[n]));const a=Gt(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?P(o.injectImpl):null;gt(e,r,N.Default);try{s=e[n]=o.factory(void 0,i,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:s,ngDoCheck:i}=t.type.prototype;if(r){const r=be(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,s),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,i))}(n,i[n],t)}finally{null!==l&&P(l),Gt(a),o.resolving=!1,bt()}}return s}function ln(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function un(e,t){return!(e&N.Self||e&N.Host&&t)}class cn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return tn(this._tNode,this._lView,e,void 0,t)}}function hn(e){return D(()=>{const t=e.prototype.constructor,n=t[K]||dn(t),r=Object.prototype;let s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==r;){const e=s[K]||dn(s);if(e&&e!==n)return e;s=Object.getPrototypeOf(s)}return e=>new e})}function dn(e){return m(e)?()=>{const t=dn(f(e));return t&&t()}:_e(e)}function pn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const s=n[r];if(Ut(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(s===t)return n[r+1];r+=2}}}return null}(Qe(),e)}const fn="__annotations__",mn="__parameters__",gn="__prop__metadata__";function yn(e,t,n,r,s){return D(()=>{const i=_n(t);function o(...e){if(this instanceof o)return i.call(this,...e),this;const t=new o(...e);return function(n){return s&&s(n,...e),(n.hasOwnProperty(fn)?n[fn]:Object.defineProperty(n,fn,{value:[]})[fn]).push(t),r&&r(n),n}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o})}function _n(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function vn(e,t,n){return D(()=>{const r=_n(t);function s(...e){if(this instanceof s)return r.apply(this,e),this;const t=new s(...e);return n.annotation=t,n;function n(e,n,r){const s=e.hasOwnProperty(mn)?e[mn]:Object.defineProperty(e,mn,{value:[]})[mn];for(;s.length<=r;)s.push(null);return(s[r]=s[r]||[]).push(t),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const wn=function(){return vn("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>pn(e)}))}();class bn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=b({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Tn=new bn("AnalyzeForEntryComponents");function In(){const e=V.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}const En=Function;function Sn(e){return"function"==typeof e}function Cn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Cn(r,t)):t!==e&&t.push(r)}return t}function kn(e,t){e.forEach(e=>Array.isArray(e)?kn(e,t):t(e))}function xn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function An(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Nn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function Rn(e,t,n){let r=On(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let s=e.length;if(s==t)e.push(n,r);else if(1===s)e.push(r,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;)e[s]=e[s-2],s--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Pn(e,t){const n=On(e,t);if(n>=0)return e[1|n]}function On(e,t){return function(e,t,n){let r=0,s=e.length>>1;for(;s!==r;){const n=r+(s-r>>1),i=e[n<<1];if(t===i)return n<<1;i>t?s=n:r=n+1}return~(s<<1)}(e,t)}const Dn=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\))\)/,Ln=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Fn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Mn=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s*super\(\.\.\.arguments\)/;class Un{constructor(e){this._reflect=e||V.Reflect}isReflectionEnabled(){return!0}factory(e){return(...t)=>new e(...t)}_zipTypesAndAnnotations(e,t){let n;n=Nn(void 0===e?t.length:e.length);for(let r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]&&e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n}_ownParameters(e,t){if(n=e.toString(),Dn.test(n)||Mn.test(n)||Ln.test(n)&&!Fn.test(n))return null;var n;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;const r=e.ctorParameters;if(r&&r!==t.ctorParameters){const e="function"==typeof r?r():r,t=e.map(e=>e&&e.type),n=e.map(e=>e&&jn(e.decorators));return this._zipTypesAndAnnotations(t,n)}const s=e.hasOwnProperty(mn)&&e[mn],i=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return i||s?this._zipTypesAndAnnotations(i,s):Nn(e.length)}parameters(e){if(!Sn(e))return[];const t=qn(e);let n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]}_ownAnnotations(e,t){if(e.annotations&&e.annotations!==t.annotations){let t=e.annotations;return"function"==typeof t&&t.annotations&&(t=t.annotations),t}return e.decorators&&e.decorators!==t.decorators?jn(e.decorators):e.hasOwnProperty(fn)?e[fn]:null}annotations(e){if(!Sn(e))return[];const t=qn(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)}_ownPropMetadata(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){let t=e.propMetadata;return"function"==typeof t&&t.propMetadata&&(t=t.propMetadata),t}if(e.propDecorators&&e.propDecorators!==t.propDecorators){const t=e.propDecorators,n={};return Object.keys(t).forEach(e=>{n[e]=jn(t[e])}),n}return e.hasOwnProperty(gn)?e[gn]:null}propMetadata(e){if(!Sn(e))return{};const t=qn(e),n={};if(t!==Object){const e=this.propMetadata(t);Object.keys(e).forEach(t=>{n[t]=e[t]})}const r=this._ownPropMetadata(e,t);return r&&Object.keys(r).forEach(e=>{const t=[];n.hasOwnProperty(e)&&t.push(...n[e]),t.push(...r[e]),n[e]=t}),n}ownPropMetadata(e){return Sn(e)&&this._ownPropMetadata(e,qn(e))||{}}hasLifecycleHook(e,t){return e instanceof En&&t in e.prototype}guards(e){return{}}getter(e){return new Function("o","return o."+e+";")}setter(e){return new Function("o","v","return o."+e+" = v;")}method(e){return new Function("o","args",`if (!o.${e}) throw new Error('"${e}" is undefined');\n        return o.${e}.apply(o, args);`)}importUri(e){return"object"==typeof e&&e.filePath?e.filePath:`./${c(e)}`}resourceUri(e){return`./${c(e)}`}resolveIdentifier(e,t,n,r){return r}resolveEnum(e,t){return e[t]}}function jn(e){return e?e.map(e=>new(0,e.type.annotationCls)(...e.args?e.args:[])):[]}function qn(e){const t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}const Vn={},Bn=/\n/gm,zn="__source",Hn=l({provide:String,useValue:l});let $n;function Gn(e){const t=$n;return $n=e,t}function Zn(e,t=N.Default){if(void 0===$n)throw new Error("inject() must be called from an injection context");return null===$n?O(e,void 0,t):$n.get(e,t&N.Optional?null:void 0,t)}function Wn(e,t=N.Default){return(R||Zn)(f(e),t)}function Kn(e){throw new Error("invalid")}function Qn(e){const t=[];for(let n=0;n<e.length;n++){const r=f(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=N.Default;for(let t=0;t<r.length;t++){const s=r[t],i=s.__NG_DI_FLAG__;"number"==typeof i?-1===i?e=s.token:n|=i:e=s}t.push(Wn(e,n))}else t.push(Wn(r))}return t}function Yn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Jn=Yn(vn("Inject",e=>({token:e})),-1),Xn=Yn(vn("Optional"),8),er=Yn(vn("Self"),2),tr=Yn(vn("SkipSelf"),4),nr=Yn(vn("Host"),1);let rr,sr,ir=null;function or(e){return ar((ir=ir||new Un).parameters(e))}function ar(e){return e.map(e=>function(e){const t={token:null,attribute:null,host:!1,optional:!1,self:!1,skipSelf:!1};if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const r=e[n];if(void 0===r)continue;const s=Object.getPrototypeOf(r);if(r instanceof Xn||"Optional"===s.ngMetadataName)t.optional=!0;else if(r instanceof tr||"SkipSelf"===s.ngMetadataName)t.skipSelf=!0;else if(r instanceof er||"Self"===s.ngMetadataName)t.self=!0;else if(r instanceof nr||"Host"===s.ngMetadataName)t.host=!0;else if(r instanceof Jn)t.token=r.token;else if(r instanceof wn){if(void 0===r.attributeName)throw new Error("Attribute name must be defined.");t.attribute=r.attributeName}else t.token=r}else t.token=void 0===e||Array.isArray(e)&&0===e.length?null:e;return t}(e))}function lr(){if(void 0===rr&&(rr=null,V.trustedTypes))try{rr=V.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return rr}function ur(e){var t;return(null===(t=lr())||void 0===t?void 0:t.createHTML(e))||e}function cr(){if(void 0===sr&&(sr=null,V.trustedTypes))try{sr=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return sr}function hr(e){var t;return(null===(t=cr())||void 0===t?void 0:t.createHTML(e))||e}function dr(e){var t;return(null===(t=cr())||void 0===t?void 0:t.createScript(e))||e}function pr(e){var t;return(null===(t=cr())||void 0===t?void 0:t.createScriptURL(e))||e}class fr{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class mr extends fr{getTypeName(){return"HTML"}}class gr extends fr{getTypeName(){return"Style"}}class yr extends fr{getTypeName(){return"Script"}}class _r extends fr{getTypeName(){return"URL"}}class vr extends fr{getTypeName(){return"ResourceURL"}}function wr(e){return e instanceof fr?e.changingThisBreaksApplicationSecurity:e}function br(e,t){const n=Tr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Tr(e){return e instanceof fr&&e.getTypeName()||null}function Ir(e){return new mr(e)}function Er(e){return new gr(e)}function Sr(e){return new yr(e)}function Cr(e){return new _r(e)}function kr(e){return new vr(e)}function xr(e){const t=new Nr(e);return function(){try{return!!(new window.DOMParser).parseFromString(ur(""),"text/html")}catch(e){return!1}}()?new Ar(t):t}class Ar{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(ur(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Nr{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=ur(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=ur(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Rr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Pr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Or(e){return(e=String(e)).match(Rr)||e.match(Pr)?e:"unsafe:"+e}function Dr(e){return(e=String(e)).split(",").map(e=>Or(e.trim())).join(", ")}function Lr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function Fr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const Mr=Lr("area,br,col,hr,img,wbr"),Ur=Lr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jr=Lr("rp,rt"),qr=Fr(jr,Ur),Vr=Fr(Mr,Fr(Ur,Lr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fr(jr,Lr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qr),Br=Lr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zr=Lr("srcset"),Hr=Fr(Br,zr,Lr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Lr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),$r=Lr("script,style,template");class Gr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Vr.hasOwnProperty(t))return this.sanitizedSomething=!0,!$r.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,s=t.toLowerCase();if(!Hr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let i=e.value;Br[s]&&(i=Or(i)),zr[s]&&(i=Dr(i)),this.buf.push(" ",t,'="',Kr(i),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Vr.hasOwnProperty(t)&&!Mr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Kr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const Zr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wr=/([^\#-~ |!])/g;function Kr(e){return e.replace(/&/g,"&amp;").replace(Zr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Wr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qr;function Yr(e,t){let n=null;try{Qr=Qr||xr(e);let r=t?String(t):"";n=Qr.getInertBodyElement(r);let s=5,i=r;do{if(0===s)throw new Error("Failed to sanitize html because the input is unstable");s--,r=i,i=n.innerHTML,n=Qr.getInertBodyElement(r)}while(r!==i);return ur((new Gr).sanitizeChildren(Jr(n)||n))}finally{if(n){const e=Jr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function Jr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Xr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function es(e){const t=ls();return t?hr(t.sanitize(Xr.HTML,e)||""):br(e,"HTML")?hr(wr(e)):Yr(Ae(),y(e))}function ts(e){const t=ls();return t?t.sanitize(Xr.STYLE,e)||"":br(e,"Style")?wr(e):y(e)}function ns(e){const t=ls();return t?t.sanitize(Xr.URL,e)||"":br(e,"URL")?wr(e):Or(y(e))}function rs(e){const t=ls();if(t)return pr(t.sanitize(Xr.RESOURCE_URL,e)||"");if(br(e,"ResourceURL"))return pr(wr(e));throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)")}function ss(e){const t=ls();if(t)return dr(t.sanitize(Xr.SCRIPT,e)||"");if(br(e,"Script"))return dr(wr(e));throw new Error("unsafe value used in a script context")}function is(e){return ur(e[0])}function os(e){return function(e){var t;return(null===(t=lr())||void 0===t?void 0:t.createScriptURL(e))||e}(e[0])}function as(e,t,n){return function(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?rs:ns}(t,n)(e)}function ls(){const e=Ze();return e&&e[12]}function us(e,t){e.__ngContext__=t}function cs(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function hs(e){return e.ngDebugContext}function ds(e){return e.ngOriginalError}function ps(e,...t){e.error(...t)}class fs{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||ps}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?hs(e)?hs(e):this._findContext(ds(e)):null}_findOriginalError(e){let t=ds(e);for(;t&&ds(t);)t=ds(t);return t}}const ms=/^>|^->|<!--|-->|--!>|<!-$/g,gs=/(<|>)/,ys=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function _s(e){return e.ownerDocument.defaultView}function vs(e){return e.ownerDocument}function ws(e){return e.ownerDocument.body}function bs(e){return e instanceof Function?e():e}var Ts=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});let Is;function Es(e,t){return Is(e,t)}function Ss(e){const t=e[3];return pe(t)?t[3]:t}function Cs(e){return xs(e[13])}function ks(e){return xs(e[4])}function xs(e){for(;null!==e&&!pe(e);)e=e[4];return e}function As(e,t,n,r,s){if(null!=r){let i,o=!1;pe(r)?i=r:de(r)&&(o=!0,r=r[0]);const a=Pe(r);0===e&&null!==n?null==s?Vs(t,n,a):qs(t,n,a,s||null,!0):1===e&&null!==n?qs(t,n,a,s||null,!0):2===e?Xs(t,a,o):3===e&&t.destroyNode(a),null!=i&&function(e,t,n,r,s){const i=n[7];i!==Pe(n)&&As(t,e,r,i,s);for(let o=he;o<n.length;o++){const s=n[o];ti(s[1],s,e,t,r,i)}}(t,e,i,n,s)}}function Ns(e,t){return Ne(e)?e.createText(t):e.createTextNode(t)}function Rs(e,t,n){Ne(e)?e.setValue(t,n):t.textContent=n}function Ps(e,t){return e.createComment(function(e){return e.replace(ms,e=>e.replace(gs,"\u200b$1\u200b"))}(t))}function Os(e,t,n){return Ne(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Ds(e,t){const n=e[9],r=n.indexOf(t),s=t[3];1024&t[2]&&(t[2]&=-1025,Be(s,-1)),n.splice(r,1)}function Ls(e,t){if(e.length<=he)return;const n=he+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Ds(i,r),t>0&&(e[n-1][4]=r[4]);const o=An(e,he+t);ti(r[1],s=r,s[11],2,null,null),s[0]=null,s[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var s;return r}function Fs(e,t){if(!(256&t[2])){const n=t[11];Ne(n)&&n.destroyNode&&ti(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Ms(e[1],e);for(;t;){let n=null;if(de(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)de(t)&&Ms(t[1],t),t=t[3];null===t&&(t=e),de(t)&&Ms(t[1],t),n=t&&t[4]}t=n}}(t)}}function Ms(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof Ft)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],s=t[n+1];try{s.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let s=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const e=n[i+1],o="function"==typeof e?e(t):Pe(t[e]),a=r[s=n[i+2]],l=n[i+3];"boolean"==typeof l?o.removeEventListener(n[i],a,l):l>=0?r[s=l]():r[s=-l].unsubscribe(),i+=2}else{const e=r[s=n[i+1]];n[i].call(e)}if(null!==r){for(let e=s+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ne(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&pe(t[3])){n!==t[3]&&Ds(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Us(e,t,n){return js(e,t.parent,n)}function js(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===F.None||t===F.Emulated)return null}return De(r,n)}function qs(e,t,n,r,s){Ne(e)?e.insertBefore(t,n,r,s):t.insertBefore(n,r,s)}function Vs(e,t,n){Ne(e)?e.appendChild(t,n):t.appendChild(n)}function Bs(e,t,n,r,s){null!==r?qs(e,t,n,r,s):Vs(e,t,n)}function zs(e,t){return Ne(e)?e.parentNode(t):t.parentNode}function Hs(e,t,n){return Zs(e,t,n)}function $s(e,t,n){return 40&e.type?De(e,n):null}let Gs,Zs=$s;function Ws(e,t){Zs=e,Gs=t}function Ks(e,t,n,r){const s=Us(e,r,t),i=t[11],o=Hs(r.parent||t[6],r,t);if(null!=s)if(Array.isArray(n))for(let a=0;a<n.length;a++)Bs(i,s,n[a],o,!1);else Bs(i,s,n,o,!1);void 0!==Gs&&Gs(i,r,t,n,s)}function Qs(e,t){if(null!==t){const n=t.type;if(3&n)return De(t,e);if(4&n)return Js(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Qs(e,n);{const n=e[t.index];return pe(n)?Js(-1,n):Pe(n)}}if(32&n)return Es(t,e)()||Pe(e[t.index]);{const n=Ys(e,t);return null!==n?Array.isArray(n)?n[0]:Qs(Ss(e[16]),n):Qs(e,t.next)}}return null}function Ys(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Js(e,t){const n=he+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Qs(e,r)}return t[7]}function Xs(e,t,n){const r=zs(e,t);r&&function(e,t,n,r){Ne(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function ei(e,t,n,r,s,i,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&us(Pe(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)ei(e,t,n.child,r,s,i,!1),As(t,e,s,a,i);else if(32&l){const o=Es(n,r);let l;for(;l=o();)As(t,e,s,l,i);As(t,e,s,a,i)}else 16&l?ni(e,t,r,n,s,i):As(t,e,s,a,i);n=o?n.projectionNext:n.next}}function ti(e,t,n,r,s,i){ei(n,r,e.firstChild,t,s,i,!1)}function ni(e,t,n,r,s,i){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)As(t,e,s,a[l],i);else ei(e,t,a,o[3],s,i,!0)}function ri(e,t,n){Ne(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function si(e,t,n){Ne(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ii(e,t,n){let r=e.length;for(;;){const s=e.indexOf(t,n);if(-1===s)return s;if(0===s||e.charCodeAt(s-1)<=32){const n=t.length;if(s+n===r||e.charCodeAt(s+n)<=32)return s}n=s+1}}const oi="ng-template";function ai(e,t,n){let r=0;for(;r<e.length;){let s=e[r++];if(n&&"class"===s){if(s=e[r],-1!==ii(s.toLowerCase(),t,0))return!0}else if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}}return!1}function li(e){return 4===e.type&&e.value!==oi}function ui(e,t,n){return t===(4!==e.type||n?e.value:oi)}function ci(e,t,n){let r=4;const s=e.attrs||[],i=function(e){for(let t=0;t<e.length;t++)if(Ut(e[t]))return t;return e.length}(s);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!ui(e,l,n)||""===l&&1===t.length){if(hi(r))return!1;o=!0}}else{const u=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!ai(e.attrs,u,n)){if(hi(r))return!1;o=!0}continue}const c=di(8&r?"class":l,s,li(e),n);if(-1===c){if(hi(r))return!1;o=!0;continue}if(""!==u){let e;e=c>i?"":s[c+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ii(t,u,0)||2&r&&u!==e){if(hi(r))return!1;o=!0}}}}else{if(!o&&!hi(r)&&!hi(l))return!1;if(o&&hi(l))continue;o=!1,r=l|1&r}}return hi(r)||o}function hi(e){return 0==(1&e)}function di(e,t,n,r){if(null===t)return-1;let s=0;if(r||!n){let n=!1;for(;s<t.length;){const r=t[s];if(r===e)return s;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++s];for(;"string"==typeof e;)e=t[++s];continue}if(4===r)break;if(0===r){s+=4;continue}}s+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function pi(e,t,n=!1){for(let r=0;r<t.length;r++)if(ci(e,t[r],n))return!0;return!1}function fi(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function mi(e,t){return e?":not("+t.trim()+")":t}function gi(e){let t=e[0],n=1,r=2,s="",i=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];s+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?s+="."+o:4&r&&(s+=" "+o);else""===s||hi(o)||(t+=mi(i,s),s=""),r=o,i=i||!hi(r);n++}return""!==s&&(t+=mi(i,s)),t}const yi={};function _i(e){vi(We(),Ze(),It()+e,nt())}function vi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&Nt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&Rt(t,r,0,n)}Et(n)}function wi(e,t){return e<<17|t<<2}function bi(e){return e>>17&32767}function Ti(e){return 2|e}function Ii(e){return(131068&e)>>2}function Ei(e,t){return-131069&e|t<<2}function Si(e){return 1|e}function Ci(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r],i=n[r+1];if(-1!==i){const n=e.data[i];ft(s),n.contentQueries(2,t[i],i)}}}function ki(e,t,n,r,s,i,o,a,l,u){const c=t.blueprint.slice();return c[0]=s,c[2]=140|r,Ve(c),c[3]=c[15]=e,c[8]=n,c[10]=o||e&&e[10],c[11]=a||e&&e[11],c[12]=l||e&&e[12]||null,c[9]=u||e&&e[9]||null,c[6]=i,c[16]=2==t.type?e[16]:c,c}function xi(e,t,n,r,s){let i=e.data[t];if(null===i)i=Ai(e,t,n,r,s),ze.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=s;const e=Je();i.injectorIndex=null===e?-1:e.injectorIndex}return Xe(i,!0),i}function Ai(e,t,n,r,s){const i=Ye(),o=et(),a=e.data[t]=function(e,t,n,r,s,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:s,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,n,t,r,s);return null===e.firstChild&&(e.firstChild=a),null!==i&&(o?null==i.child&&null!==a.parent&&(i.child=a):null===i.next&&(i.next=a)),a}function Ni(e,t,n,r){if(0===n)return-1;const s=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return s}function Ri(e,t,n){yt(t);try{const r=e.viewQuery;null!==r&&uo(1,r,n);const s=e.template;null!==s&&Di(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ci(e,t),e.staticViewQueries&&uo(2,e.viewQuery,n);const i=e.components;null!==i&&function(e,t){for(let n=0;n<t.length;n++)so(e,t[n])}(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,Tt()}}function Pi(e,t,n,r){const s=t[2];if(256==(256&s))return;yt(t);const i=nt();try{Ve(t),ot(e.bindingStartIndex),null!==n&&Di(e,t,n,2,r);const o=3==(3&s);if(!i)if(o){const n=e.preOrderCheckHooks;null!==n&&Nt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&Rt(t,n,0,null),Pt(t,0)}if(function(e){for(let t=Cs(e);null!==t;t=ks(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Be(r,1),n[2]|=1024}}}(t),function(e){for(let t=Cs(e);null!==t;t=ks(t))for(let e=he;e<t.length;e++){const n=t[e],r=n[1];je(n)&&Pi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Ci(e,t),!i)if(o){const n=e.contentCheckHooks;null!==n&&Nt(t,n)}else{const n=e.contentHooks;null!==n&&Rt(t,n,1),Pt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)Et(~r);else{const s=r,i=n[++e],o=n[++e];ct(i,s),o(2,t[s])}}}finally{Et(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)no(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&uo(2,l,r),!i)if(o){const n=e.viewCheckHooks;null!==n&&Nt(t,n)}else{const n=e.viewHooks;null!==n&&Rt(t,n,2),Pt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),i||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Be(t[3],-1))}finally{Tt()}}function Oi(e,t,n,r){const s=t[10],i=!nt(),o=Ue(t);try{i&&!o&&s.begin&&s.begin(),o&&Ri(e,t,r),Pi(e,t,n,r)}finally{i&&!o&&s.end&&s.end()}}function Di(e,t,n,r,s){const i=It(),o=2&r;try{Et(-1),o&&t.length>ce&&vi(e,t,ce,nt()),n(r,s)}finally{Et(i)}}function Li(e,t,n){if(fe(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const t=e.data[s];t.contentQueries&&t.contentQueries(1,n[s],s)}}}function Fi(e,t,n){He()&&(function(e,t,n,r){const s=n.directiveStart,i=n.directiveEnd;e.firstCreatePass||Wt(n,t),us(r,t);const o=n.initialInputs;for(let a=s;a<i;a++){const r=e.data[a],i=ye(r);i&&Qi(t,n,r);const l=an(t,e,a,n);us(l,t),null!==o&&Xi(0,a-s,l,r,0,o),i&&(Me(n.index,t)[8]=l)}}(e,t,n,De(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,s=n.directiveEnd,i=n.index,o=ze.lFrame.currentDirectiveIndex;try{Et(i);for(let n=r;n<s;n++){const r=e.data[n],s=t[n];ht(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||$i(r,s)}}finally{Et(-1),ht(o)}}(e,t,n))}function Mi(e,t,n=De){const r=t.localNames;if(null!==r){let s=t.index+1;for(let i=0;i<r.length;i+=2){const o=r[i+1],a=-1===o?n(t,e):e[o];e[s++]=a}}}function Ui(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=ji(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function ji(e,t,n,r,s,i,o,a,l,u){const c=ce+r,h=c+s,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:yi);return n}(c,h),p="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function qi(e,t,n,r){const s=ho(t);null===n?s.push(r):(s.push(n),e.firstCreatePass&&po(e).push(r,s.length-1))}function Vi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const s=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,s):n[r]=[t,s]}return n}function Bi(e,t,n,r,s,i,o,a){const l=De(t,n);let u,c=t.inputs;var h;!a&&null!=c&&(u=c[r])?(go(e,n,u,r,s),me(t)&&function(e,t){const n=Me(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,s=null!=o?o(s,t.value||"",r):s,Ne(i)?i.setProperty(l,r,s):jt(r)||(l.setProperty?l.setProperty(r,s):l[r]=s))}function zi(e,t,n,r){let s=!1;if(He()){const i=function(e,t,n){const r=e.directiveRegistry;let s=null;if(r)for(let i=0;i<r.length;i++){const o=r[i];pi(n,o.selectors,!1)&&(s||(s=[]),Jt(Wt(n,t),e,o.type),ye(o)?(Gi(e,n),s.unshift(o)):s.push(o))}return s}(e,t,n),o=null===r?null:{"":-1};if(null!==i){s=!0,Wi(n,e.data.length,i.length);for(let e=0;e<i.length;e++){const t=i[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,l=Ni(e,t,i.length,null);for(let s=0;s<i.length;s++){const u=i[s];n.mergedAttrs=qt(n.mergedAttrs,u.hostAttrs),Ki(e,n,t,l,u),Zi(l,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!r&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(e,t){const n=t.directiveEnd,r=e.data,s=t.attrs,i=[];let o=null,a=null;for(let l=t.directiveStart;l<n;l++){const e=r[l],n=e.inputs,u=null===s||li(t)?null:eo(n,s);i.push(u),o=Vi(n,l,o),a=Vi(e.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=i,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const s=n[t[e+1]];if(null==s)throw new g("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],s)}}}(n,r,o)}return n.mergedAttrs=qt(n.mergedAttrs,n.attrs),s}function Hi(e,t,n,r,s,i){const o=i.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const i=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=i&&n.push(i),n.push(r,s,o)}}function $i(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Gi(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Zi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ye(t)&&(n[""]=e)}}function Wi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ki(e,t,n,r,s){e.data[r]=s;const i=s.factory||(s.factory=_e(s.type)),o=new Ft(i,ye(s),null);e.blueprint[r]=o,n[r]=o,Hi(e,t,0,r,Ni(e,n,s.hostVars,yi),s)}function Qi(e,t,n){const r=De(t,e),s=Ui(n),i=e[10],o=io(e,ki(e,s,null,n.onPush?64:16,r,t,i,i.createRenderer(r,n),null,null));e[t.index]=o}function Yi(e,t,n,r,s,i){const o=De(e,t);Ji(t[11],o,i,e.value,n,r,s)}function Ji(e,t,n,r,s,i,o){if(null==i)Ne(e)?e.removeAttribute(t,s,n):t.removeAttribute(s);else{const a=null==o?y(i):o(i,r||"",s);Ne(e)?e.setAttribute(t,s,a,n):n?t.setAttributeNS(n,s,a):t.setAttribute(s,a)}}function Xi(e,t,n,r,s,i){const o=i[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const s=o[t++],i=o[t++],a=o[t++];null!==e?r.setInput(n,a,s,i):n[i]=a}}}function eo(e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;e.hasOwnProperty(s)&&(null===n&&(n=[]),n.push(s,e[s],t[r+1])),r+=2}else r+=2;else r+=4}return n}function to(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function no(e,t){const n=Me(t,e);if(je(n)){const e=n[1];80&n[2]?Pi(e,n,e.template,n[8]):n[5]>0&&ro(n)}}function ro(e){for(let n=Cs(e);null!==n;n=ks(n))for(let e=he;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Pi(e,t,e.template,t[8])}else t[5]>0&&ro(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Me(t[n],e);je(r)&&r[5]>0&&ro(r)}}function so(e,t){const n=Me(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ri(r,n,n[8])}function io(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function oo(e){for(;e;){e[2]|=64;const t=Ss(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function ao(e,t,n){const r=t[10];r.begin&&r.begin();try{Pi(e,t,e.template,n)}catch(s){throw mo(t,s),s}finally{r.end&&r.end()}}function lo(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=cs(n),s=r[1];Oi(s,r,s.template,n)}}(e[8])}function uo(e,t,n){ft(0),t(e,n)}const co=(()=>Promise.resolve(null))();function ho(e){return e[7]||(e[7]=[])}function po(e){return e.cleanup||(e.cleanup=[])}function fo(e,t,n){return(null===e||ye(e))&&(n=function(e){for(;Array.isArray(e);){if("object"==typeof e[1])return e;e=e[0]}return null}(n[t.index])),n[11]}function mo(e,t){const n=e[9],r=n?n.get(fs,null):null;r&&r.handleError(t)}function go(e,t,n,r,s){for(let i=0;i<n.length;){const o=n[i++],a=n[i++],l=t[o],u=e.data[o];null!==u.setInput?u.setInput(l,s,r,a):l[a]=s}}function yo(e,t,n){const r=Oe(t,e);Rs(e[11],r,n)}function _o(e,t,n){let r=n?e.styles:null,s=n?e.classes:null,i=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?i=e:1==i?s=h(s,e):2==i&&(r=h(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=s:e.classesWithoutHost=s}const vo=new bn("INJECTOR",-1);class wo{get(e,t=Vn){if(t===Vn){const t=new Error(`NullInjectorError: No provider for ${c(e)}!`);throw t.name="NullInjectorError",t}return t}}const bo=new bn("Set Injector scope."),To={},Io={};let Eo;function So(){return void 0===Eo&&(Eo=new wo),Eo}function Co(e,t=null,n=null,r){return new ko(e,n,t||So(),r)}class ko{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];t&&kn(t,n=>this.processProvider(n,e,t)),kn([e],e=>this.processInjectorType(e,[],s)),this.records.set(vo,No(void 0,this));const i=this.records.get(bo);this.scope=null!=i?i.value:null,this.source=r||("object"==typeof e?null:c(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=Vn,n=N.Default){this.assertNotDestroyed();const r=Gn(this);try{if(!(n&N.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof bn)&&I(e);t=n&&this.injectableDefInScope(n)?No(xo(e),To):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&N.Self?So():this.parent).get(e,t=n&N.Optional&&t===Vn?null:t)}catch(i){if("NullInjectorError"===i.name){if((i.ngTempTokenPath=i.ngTempTokenPath||[]).unshift(c(e)),r)throw i;return function(e,t,n,r){const s=e.ngTempTokenPath;throw t[zn]&&s.unshift(t[zn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let s=c(t);if(Array.isArray(t))s=t.map(c).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):c(r)))}s=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${s}]: ${e.replace(Bn,"\n  ")}`}("\n"+e.message,s,n,r),e.ngTokenPath=s,e.ngTempTokenPath=null,e}(i,e,"R3InjectorError",this.source)}throw i}finally{Gn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(c(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let r=S(e);const s=null==r&&e.ngModule||void 0,i=void 0===s?e:s,o=-1!==n.indexOf(i);if(void 0!==s&&(r=S(s)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(i);try{kn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];kn(r,e=>this.processProvider(e,n,r||z))}}this.injectorDefTypes.add(i);const a=_e(i)||(()=>new i);this.records.set(i,No(a,To));const l=r.providers;if(null!=l&&!o){const t=e;kn(l,e=>this.processProvider(e,t,l))}return void 0!==s&&void 0!==e.providers}processProvider(e,t,n){let r=Po(e=f(e))?e:f(e&&e.provide);const s=function(e,t,n){return Ro(e)?No(void 0,e.useValue):No(Ao(e),To)}(e);if(Po(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=No(void 0,To,!0),t.factory=()=>Qn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,s)}hydrate(e,t){var n;return t.value===To&&(t.value=Io,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function xo(e){const t=I(e),n=null!==t?t.factory:_e(e);if(null!==n)return n;if(e instanceof bn)throw new Error(`Token ${c(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=Nn(t,"?");throw new Error(`Can't resolve all parameters for ${c(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[C]||e[x]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Ao(e,t,n){let r;if(Po(e)){const t=f(e);return _e(t)||xo(t)}if(Ro(e))r=()=>f(e.useValue);else if((s=e)&&s.useFactory)r=()=>e.useFactory(...Qn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Wn(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return _e(t)||xo(t);r=()=>new t(...Qn(e.deps))}var s;return r}function No(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Ro(e){return null!==e&&"object"==typeof e&&Hn in e}function Po(e){return"function"==typeof e}const Oo=function(e,t,n){return function(e,t=null,n=null,r){const s=Co(e,t,n,r);return s._resolveInjectorDefTypes(),s}({name:n},t,e,n)};let Do=(()=>{class e{static create(e,t){return Array.isArray(e)?Oo(e,t,""):Oo(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=Vn,e.NULL=new wo,e.\u0275prov=b({token:e,providedIn:"any",factory:()=>Wn(vo)}),e.__NG_ELEMENT_ID__=-1,e})();function Lo(e,t){At(cs(e)[1],Qe())}function Fo(e){return Object.getPrototypeOf(e.prototype).constructor}function Mo(e){let t=Fo(e.type),n=!0;const r=[e];for(;t;){let s;if(ye(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");s=t.\u0275dir}if(s){if(n){r.push(s);const t=e;t.inputs=Uo(e.inputs),t.declaredInputs=Uo(e.declaredInputs),t.outputs=Uo(e.outputs);const n=s.hostBindings;n&&Vo(e,n);const i=s.viewQuery,o=s.contentQueries;if(i&&jo(e,i),o&&qo(e,o),u(e.inputs,s.inputs),u(e.declaredInputs,s.declaredInputs),u(e.outputs,s.outputs),ye(s)&&s.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(s.data.animation)}}const t=s.features;if(t)for(let r=0;r<t.length;r++){const s=t[r];s&&s.ngInherit&&s(e),s===Mo&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const s=e[r];s.hostVars=t+=s.hostVars,s.hostAttrs=qt(s.hostAttrs,n=qt(n,s.hostAttrs))}}(r)}function Uo(e){return e===B?{}:e===z?[]:e}function jo(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function qo(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,s)=>{t(e,r,s),n(e,r,s)}:t}function Vo(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}const Bo=["providersResolver"],zo=["template","decls","consts","vars","onPush","ngContentSelectors","styles","encapsulation","schemas"];function Ho(e){let t,n=Fo(e.type);t=ye(e)?n.\u0275cmp:n.\u0275dir;const r=e;for(const s of Bo)r[s]=t[s];if(ye(t))for(const s of zo)r[s]=t[s]}let $o=null;function Go(){if(!$o){const e=V.Symbol;if(e&&e.iterator)$o=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&($o=n)}}}return $o}class Zo{constructor(e){this.wrapped=e}static wrap(e){return new Zo(e)}static unwrap(e){return Zo.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Zo}}function Wo(e){return!!Ko(e)&&(Array.isArray(e)||!(e instanceof Map)&&Go()in e)}function Ko(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Qo(e,t,n){return e[t]=n}function Yo(e,t){return e[t]}function Jo(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Xo(e,t,n,r){const s=Jo(e,t,n);return Jo(e,t+1,r)||s}function ea(e,t,n,r,s){const i=Xo(e,t,n,r);return Jo(e,t+2,s)||i}function ta(e,t,n,r,s,i){const o=Xo(e,t,n,r);return Xo(e,t+2,s,i)||o}function na(e,t,n,r){const s=Ze();return Jo(s,at(),t)&&(We(),Yi(St(),s,e,t,n,r)),na}function ra(e,t){let n=!1,r=it();for(let i=1;i<t.length;i+=2)n=Jo(e,r++,t[i])||n;if(ot(r),!n)return yi;let s=t[0];for(let i=1;i<t.length;i+=2)s+=y(t[i])+t[i+1];return s}function sa(e,t,n,r){return Jo(e,at(),n)?t+y(n)+r:yi}function ia(e,t,n,r,s,i){const o=Xo(e,it(),n,s);return lt(2),o?t+y(n)+r+y(s)+i:yi}function oa(e,t,n,r,s,i,o,a){const l=ea(e,it(),n,s,o);return lt(3),l?t+y(n)+r+y(s)+i+y(o)+a:yi}function aa(e,t,n,r,s,i,o,a,l,u){const c=ta(e,it(),n,s,o,l);return lt(4),c?t+y(n)+r+y(s)+i+y(o)+a+y(l)+u:yi}function la(e,t,n,r,s,i,o,a,l,u,c,h){const d=it();let p=ta(e,d,n,s,o,l);return p=Jo(e,d+4,c)||p,lt(5),p?t+y(n)+r+y(s)+i+y(o)+a+y(l)+u+y(c)+h:yi}function ua(e,t,n,r,s,i,o,a,l,u,c,h,d,p){const f=it();let m=ta(e,f,n,s,o,l);return m=Xo(e,f+4,c,d)||m,lt(6),m?t+y(n)+r+y(s)+i+y(o)+a+y(l)+u+y(c)+h+y(d)+p:yi}function ca(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m){const g=it();let _=ta(e,g,n,s,o,l);return _=ea(e,g+4,c,d,f)||_,lt(7),_?t+y(n)+r+y(s)+i+y(o)+a+y(l)+u+y(c)+h+y(d)+p+y(f)+m:yi}function ha(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,_){const v=it();let w=ta(e,v,n,s,o,l);return w=ta(e,v+4,c,d,f,g)||w,lt(8),w?t+y(n)+r+y(s)+i+y(o)+a+y(l)+u+y(c)+h+y(d)+p+y(f)+m+y(g)+_:yi}function da(e,t,n,r,s,i){const o=Ze(),a=sa(o,t,n,r);return a!==yi&&Yi(St(),o,e,a,s,i),da}function pa(e,t,n,r,s,i,o,a){const l=Ze(),u=ia(l,t,n,r,s,i);return u!==yi&&Yi(St(),l,e,u,o,a),pa}function fa(e,t,n,r,s,i,o,a,l,u){const c=Ze(),h=oa(c,t,n,r,s,i,o,a);return h!==yi&&Yi(St(),c,e,h,l,u),fa}function ma(e,t,n,r,s,i,o,a,l,u,c,h){const d=Ze(),p=aa(d,t,n,r,s,i,o,a,l,u);return p!==yi&&Yi(St(),d,e,p,c,h),ma}function ga(e,t,n,r,s,i,o,a,l,u,c,h,d,p){const f=Ze(),m=la(f,t,n,r,s,i,o,a,l,u,c,h);return m!==yi&&Yi(St(),f,e,m,d,p),ga}function ya(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m){const g=Ze(),y=ua(g,t,n,r,s,i,o,a,l,u,c,h,d,p);return y!==yi&&Yi(St(),g,e,y,f,m),ya}function _a(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y){const _=Ze(),v=ca(_,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m);return v!==yi&&Yi(St(),_,e,v,g,y),_a}function va(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y,_,v){const w=Ze(),b=ha(w,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y);return b!==yi&&Yi(St(),w,e,b,_,v),va}function wa(e,t,n,r){const s=Ze(),i=ra(s,t);return i!==yi&&Yi(St(),s,e,i,n,r),wa}function ba(e,t,n,r,s,i,o,a){const l=Ze(),u=We(),c=e+ce,h=u.firstCreatePass?function(e,t,n,r,s,i,o,a,l){const u=t.consts,c=xi(t,e,4,o||null,qe(u,a));zi(t,n,c,qe(u,l)),At(t,c);const h=c.tViews=ji(2,c,r,s,i,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,c),h.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,r,s,i,o):u.data[c];Xe(h,!1);const d=l[11].createComment("");Ks(u,l,d,h),us(d,l),io(l,l[c]=to(d,l,d,h)),ge(h)&&Fi(u,l,h),null!=o&&Mi(l,h,a)}function Ta(e){return Fe(ze.lFrame.contextLView,ce+e)}const Ia={"\u0275\u0275defineInjectable":b,"\u0275\u0275defineInjector":T,"\u0275\u0275inject":Wn,"\u0275\u0275invalidFactoryDep":Kn,resolveForwardRef:f},Ea=l({provide:String,useValue:l});function Sa(e){return void 0!==e.useClass}function Ca(e){return void 0!==e.useFactory}const ka=yn("Injectable",void 0,void 0,void 0,(e,t)=>xa(e,t)),xa=function(e,t){let n=null,r=null;e.hasOwnProperty(C)||Object.defineProperty(e,C,{get:()=>(null===n&&(n=In().compileInjectable(Ia,`ng:///${e.name}/\u0275prov.js`,function(e,t){const n=t||{providedIn:null},r={name:e.name,type:e,typeArgumentCount:0,providedIn:n.providedIn};return(Sa(n)||Ca(n))&&void 0!==n.deps&&(r.deps=ar(n.deps)),Sa(n)?r.useClass=n.useClass:function(e){return Ea in e}(n)?r.useValue=n.useValue:Ca(n)?r.useFactory=n.useFactory:function(e){return void 0!==e.useExisting}(n)&&(r.useExisting=n.useExisting),r}(e,t))),n)}),e.hasOwnProperty(K)||Object.defineProperty(e,K,{get:()=>{if(null===r){const t=In();r=t.compileFactory(Ia,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,typeArgumentCount:0,deps:or(e),target:t.FactoryTarget.Injectable})}return r},configurable:!0})};function Aa(e,t=N.Default){const n=Ze();return null===n?Wn(e,t):tn(Qe(),n,f(e),t)}function Na(){throw new Error("invalid")}function Ra(e,t,n){const r=Ze();return Jo(r,at(),t)&&Bi(We(),St(),r,e,t,r[11],n,!1),Ra}function Pa(e,t,n,r,s){const i=s?"class":"style";go(e,n,t.inputs[i],i,r)}function Oa(e,t,n,r){const s=Ze(),i=We(),o=ce+e,a=s[11],l=s[o]=Os(a,t,ze.lFrame.currentNamespace),u=i.firstCreatePass?function(e,t,n,r,s,i,o){const a=t.consts,l=xi(t,e,2,s,qe(a,i));return zi(t,n,l,qe(a,o)),null!==l.attrs&&_o(l,l.attrs,!1),null!==l.mergedAttrs&&_o(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,i,s,0,t,n,r):i.data[o];Xe(u,!0);const c=u.mergedAttrs;null!==c&&Mt(a,l,c);const h=u.classes;null!==h&&si(a,l,h);const d=u.styles;null!==d&&ri(a,l,d),64!=(64&u.flags)&&Ks(i,s,l,u),0===ze.lFrame.elementDepthCount&&us(l,s),ze.lFrame.elementDepthCount++,ge(u)&&(Fi(i,s,u),Li(i,u,s)),null!==r&&Mi(s,u)}function Da(){let e=Qe();et()?tt():(e=e.parent,Xe(e,!1));const t=e;ze.lFrame.elementDepthCount--;const n=We();n.firstCreatePass&&(At(n,e),fe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Pa(n,t,Ze(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Pa(n,t,Ze(),t.stylesWithoutHost,!1)}function La(e,t,n,r){Oa(e,t,n,r),Da()}function Fa(e,t,n){const r=Ze(),s=We(),i=e+ce,o=s.firstCreatePass?function(e,t,n,r,s){const i=t.consts,o=qe(i,r),a=xi(t,e,8,"ng-container",o);return null!==o&&_o(a,o,!0),zi(t,n,a,qe(i,s)),null!==t.queries&&t.queries.elementStart(t,a),a}(i,s,r,t,n):s.data[i];Xe(o,!0);const a=r[i]=r[11].createComment("");Ks(s,r,a,o),us(a,r),ge(o)&&(Fi(s,r,o),Li(s,o,r)),null!=n&&Mi(r,o)}function Ma(){let e=Qe();const t=We();et()?tt():(e=e.parent,Xe(e,!1)),t.firstCreatePass&&(At(t,e),fe(e)&&t.queries.elementEnd(e))}function Ua(e,t,n){Fa(e,t,n),Ma()}function ja(){return Ze()}function qa(e){return!!e&&"function"==typeof e.then}function Va(e){return!!e&&"function"==typeof e.subscribe}const Ba=Va;function za(e,t,n,r){const s=Ze(),i=We(),o=Qe();return $a(i,s,s[11],o,e,t,!!n,r),za}function Ha(e,t){const n=Qe(),r=Ze(),s=We();return $a(s,r,fo(dt(s.data),n,r),n,e,t,!1),Ha}function $a(e,t,n,r,s,i,o,a){const l=ge(r),u=e.firstCreatePass&&po(e),c=ho(t);let h=!0;if(3&r.type||a){const d=De(r,t),p=a?a(d):d,f=c.length,m=a?e=>a(Pe(e[r.index])):r.index;if(Ne(n)){let o=null;if(!a&&l&&(o=function(e,t,n,r){const s=e.cleanup;if(null!=s)for(let i=0;i<s.length-1;i+=2){const e=s[i];if(e===n&&s[i+1]===r){const e=t[7],n=s[i+2];return e.length>n?e[n]:null}"string"==typeof e&&(i+=2)}return null}(e,t,s,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=i,o.__ngLastListenerFn__=i,h=!1;else{i=Za(r,t,0,i,!1);const e=n.listen(p,s,i);c.push(i,e),u&&u.push(s,m,f,f+1)}}else i=Za(r,t,0,i,!0),p.addEventListener(s,i,o),c.push(i),u&&u.push(s,m,f,o)}else i=Za(r,t,0,i,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[s])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(i),o=c.length;c.push(i,e),u&&u.push(s,r.index,o,-(o+1))}}}function Ga(e,t,n,r){try{return!1!==n(r)}catch(s){return mo(e,s),!1}}function Za(e,t,n,r,s){return function n(i){if(i===Function)return r;const o=2&e.flags?Me(e.index,t):t;0==(32&t[2])&&oo(o);let a=Ga(t,0,r,i),l=n.__ngNextListenerFn__;for(;l;)a=Ga(t,0,l,i)&&a,l=l.__ngNextListenerFn__;return s&&!1===a&&(i.preventDefault(),i.returnValue=!1),a}}function Wa(e=1){return function(e){return(ze.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,ze.lFrame.contextLView))[8]}(e)}function Ka(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let s=0;s<t.length;s++){const i=t[s];if("*"!==i){if(null===r?pi(e,i,!0):fi(r,i))return s}else n=s}return n}function Qa(e){const t=Ze()[16][6];if(!t.projection){const n=t.projection=Nn(e?e.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const t=e?Ka(s,e):0;null!==t&&(r[t]?r[t].projectionNext=s:n[t]=s,r[t]=s),s=s.next}}}function Ya(e,t=0,n){const r=Ze(),s=We(),i=xi(s,ce+e,16,null,n||null);null===i.projection&&(i.projection=t),tt(),64!=(64&i.flags)&&function(e,t,n){ni(t[11],0,t,n,Us(e,n,t),Hs(n.parent||t[6],n,t))}(s,r,i)}function Ja(e,t,n){return Xa(e,"",t,"",n),Ja}function Xa(e,t,n,r,s){const i=Ze(),o=sa(i,t,n,r);return o!==yi&&Bi(We(),St(),i,e,o,i[11],s,!1),Xa}function el(e,t,n,r,s,i,o){const a=Ze(),l=ia(a,t,n,r,s,i);return l!==yi&&Bi(We(),St(),a,e,l,a[11],o,!1),el}function tl(e,t,n,r,s,i,o,a,l){const u=Ze(),c=oa(u,t,n,r,s,i,o,a);return c!==yi&&Bi(We(),St(),u,e,c,u[11],l,!1),tl}function nl(e,t,n,r,s,i,o,a,l,u,c){const h=Ze(),d=aa(h,t,n,r,s,i,o,a,l,u);return d!==yi&&Bi(We(),St(),h,e,d,h[11],c,!1),nl}function rl(e,t,n,r,s,i,o,a,l,u,c,h,d){const p=Ze(),f=la(p,t,n,r,s,i,o,a,l,u,c,h);return f!==yi&&Bi(We(),St(),p,e,f,p[11],d,!1),rl}function sl(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f){const m=Ze(),g=ua(m,t,n,r,s,i,o,a,l,u,c,h,d,p);return g!==yi&&Bi(We(),St(),m,e,g,m[11],f,!1),sl}function il(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g){const y=Ze(),_=ca(y,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m);return _!==yi&&Bi(We(),St(),y,e,_,y[11],g,!1),il}function ol(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y,_){const v=Ze(),w=ha(v,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y);return w!==yi&&Bi(We(),St(),v,e,w,v[11],_,!1),ol}function al(e,t,n){const r=Ze(),s=ra(r,t);return s!==yi&&Bi(We(),St(),r,e,s,r[11],n,!1),al}function ll(e,t,n,r,s){const i=e[n+1],o=null===t;let a=r?bi(i):Ii(i),l=!1;for(;0!==a&&(!1===l||o);){const n=e[a+1];ul(e[a],t)&&(l=!0,e[a+1]=r?Si(n):Ti(n)),a=r?bi(n):Ii(n)}l&&(e[n+1]=r?Ti(i):Si(i))}function ul(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&On(e,t)>=0}const cl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function hl(e){return e.substring(cl.key,cl.keyEnd)}function dl(e){return e.substring(cl.value,cl.valueEnd)}function pl(e,t){const n=cl.textEnd;return n===t?-1:(t=cl.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,cl.key=t,n),gl(e,t,n))}function fl(e,t){const n=cl.textEnd;let r=cl.key=gl(e,t,n);return n===r?-1:(r=cl.keyEnd=function(e,t,n){let r;for(;t<n&&(45===(r=e.charCodeAt(t))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)t++;return t}(e,r,n),r=yl(e,r,n),r=cl.value=gl(e,r,n),r=cl.valueEnd=function(e,t,n){let r=-1,s=-1,i=-1,o=t,a=o;for(;o<n;){const l=e.charCodeAt(o++);if(59===l)return a;34===l||39===l?a=o=_l(e,l,o,n):t===o-4&&85===i&&82===s&&76===r&&40===l?a=o=_l(e,41,o,n):l>32&&(a=o),i=s,s=r,r=-33&l}return a}(e,r,n),yl(e,r,n))}function ml(e){cl.key=0,cl.keyEnd=0,cl.value=0,cl.valueEnd=0,cl.textEnd=e.length}function gl(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function yl(e,t,n,r){return(t=gl(e,t,n))<n&&t++,t}function _l(e,t,n,r){let s=-1,i=n;for(;i<r;){const n=e.charCodeAt(i++);if(n==t&&92!==s)return i;s=92==n&&92===s?0:n}throw new Error}function vl(e,t,n){return Sl(e,t,n,!1),vl}function wl(e,t){return Sl(e,t,null,!0),wl}function bl(e){Cl(Rl,Tl,e,!1)}function Tl(e,t){for(let n=function(e){return ml(e),fl(e,gl(e,0,cl.textEnd))}(t);n>=0;n=fl(t,n))Rl(e,hl(t),dl(t))}function Il(e){Cl(Rn,El,e,!0)}function El(e,t){for(let n=function(e){return ml(e),pl(e,gl(e,0,cl.textEnd))}(t);n>=0;n=pl(t,n))Rn(e,hl(t),!0)}function Sl(e,t,n,r){const s=Ze(),i=We(),o=lt(2);i.firstUpdatePass&&xl(i,e,o,r),t!==yi&&Jo(s,o,t)&&Pl(i,i.data[It()],s,s[11],e,s[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=c(wr(e)))),e}(t,n),r,o)}function Cl(e,t,n,r){const s=We(),i=lt(2);s.firstUpdatePass&&xl(s,null,i,r);const o=Ze();if(n!==yi&&Jo(o,i,n)){const a=s.data[It()];if(Ll(a,r)&&!kl(s,i)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=h(e,n||"")),Pa(s,a,o,n,r)}else!function(e,t,n,r,s,i,o,a){s===yi&&(s=z);let l=0,u=0,c=0<s.length?s[0]:null,h=0<i.length?i[0]:null;for(;null!==c||null!==h;){const d=l<s.length?s[l+1]:void 0,p=u<i.length?i[u+1]:void 0;let f,m=null;c===h?(l+=2,u+=2,d!==p&&(m=h,f=p)):null===h||null!==c&&c<h?(l+=2,m=c):(u+=2,m=h,f=p),null!==m&&Pl(e,t,n,r,m,f,o,a),c=l<s.length?s[l]:null,h=u<i.length?i[u]:null}}(s,a,o,o[11],o[i+1],o[i+1]=function(e,t,n){if(null==n||""===n)return z;const r=[],s=wr(n);if(Array.isArray(s))for(let i=0;i<s.length;i++)e(r,s[i],!0);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&e(r,i,s[i]);else"string"==typeof s&&t(r,s);return r}(e,t,n),r,i)}}function kl(e,t){return t>=e.expandoStartIndex}function xl(e,t,n,r){const s=e.data;if(null===s[n+1]){const i=s[It()],o=kl(e,n);Ll(i,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const s=dt(e);let i=r?t.residualClasses:t.residualStyles;if(null===s)0===(r?t.classBindings:t.styleBindings)&&(n=Nl(n=Al(null,e,t,n,r),t.attrs,r),i=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==s)if(n=Al(s,e,t,n,r),null===i){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Ii(r))return e[bi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Al(null,e,t,n[1],r),n=Nl(n,t.attrs,r),function(e,t,n,r){e[bi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else i=function(e,t,n){let r;const s=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<s;i++)r=Nl(r,e[i].hostAttrs,n);return Nl(r,t.attrs,n)}(e,t,r)}return void 0!==i&&(r?t.residualClasses=i:t.residualStyles=i),n}(s,i,t,r),function(e,t,n,r,s,i){let o=i?t.classBindings:t.styleBindings,a=bi(o),l=Ii(o);e[r]=n;let u,c=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||On(e,u)>0)&&(c=!0)}else u=n;if(s)if(0!==l){const t=bi(e[a+1]);e[r+1]=wi(t,a),0!==t&&(e[t+1]=Ei(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=wi(a,0),0!==a&&(e[a+1]=Ei(e[a+1],r)),a=r;else e[r+1]=wi(l,0),0===a?a=r:e[l+1]=Ei(e[l+1],r),l=r;c&&(e[r+1]=Ti(e[r+1])),ll(e,u,r,!0),ll(e,u,r,!1),function(e,t,n,r,s){const i=s?e.residualClasses:e.residualStyles;null!=i&&"string"==typeof t&&On(i,t)>=0&&(n[r+1]=Si(n[r+1]))}(t,u,e,r,i),o=wi(a,l),i?t.classBindings=o:t.styleBindings=o}(s,i,t,n,o,r)}}function Al(e,t,n,r,s){let i=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(i=t[a],r=Nl(r,i.hostAttrs,s),i!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Nl(e,t,n){const r=n?1:2;let s=-1;if(null!==t)for(let i=0;i<t.length;i++){const o=t[i];"number"==typeof o?s=o:s===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Rn(e,o,!!n||t[++i]))}return void 0===e?null:e}function Rl(e,t,n){Rn(e,t,wr(n))}function Pl(e,t,n,r,s,i,o,a){if(!(3&t.type))return;const l=e.data,u=l[a+1];Dl(1==(1&u)?Ol(l,t,n,s,Ii(u),o):void 0)||(Dl(i)||2==(2&u)&&(i=Ol(l,null,n,s,a,o)),function(e,t,n,r,s){const i=Ne(e);if(t)s?i?e.addClass(n,r):n.classList.add(r):i?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Ts.DashCase;if(null==s)i?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof s&&s.endsWith("!important");o&&(s=s.slice(0,-10),t|=Ts.Important),i?e.setStyle(n,r,s,t):n.style.setProperty(r,s,o?"important":"")}}}(r,o,Oe(It(),n),s,i))}function Ol(e,t,n,r,s,i){const o=null===t;let a;for(;s>0;){const t=e[s],i=Array.isArray(t),l=i?t[1]:t,u=null===l;let c=n[s+1];c===yi&&(c=u?z:void 0);let h=u?Pn(c,r):l===r?c:void 0;if(i&&!Dl(h)&&(h=Pn(t,r)),Dl(h)&&(a=h,o))return a;const d=e[s+1];s=o?bi(d):Ii(d)}if(null!==t){let e=i?t.residualClasses:t.residualStyles;null!=e&&(a=Pn(e,r))}return a}function Dl(e){return void 0!==e}function Ll(e,t){return 0!=(e.flags&(t?16:32))}function Fl(e,t=""){const n=Ze(),r=We(),s=e+ce,i=r.firstCreatePass?xi(r,s,1,t,null):r.data[s],o=n[s]=Ns(n[11],t);Ks(r,n,o,i),Xe(i,!1)}function Ml(e){return Ul("",e,""),Ml}function Ul(e,t,n){const r=Ze(),s=sa(r,e,t,n);return s!==yi&&yo(r,It(),s),Ul}function jl(e,t,n,r,s){const i=Ze(),o=ia(i,e,t,n,r,s);return o!==yi&&yo(i,It(),o),jl}function ql(e,t,n,r,s,i,o){const a=Ze(),l=oa(a,e,t,n,r,s,i,o);return l!==yi&&yo(a,It(),l),ql}function Vl(e,t,n,r,s,i,o,a,l){const u=Ze(),c=aa(u,e,t,n,r,s,i,o,a,l);return c!==yi&&yo(u,It(),c),Vl}function Bl(e,t,n,r,s,i,o,a,l,u,c){const h=Ze(),d=la(h,e,t,n,r,s,i,o,a,l,u,c);return d!==yi&&yo(h,It(),d),Bl}function zl(e,t,n,r,s,i,o,a,l,u,c,h,d){const p=Ze(),f=ua(p,e,t,n,r,s,i,o,a,l,u,c,h,d);return f!==yi&&yo(p,It(),f),zl}function Hl(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f){const m=Ze(),g=ca(m,e,t,n,r,s,i,o,a,l,u,c,h,d,p,f);return g!==yi&&yo(m,It(),g),Hl}function $l(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g){const y=Ze(),_=ha(y,e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g);return _!==yi&&yo(y,It(),_),$l}function Gl(e){const t=Ze(),n=ra(t,e);return n!==yi&&yo(t,It(),n),Gl}function Zl(e,t,n){Cl(Rn,El,sa(Ze(),e,t,n),!0)}function Wl(e,t,n,r,s){Cl(Rn,El,ia(Ze(),e,t,n,r,s),!0)}function Kl(e,t,n,r,s,i,o){Cl(Rn,El,oa(Ze(),e,t,n,r,s,i,o),!0)}function Ql(e,t,n,r,s,i,o,a,l){Cl(Rn,El,aa(Ze(),e,t,n,r,s,i,o,a,l),!0)}function Yl(e,t,n,r,s,i,o,a,l,u,c){Cl(Rn,El,la(Ze(),e,t,n,r,s,i,o,a,l,u,c),!0)}function Jl(e,t,n,r,s,i,o,a,l,u,c,h,d){Cl(Rn,El,ua(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d),!0)}function Xl(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f){Cl(Rn,El,ca(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d,p,f),!0)}function eu(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g){Cl(Rn,El,ha(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g),!0)}function tu(e){Cl(Rn,El,ra(Ze(),e),!0)}function nu(e,t,n){bl(sa(Ze(),e,t,n))}function ru(e,t,n,r,s){bl(ia(Ze(),e,t,n,r,s))}function su(e,t,n,r,s,i,o){bl(oa(Ze(),e,t,n,r,s,i,o))}function iu(e,t,n,r,s,i,o,a,l){bl(aa(Ze(),e,t,n,r,s,i,o,a,l))}function ou(e,t,n,r,s,i,o,a,l,u,c){bl(la(Ze(),e,t,n,r,s,i,o,a,l,u,c))}function au(e,t,n,r,s,i,o,a,l,u,c,h,d){bl(ua(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d))}function lu(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f){bl(ca(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d,p,f))}function uu(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g){bl(ha(Ze(),e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g))}function cu(e){bl(ra(Ze(),e))}function hu(e,t,n,r,s){return Sl(e,sa(Ze(),t,n,r),s,!1),hu}function du(e,t,n,r,s,i,o){return Sl(e,ia(Ze(),t,n,r,s,i),o,!1),du}function pu(e,t,n,r,s,i,o,a,l){return Sl(e,oa(Ze(),t,n,r,s,i,o,a),l,!1),pu}function fu(e,t,n,r,s,i,o,a,l,u,c){return Sl(e,aa(Ze(),t,n,r,s,i,o,a,l,u),c,!1),fu}function mu(e,t,n,r,s,i,o,a,l,u,c,h,d){return Sl(e,la(Ze(),t,n,r,s,i,o,a,l,u,c,h),d,!1),mu}function gu(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f){return Sl(e,ua(Ze(),t,n,r,s,i,o,a,l,u,c,h,d,p),f,!1),gu}function yu(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g){return Sl(e,ca(Ze(),t,n,r,s,i,o,a,l,u,c,h,d,p,f,m),g,!1),yu}function _u(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y,_){return Sl(e,ha(Ze(),t,n,r,s,i,o,a,l,u,c,h,d,p,f,m,g,y),_,!1),_u}function vu(e,t,n){return Sl(e,ra(Ze(),t),n,!1),vu}function wu(e,t,n){const r=Ze();return Jo(r,at(),t)&&Bi(We(),St(),r,e,t,r[11],n,!0),wu}function bu(e,t,n){const r=Ze();if(Jo(r,at(),t)){const s=We(),i=St();Bi(s,i,r,e,t,fo(dt(s.data),i,r),n,!0)}return bu}const Tu=void 0;var Iu=["en",[["a","p"],["AM","PM"],Tu],[["AM","PM"],Tu,Tu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Tu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Tu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Tu,"{1} 'at' {0}",Tu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Eu={};function Su(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ku(t);if(n)return n;const r=t.split("-")[0];if(n=ku(r),n)return n;if("en"===r)return Iu;throw new Error(`Missing locale data for the locale "${e}".`)}function Cu(e){return Su(e)[xu.PluralCase]}function ku(e){return e in Eu||(Eu[e]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[e]),Eu[e]}var xu=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({});const Au=["zero","one","two","few","many"],Nu="en-US",Ru={marker:"element"},Pu={marker:"ICU"};var Ou=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});let Du=Nu;function Lu(e){var t;null==(t=e)&&w("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&(Du=e.toLowerCase().replace(/_/g,"-"))}function Fu(e,t,n){const r=t.insertBeforeIndex,s=Array.isArray(r)?r[0]:r;return null===s?$s(e,0,n):Pe(n[s])}function Mu(e,t,n,r,s){const i=t.insertBeforeIndex;if(Array.isArray(i)){let o=r,a=null;if(3&t.type||(a=o,o=s),null!==o&&0==(2&t.flags))for(let t=1;t<i.length;t++)qs(e,o,n[i[t]],a,!1)}}function Uu(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];ju(r)||qu(r,t)&&null===Vu(r)&&Bu(r,t.index)}}function ju(e){return!(64&e.type)}function qu(e,t){return ju(t)||e.index>t.index}function Vu(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Bu(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(Ws(Fu,Mu),e.insertBeforeIndex=t)}function zu(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Hu(e,t,n){const r=Ai(e,n,64,null,null);return Uu(t,r),r}function $u(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Gu=0,Zu=0;function Wu(e,t,n,r){const s=n[11];let i,o=null;for(let a=0;a<t.length;a++){const l=t[a];if("string"==typeof l){const e=t[++a];null===n[e]&&(n[e]=Ns(s,l))}else if("number"==typeof l)switch(1&l){case 0:const u=l>>>17;let c,h;if(null===o&&(o=u,i=zs(s,r)),u===o?(c=r,h=i):(c=null,h=Pe(n[u])),null!==h){const t=(131070&l)>>>1;qs(s,h,n[t],c,!1);const r=zu(e,t);if(null!==r&&"object"==typeof r){const t=$u(r,n);null!==t&&Wu(e,r.create[t],n,n[r.anchorIdx])}}break;case 1:const d=t[++a],p=t[++a];Ji(s,Oe(l>>>1,n),null,null,d,p,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${l}"`)}else switch(l){case Pu:const e=t[++a],r=t[++a];null===n[r]&&us(n[r]=Ps(s,e),n);break;case Ru:const i=t[++a],o=t[++a];null===n[o]&&us(n[o]=Os(s,i,null),n)}}}function Ku(e,t,n,r,s){for(let i=0;i<n.length;i++){const o=n[i],a=n[++i];if(o&s){let s="";for(let o=i+1;o<=i+a;o++){const i=n[o];if("string"==typeof i)s+=i;else if("number"==typeof i)if(i<0)s+=y(t[r-i]);else{const a=i>>>2;switch(3&i){case 1:const i=n[++o],l=n[++o],u=e.data[a];"string"==typeof u?Ji(t[11],t[a],null,u,i,s,l):Bi(e,u,t,i,s,t[11],l,!1);break;case 0:const c=t[a];null!==c&&Rs(t[11],c,s);break;case 2:Yu(e,zu(e,a),t,s);break;case 3:Qu(e,zu(e,a),r,t)}}}}else{const s=n[i+1];if(s>0&&3==(3&s)){const n=zu(e,s>>>2);t[n.currentCaseLViewIndex]<0&&Qu(e,n,r,t)}}i+=a}}function Qu(e,t,n,r){let s=r[t.currentCaseLViewIndex];if(null!==s){let i=Gu;s<0&&(s=r[t.currentCaseLViewIndex]=~s,i=-1),Ku(e,r,t.update[s],n,i)}}function Yu(e,t,n,r){const s=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=Cu(t)(parseInt(e,10)),r=Au[n];return void 0!==r?r:"other"}(t,Du);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if($u(t,n)!==s&&(Ju(e,t,n),n[t.currentCaseLViewIndex]=null===s?null:~s,null!==s)){const r=n[t.anchorIdx];r&&Wu(e,t.create[s],n,r)}}function Ju(e,t,n){let r=$u(t,n);if(null!==r){const s=t.remove[r];for(let t=0;t<s.length;t++){const r=s[t];if(r>0){const e=Oe(r,n);null!==e&&Xs(n[11],e)}else Ju(e,zu(e,~r),n)}}}const Xu=/\ufffd(\d+):?\d*\ufffd/gi,ec=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,tc=/\ufffd(\d+)\ufffd/,nc=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,rc=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sc=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ic=/\uE500/g;function oc(e,t,n,r,s,i,o){const a=Ni(e,r,1,null);let l=a<<Ou.SHIFT,u=Je();t===u&&(u=null),null===u&&(l|=Ou.APPEND_EAGERLY),o&&(l|=Ou.COMMENT,void 0===Is&&(Is=function(){const e=[];let t,n,r=-1;function s(e,t){r=0;const s=$u(e,t);n=null!==s?e.remove[s]:z}function i(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),s(t[1].data[~o],t),i())}return 0===e.length?null:(n=e.pop(),r=e.pop(),i())}return function(n,r){for(t=r;e.length;)e.pop();return s(n.value,r),i}}())),s.push(l,null===i?"":i);const c=Ai(e,a,o?32:1,null===i?"":i,null);Uu(n,c);const h=c.index;return Xe(c,!1),null!==u&&t!==u&&function(e,t){let n=e.insertBeforeIndex;var r;null===n?(Ws(Fu,Mu),n=e.insertBeforeIndex=[null,t]):("Expecting array here",(r=Array.isArray(n))!=!0&&w("Expecting array here",r,true,"=="),n.push(t))}(u,h),c}function ac(e,t,n,r,s,i,o){const a=o.match(Xu),l=oc(e,t,n,i,r,a?null:o,!1);a&&lc(s,o,l.index,null,0,null)}function lc(e,t,n,r,s,i){const o=e.length,a=o+1;e.push(null,null);const l=o+2,u=t.split(Xu);let c=0;for(let h=0;h<u.length;h++){const t=u[h];if(1&h){const n=s+parseInt(t,10);e.push(-1-n),c|=cc(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,i),e[o]=c,e[a]=e.length-l,c}function uc(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r&&r<0&&t++}return t}function cc(e){return 1<<Math.min(e,31)}function hc(e){let t,n,r="",s=0,i=!1;for(;null!==(t=rc.exec(e));)i?t[0]===`\ufffd/*${n}\ufffd`&&(s=t.index,i=!1):(r+=e.substring(s,t.index+t[0].length),n=t[1],i=!0);return r+=e.substr(s),r}function dc(e,t,n,r,s,i){let o=0;const a={type:s.type,currentCaseLViewIndex:Ni(e,t,1,null),anchorIdx:i,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(cc(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,s,i),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,i,a);const l=s.values;for(let u=0;u<l.length;u++){const i=l[u],c=[];for(let e=0;e<i.length;e++){const t=i[e];if("string"!=typeof t){const n=c.push(t)-1;i[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=mc(e,a,t,n,r,s.cases[u],i.join(""),c)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,i)}function pc(e){const t=[],n=[];let r=1,s=0;const i=fc(e=e.replace(nc,function(e,t,n){return r="select"===n?0:1,s=parseInt(t.substr(1),10),""}));for(let o=0;o<i.length;){let e=i[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const s=fc(i[o++]);t.length>n.length&&n.push(s)}return{type:r,mainBinding:s,cases:t,values:n}}function fc(e){if(!e)return[];let t=0;const n=[],r=[],s=/[{}]/g;let i;for(s.lastIndex=0;i=s.exec(e);){const s=i.index;if("}"==i[0]){if(n.pop(),0==n.length){const n=e.substring(t,s);nc.test(n)?r.push(pc(n)):r.push(n),t=s+1}}else{if(0==n.length){const n=e.substring(t,s);r.push(n),t=s+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function mc(e,t,n,r,s,i,o,a){const l=[],u=[],c=[];t.cases.push(i),t.create.push(l),t.remove.push(u),t.update.push(c);const h=xr(Ae()).getInertBodyElement(o),d=Jr(h)||h;return d?gc(e,t,n,r,l,u,c,d,s,a,0):0}function gc(e,t,n,r,s,i,o,a,l,u,c){let h=0,d=a.firstChild;for(;d;){const a=Ni(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const p=d,f=p.tagName.toLowerCase();if(Vr.hasOwnProperty(f)){vc(s,Ru,f,l,a),e.data[a]=f;const m=p.attributes;for(let e=0;e<m.length;e++){const t=m.item(e),n=t.name.toLowerCase();t.value.match(Xu)?Hr.hasOwnProperty(n)&&lc(o,t.value,a,t.name,0,Br[n]?Or:zr[n]?Dr:null):wc(s,a,t)}h=gc(e,t,n,r,s,i,o,d,a,u,c+1)|h,yc(i,a,c)}break;case Node.TEXT_NODE:const m=d.textContent||"",g=m.match(Xu);vc(s,null,g?"":m,l,a),yc(i,a,c),g&&(h=lc(o,m,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=tc.exec(d.textContent||"");if(y){const t=u[parseInt(y[1],10)];vc(s,Pu,"",l,a),dc(e,n,r,l,t,a),_c(i,a,c)}}d=d.nextSibling}return h}function yc(e,t,n){0===n&&e.push(t)}function _c(e,t,n){0===n&&(e.push(~t),e.push(t))}function vc(e,t,n,r,s){null!==t&&e.push(t),e.push(n,s,0|r<<17|s<<1)}function wc(e,t,n){e.push(t<<1|1,n.name,n.value)}const bc=/\[(\ufffd.+?\ufffd?)\]/,Tc=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Ic=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Ec=/{([A-Z0-9_]+)}/g,Sc=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Cc=/\/\*/,kc=/\d+\:(\d+)/;function xc(e,t,n=-1){const r=We(),s=Ze(),i=ce+e,o=qe(r.consts,t),a=Je();r.firstCreatePass&&function(e,t,n,r,s,i){const o=Je(),a=[],l=[],u=[[]],c=(h=s=function(e,t){if(function(e){return-1===e}(t))return hc(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return hc(e.substring(n,r))}}(s,i),h.replace(ic," ")).split(sc);var h;for(let d=0;d<c.length;d++){let r=c[d];if(0==(1&d)){const i=fc(r);for(let r=0;r<i.length;r++){let c=i[r];if(0==(1&r)){const t=c;""!==t&&ac(e,o,u[0],a,l,n,t)}else{const r=c;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${s}" message.`);dc(e,n,l,t,r,oc(e,o,u[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),ce+Number.parseInt(r.substring(t?2:1)));if(t)u.shift(),Xe(Je(),!1);else{const t=Hu(e,u[0],n);u.unshift([]),Xe(t,!0)}}}e.data[r]={create:a,update:l}}(r,null===a?0:a.index,s,i,o,n);const l=r.data[i],u=js(r,a===s[6]?null:a,s);!function(e,t,n,r){const s=e[11];for(let i=0;i<t.length;i++){const o=t[i++],a=t[i],l=(o&Ou.COMMENT)===Ou.COMMENT,u=(o&Ou.APPEND_EAGERLY)===Ou.APPEND_EAGERLY,c=o>>>Ou.SHIFT;let h=e[c];null===h&&(h=e[c]=l?s.createComment(a):Ns(s,a)),u&&null!==n&&qs(s,n,h,r,!1)}}(s,l.create,u,a&&8&a.type?s[a.index]:null),ut(!0)}function Ac(){ut(!1)}function Nc(e,t,n){xc(e,t,n),Ac()}function Rc(e,t){const n=We(),r=qe(n.consts,t);!function(e,t,n){const r=Qe().index,s=[];if(e.firstCreatePass&&null===e.data[t]){for(let e=0;e<n.length;e+=2){const t=n[e],i=n[e+1];if(""!==i){if(ec.test(i))throw new Error(`ICU expressions are not supported in attributes. Message: "${i}".`);lc(s,i,r,t,uc(s),null)}}e.data[t]=s}}(n,e+ce,r)}function Pc(e){return Jo(Ze(),at(),e)&&(Gu|=1<<Math.min(Zu,31)),Zu++,Pc}function Oc(e){!function(e,t,n){if(Zu>0){const r=e.data[n];Ku(e,t,Array.isArray(r)?r:r.update,it()-Zu-1,Gu)}Gu=0,Zu=0}(We(),Ze(),e+ce)}function Dc(e,t={}){return function(e,t={}){let n=e;if(bc.test(e)){const e={},t=[0];n=n.replace(Tc,(n,r,s)=>{const i=r||s,o=e[i]||[];if(o.length||(i.split("|").forEach(e=>{const t=e.match(kc),n=t?parseInt(t[1],10):0,r=Cc.test(e);o.push([n,r,e])}),e[i]=o),!o.length)throw new Error(`i18n postprocess: unmatched placeholder - ${i}`);const a=t[t.length-1];let l=0;for(let e=0;e<o.length;e++)if(o[e][0]===a){l=e;break}const[u,c,h]=o[l];return c?t.pop():a!==u&&t.push(u),o.splice(l,1),h})}return Object.keys(t).length?(n=n.replace(Ic,(e,n,r,s,i,o)=>t.hasOwnProperty(r)?`${n}${t[r]}${o}`:e),n=n.replace(Ec,(e,n)=>t.hasOwnProperty(n)?t[n]:e),n=n.replace(Sc,(e,n)=>{if(t.hasOwnProperty(n)){const r=t[n];if(!r.length)throw new Error(`i18n postprocess: unmatched ICU - ${e} with key: ${n}`);return r.shift()}return e}),n):n}(e,t)}function Lc(e,t,n,r,s){if(e=f(e),Array.isArray(e))for(let i=0;i<e.length;i++)Lc(e[i],t,n,r,s);else{const i=We(),o=Ze();let a=Po(e)?e:f(e.provide),l=Ao(e);const u=Qe(),c=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Po(e)||!e.multi){const r=new Ft(l,s,Aa),p=Uc(a,t,s?c:c+d,h);-1===p?(Jt(Wt(u,o),i,a),Fc(i,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,s&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=Uc(a,t,c+d,h),f=Uc(a,t,c,c+d),m=p>=0&&n[p],g=f>=0&&n[f];if(s&&!g||!s&&!m){Jt(Wt(u,o),i,a);const c=function(e,t,n,r,s){const i=new Ft(e,n,Aa);return i.multi=[],i.index=t,i.componentProviders=0,Mc(i,s,r&&!n),i}(s?qc:jc,n.length,s,r,l);!s&&g&&(n[f].providerFactory=c),Fc(i,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,s&&(u.providerIndexes+=1048576),n.push(c),o.push(c)}else Fc(i,e,p>-1?p:f,Mc(n[s?f:p],l,!s&&r));!s&&r&&g&&n[f].componentProviders++}}}function Fc(e,t,n,r){const s=Po(t);if(s||t.useClass){const i=(t.useClass||t).prototype.ngOnDestroy;if(i){const o=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,i]):o[e+1].push(r,i)}else o.push(n,i)}}}function Mc(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Uc(e,t,n,r){for(let s=n;s<r;s++)if(t[s]===e)return s;return-1}function jc(e,t,n,r){return Vc(this.multi,[])}function qc(e,t,n,r){const s=this.multi;let i;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=an(n,n[1],this.providerFactory.index,r);i=t.slice(0,e),Vc(s,i);for(let n=e;n<t.length;n++)i.push(t[n])}else i=[],Vc(s,i);return i}function Vc(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Bc(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=We();if(r.firstCreatePass){const s=ye(e);Lc(n,r.data,r.blueprint,s,!0),Lc(t,r.data,r.blueprint,s,!1)}}(n,r?r(e):e,t)}}class zc{}class Hc{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${c(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}let $c=(()=>{class e{}return e.NULL=new Hc,e})();function Gc(...e){}function Zc(e,t){return new Kc(De(e,t))}const Wc=function(){return Zc(Qe(),Ze())};let Kc=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=Wc,e})();function Qc(e){return e instanceof Kc?e.nativeElement:e}class Yc{}let Jc=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Xc(),e})();const Xc=function(){const e=Ze(),t=Me(Qe().index,e);return function(e){return e[11]}(de(t)?t:e)};let eh=(()=>{class e{}return e.\u0275prov=b({token:e,providedIn:"root",factory:()=>null}),e})();class th{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const nh=new th("12.0.5");class rh{constructor(){}supports(e){return Wo(e)}create(e){return new ih(e)}}const sh=(e,t)=>t;class ih{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||sh}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const i=!n||t&&t.currentIndex<uh(n,r,s)?t:n,o=uh(i,r,s),a=i.currentIndex;if(i===n)r--,n=n._nextRemoved;else if(t=t._next,null==i.previousIndex)r++;else{s||(s=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<s.length?s[n]:s[n]=0,i=r+n;t<=i&&i<e&&(s[n]=r+1)}s[i.previousIndex]=t-e}}o!==a&&e(i,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Wo(e))throw new Error(`Error trying to diff '${c(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,s=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,n,r,t)),Object.is(s.item,n)||this._addIdentityChange(s,n)):(s=this._mismatch(s,n,r,t),i=!0),s=s._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Go()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==s&&Object.is(s.trackById,r)?(i&&(s=this._verifyReinsertion(s,e,r,t)),Object.is(s.item,e)||this._addIdentityChange(s,e)):(s=this._mismatch(s,e,r,t),i=!0),s=s._next,t++}),this.length=t;return this._truncate(s),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new oh(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new lh),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class oh{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ah{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class lh{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ah,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uh(e,t,n){const r=e.previousIndex;if(null===r)return r;let s=0;return n&&r<n.length&&(s=n[r]),r+t+s}class ch{constructor(){}supports(e){return e instanceof Map||Ko(e)}create(){return new hh}}class hh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ko(e)))throw new Error(`Error trying to diff '${c(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,s=n._next;return r&&(r._next=s),s&&(s._prev=r),n._next=null,n._prev=null,n}const n=new dh(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class dh{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ph(){return new fh([new rh])}let fh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||ph()),deps:[[e,new tr,new Xn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=b({token:e,providedIn:"root",factory:ph}),e})();function mh(){return new gh([new ch])}let gh=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||mh()),deps:[[e,new tr,new Xn]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=b({token:e,providedIn:"root",factory:mh}),e})();function yh(e,t,n,r,s=!1){for(;null!==n;){const i=t[n.index];if(null!==i&&r.push(Pe(i)),pe(i))for(let e=he;e<i.length;e++){const t=i[e],n=t[1].firstChild;null!==n&&yh(t[1],t,n,r)}const o=n.type;if(8&o)yh(e,t,n.child,r);else if(32&o){const e=Es(n,t);let s;for(;s=e();)r.push(s)}else if(16&o){const e=Ys(t,n);if(Array.isArray(e))r.push(...e);else{const n=Ss(t[16]);yh(n[1],n,e,r,!0)}}n=s?n.projectionNext:n.next}return r}class _h{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return yh(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(pe(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Ls(e,n),An(t,n))}this._attachedToViewContainer=!1}Fs(this._lView[1],this._lView)}onDestroy(e){qi(this._lView[1],this._lView,null,e)}markForCheck(){oo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ao(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){rt(!0);try{ao(e,t,n)}finally{rt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,ti(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class vh extends _h{constructor(e){super(e),this._view=e}detectChanges(){lo(this._view)}checkNoChanges(){!function(e){rt(!0);try{lo(e)}finally{rt(!1)}}(this._view)}get context(){return null}}const wh=function(e){return function(e,t,n){if(me(e)&&!n){const n=Me(e.index,t);return new _h(n,n)}return 47&e.type?new _h(t[16],t):null}(Qe(),Ze(),16==(16&e))};let bh=(()=>{class e{}return e.__NG_ELEMENT_ID__=wh,e})();const Th=[new ch],Ih=new fh([new rh]),Eh=new gh(Th),Sh=function(){return Ah(Qe(),Ze())};let Ch=(()=>{class e{}return e.__NG_ELEMENT_ID__=Sh,e})();const kh=Ch,xh=class extends kh{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=ki(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ri(t,n,e),new _h(n)}};function Ah(e,t){return 4&e.type?new xh(t,e,Zc(e,t)):null}class Nh{}class Rh{}const Ph=function(){return Uh(Qe(),Ze())};let Oh=(()=>{class e{}return e.__NG_ELEMENT_ID__=Ph,e})();const Dh=Oh,Lh=class extends Dh{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Zc(this._hostTNode,this._hostLView)}get injector(){return new cn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Yt(this._hostTNode,this._hostLView);if(Bt(e)){const t=Ht(e,this._hostLView),n=zt(e);return new cn(t[1].data[n+8],t)}return new cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Fh(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-he}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,s){const i=n||this.parentInjector;if(!s&&null==e.ngModule&&i){const e=i.get(Nh,null);e&&(s=e)}const o=e.create(i,r,void 0,s);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(pe(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new Lh(t,t[6],t[3]);r.detach(r.indexOf(e))}}const s=this._adjustIndex(t),i=this._lContainer;!function(e,t,n,r){const s=he+r,i=n.length;r>0&&(n[s-1][4]=t),r<i-he?(t[4]=n[s],xn(n,he+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,i,s);const o=Js(s,i),a=n[11],l=zs(a,i[7]);return null!==l&&function(e,t,n,r,s,i){r[0]=s,r[6]=t,ti(e,r,n,1,s,i)}(r,i[6],a,n,l,o),e.attachToViewContainerRef(),xn(Mh(i),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Fh(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Ls(this._lContainer,t);n&&(An(Mh(this._lContainer),t),Fs(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Ls(this._lContainer,t);return n&&null!=An(Mh(this._lContainer),t)?new _h(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Fh(e){return e[8]}function Mh(e){return e[8]||(e[8]=[])}function Uh(e,t){let n;const r=t[e.index];if(pe(r))n=r;else{let s;if(8&e.type)s=Pe(r);else{const n=t[11];s=n.createComment("");const r=De(e,t);qs(n,zs(n,r),s,function(e,t){return Ne(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=to(r,t,s,e),io(t,n)}return new Lh(n,e,t)}const jh={};class qh extends $c{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=le(e);return new zh(t,this.ngModule)}}function Vh(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Bh=new bn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ys});class zh extends zc{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(gi).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Vh(this.componentDef.inputs)}get outputs(){return Vh(this.componentDef.outputs)}create(e,t,n,r){const s=(r=r||this.ngModule)?function(e,t){return{get:(n,r,s)=>{const i=e.get(n,jh,s);return i!==jh||r===jh?i:t.get(n,r,s)}}}(e,r.injector):e,i=s.get(Yc,Re),o=s.get(eh,null),a=i.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(Ne(e))return e.selectRootElement(t,n===F.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Os(i.createRenderer(null,this.componentDef),l,function(e){const t=e.toLowerCase();return"svg"===t?Se:"math"===t?Ce:null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:ys,clean:co,playerHandler:null,flags:0},d=ji(0,null,null,1,0,null,null,null,null,null),p=ki(null,d,h,c,null,null,i,a,o,s);let f,m;yt(p);try{const e=function(e,t,n,r,s,i){const o=n[1];n[20]=e;const a=xi(o,20,2,"#host",null),l=a.mergedAttrs=t.hostAttrs;null!==l&&(_o(a,l,!0),null!==e&&(Mt(s,e,l),null!==a.classes&&si(s,e,a.classes),null!==a.styles&&ri(s,e,a.styles)));const u=r.createRenderer(e,t),c=ki(n,Ui(t),null,t.onPush?64:16,n[20],a,r,u,null,null);return o.firstCreatePass&&(Jt(Wt(a,n),o,t.type),Gi(o,a),Wi(a,n.length,1)),io(n,c),n[20]=c}(u,this.componentDef,p,i,a);if(u)if(n)Mt(a,u,["ng-version",nh.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,s=2;for(;r<e.length;){let i=e[r];if("string"==typeof i)2===s?""!==i&&t.push(i,e[++r]):8===s&&n.push(i);else{if(!hi(s))break;s=i}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Mt(a,u,e),t&&t.length>0&&si(a,u,t.join(" "))}if(m=Le(d,ce),void 0!==t){const e=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,s){const i=n[1],o=function(e,t,n){const r=Qe();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ki(e,r,t,Ni(e,t,1,null),n));const s=an(t,e,r.directiveStart,r);us(s,t);const i=De(r,t);return i&&us(i,t),s}(i,n,t);if(r.components.push(o),e[8]=o,s&&s.forEach(e=>e(o,t)),t.contentQueries){const e=Qe();t.contentQueries(1,o,e.directiveStart)}const a=Qe();return!i.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Et(a.index),Hi(n[1],a,0,a.directiveStart,a.directiveEnd,t),$i(t,o)),o}(e,this.componentDef,p,h,[Lo]),Ri(d,p,null)}finally{Tt()}return new Hh(this.componentType,f,Zc(m,p),p,m)}}class Hh extends class{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new vh(r),this.componentType=e}get injector(){return new cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function $h(e,t,n,r){return D(()=>{const s=e;null!==t&&(s.hasOwnProperty("decorators")&&void 0!==s.decorators?s.decorators.push(...t):s.decorators=t),null!==n&&(s.ctorParameters=n),null!==r&&(s.propDecorators=s.hasOwnProperty("propDecorators")&&void 0!==s.propDecorators?Object.assign(Object.assign({},s.propDecorators),r):r)})}const Gh=new Map;class Zh extends Nh{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new qh(this);const n=ue(e),r=e[W]||null;r&&Lu(r),this._bootstrapComponents=bs(n.bootstrap),this._r3Injector=Co(e,t,[{provide:Nh,useValue:this},{provide:$c,useValue:this.componentFactoryResolver}],c(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Do.THROW_IF_NOT_FOUND,n=N.Default){return e===Do||e===Nh||e===vo?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Wh extends Rh{constructor(e){super(),this.moduleType=e,null!==ue(e)&&function(e){const t=new Set;!function e(n){const r=ue(n,!0),s=r.id;null!==s&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${c(t)} vs ${c(t.name)}`)}(s,Gh.get(s),n),Gh.set(s,n));const i=bs(r.imports);for(const o of i)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new Zh(this.moduleType,e)}}function Kh(e,t,n){const r=st()+e,s=Ze();return s[r]===yi?Qo(s,r,n?t.call(n):t()):Yo(s,r)}function Qh(e,t,n,r){return od(Ze(),st(),e,t,n,r)}function Yh(e,t,n,r,s){return ad(Ze(),st(),e,t,n,r,s)}function Jh(e,t,n,r,s,i){return ld(Ze(),st(),e,t,n,r,s,i)}function Xh(e,t,n,r,s,i,o){return ud(Ze(),st(),e,t,n,r,s,i,o)}function ed(e,t,n,r,s,i,o,a){const l=st()+e,u=Ze(),c=ta(u,l,n,r,s,i);return Jo(u,l+4,o)||c?Qo(u,l+5,a?t.call(a,n,r,s,i,o):t(n,r,s,i,o)):Yo(u,l+5)}function td(e,t,n,r,s,i,o,a,l){const u=st()+e,c=Ze(),h=ta(c,u,n,r,s,i);return Xo(c,u+4,o,a)||h?Qo(c,u+6,l?t.call(l,n,r,s,i,o,a):t(n,r,s,i,o,a)):Yo(c,u+6)}function nd(e,t,n,r,s,i,o,a,l,u){const c=st()+e,h=Ze();let d=ta(h,c,n,r,s,i);return ea(h,c+4,o,a,l)||d?Qo(h,c+7,u?t.call(u,n,r,s,i,o,a,l):t(n,r,s,i,o,a,l)):Yo(h,c+7)}function rd(e,t,n,r,s,i,o,a,l,u,c){const h=st()+e,d=Ze(),p=ta(d,h,n,r,s,i);return ta(d,h+4,o,a,l,u)||p?Qo(d,h+8,c?t.call(c,n,r,s,i,o,a,l,u):t(n,r,s,i,o,a,l,u)):Yo(d,h+8)}function sd(e,t,n,r){return cd(Ze(),st(),e,t,n,r)}function id(e,t){const n=e[t];return n===yi?void 0:n}function od(e,t,n,r,s,i){const o=t+n;return Jo(e,o,s)?Qo(e,o+1,i?r.call(i,s):r(s)):id(e,o+1)}function ad(e,t,n,r,s,i,o){const a=t+n;return Xo(e,a,s,i)?Qo(e,a+2,o?r.call(o,s,i):r(s,i)):id(e,a+2)}function ld(e,t,n,r,s,i,o,a){const l=t+n;return ea(e,l,s,i,o)?Qo(e,l+3,a?r.call(a,s,i,o):r(s,i,o)):id(e,l+3)}function ud(e,t,n,r,s,i,o,a,l){const u=t+n;return ta(e,u,s,i,o,a)?Qo(e,u+4,l?r.call(l,s,i,o,a):r(s,i,o,a)):id(e,u+4)}function cd(e,t,n,r,s,i){let o=t+n,a=!1;for(let l=0;l<s.length;l++)Jo(e,o++,s[l])&&(a=!0);return a?Qo(e,o,r.apply(i,s)):id(e,o)}function hd(e,t){const n=We();let r;const s=e+ce;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new g("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[s]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(s,r.onDestroy)):r=n.data[s];const i=r.factory||(r.factory=_e(r.type)),o=P(Aa);try{const e=Gt(!1),t=i();return Gt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Ze(),s,t),t}finally{P(o)}}function dd(e,t,n){const r=e+ce,s=Ze(),i=Fe(s,r);return _d(s,yd(s,r)?od(s,st(),t,i.transform,n,i):i.transform(n))}function pd(e,t,n,r){const s=e+ce,i=Ze(),o=Fe(i,s);return _d(i,yd(i,s)?ad(i,st(),t,o.transform,n,r,o):o.transform(n,r))}function fd(e,t,n,r,s){const i=e+ce,o=Ze(),a=Fe(o,i);return _d(o,yd(o,i)?ld(o,st(),t,a.transform,n,r,s,a):a.transform(n,r,s))}function md(e,t,n,r,s,i){const o=e+ce,a=Ze(),l=Fe(a,o);return _d(a,yd(a,o)?ud(a,st(),t,l.transform,n,r,s,i,l):l.transform(n,r,s,i))}function gd(e,t,n){const r=e+ce,s=Ze(),i=Fe(s,r);return _d(s,yd(s,r)?cd(s,st(),t,i.transform,n,i):i.transform.apply(i,n))}function yd(e,t){return e[1].data[t].pure}function _d(e,t){return Zo.isWrapped(t)&&(t=Zo.unwrap(t),e[it()]=yi),t}function vd(e){return t=>{setTimeout(e,void 0,t)}}const wd=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,i,o;let a=e,l=t||(()=>null),u=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),l=null===(i=t.error)||void 0===i?void 0:i.bind(t),u=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(l=vd(l),a&&(a=vd(a)),u&&(u=vd(u)));const c=super.subscribe({next:a,error:l,complete:u});return e instanceof s.w&&e.add(c),c}};function bd(){return this._results[Go()]()}class Td{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Go(),n=Td.prototype;n[t]||(n[t]=bd)}get changes(){return this._changes||(this._changes=new wd)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Cn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],i=t[r];if(n&&(s=n(s),i=n(i)),i!==s)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Id{constructor(e){this.queryList=e,this.matches=null}clone(){return new Id(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ed{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ed(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ud(e,t).matches&&this.queries[t].setDirty()}}class Sd{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Cd{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new Cd(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class kd{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new kd(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,xd(t,s)),this.matchTNodeWithReadOption(e,t,on(t,e,s,!1,!1))}else n===Ch?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,on(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Kc||r===Oh||r===Ch&&4&t.type)this.addMatch(t.index,-2);else{const n=on(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function xd(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Ad(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Zc(e,t):4&e.type?Ah(e,t):null}(t,e):-2===n?function(e,t,n){return n===Kc?Zc(t,e):n===Ch?Ah(t,e):n===Oh?Uh(t,e):void 0}(e,t,r):an(e,e[1],n,t)}function Nd(e,t,n,r){const s=t[19].queries[r];if(null===s.matches){const r=e.data,i=n.matches,o=[];for(let e=0;e<i.length;e+=2){const s=i[e];o.push(s<0?null:Ad(t,r[s],i[e+1],n.metadata.read))}s.matches=o}return s.matches}function Rd(e,t,n,r){const s=e.queries.getByIndex(n),i=s.matches;if(null!==i){const o=Nd(e,t,s,n);for(let e=0;e<i.length;e+=2){const n=i[e];if(n>0)r.push(o[e/2]);else{const s=i[e+1],o=t[-n];for(let e=he;e<o.length;e++){const t=o[e];t[17]===t[3]&&Rd(t[1],t,s,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Rd(n[1],n,s,r)}}}}}return r}function Pd(e){const t=Ze(),n=We(),r=pt();ft(r+1);const s=Ud(n,r);if(e.dirty&&Ue(t)===(2==(2&s.metadata.flags))){if(null===s.matches)e.reset([]);else{const i=s.crossesNgTemplate?Rd(n,t,r,[]):Nd(n,t,s,r);e.reset(i,Qc),e.notifyOnChanges()}return!0}return!1}function Od(e,t,n){const r=We();r.firstCreatePass&&(Md(r,new Sd(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Fd(r,Ze(),t)}function Dd(e,t,n,r){const s=We();if(s.firstCreatePass){const i=Qe();Md(s,new Sd(t,n,r),i.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(s,e),2==(2&n)&&(s.staticContentQueries=!0)}Fd(s,Ze(),n)}function Ld(){return e=Ze(),t=pt(),e[19].queries[t].queryList;var e,t}function Fd(e,t,n){const r=new Td(4==(4&n));qi(e,t,r,r.destroy),null===t[19]&&(t[19]=new Ed),t[19].queries.push(new Id(r))}function Md(e,t,n){null===e.queries&&(e.queries=new Cd),e.queries.track(new kd(t,n))}function Ud(e,t){return e.queries.getByIndex(t)}function jd(e,t){return Ah(e,t)}const qd=(()=>({"\u0275\u0275attribute":na,"\u0275\u0275attributeInterpolate1":da,"\u0275\u0275attributeInterpolate2":pa,"\u0275\u0275attributeInterpolate3":fa,"\u0275\u0275attributeInterpolate4":ma,"\u0275\u0275attributeInterpolate5":ga,"\u0275\u0275attributeInterpolate6":ya,"\u0275\u0275attributeInterpolate7":_a,"\u0275\u0275attributeInterpolate8":va,"\u0275\u0275attributeInterpolateV":wa,"\u0275\u0275defineComponent":J,"\u0275\u0275defineDirective":oe,"\u0275\u0275defineInjectable":b,"\u0275\u0275defineInjector":T,"\u0275\u0275defineNgModule":re,"\u0275\u0275definePipe":ae,"\u0275\u0275directiveInject":Aa,"\u0275\u0275getInheritedFactory":hn,"\u0275\u0275inject":Wn,"\u0275\u0275injectAttribute":pn,"\u0275\u0275invalidFactory":Na,"\u0275\u0275invalidFactoryDep":Kn,"\u0275\u0275templateRefExtractor":jd,"\u0275\u0275NgOnChangesFeature":we,"\u0275\u0275ProvidersFeature":Bc,"\u0275\u0275CopyDefinitionFeature":Ho,"\u0275\u0275InheritDefinitionFeature":Mo,"\u0275\u0275nextContext":Wa,"\u0275\u0275namespaceHTML":xt,"\u0275\u0275namespaceMathML":kt,"\u0275\u0275namespaceSVG":Ct,"\u0275\u0275enableBindings":$e,"\u0275\u0275disableBindings":Ge,"\u0275\u0275elementStart":Oa,"\u0275\u0275elementEnd":Da,"\u0275\u0275element":La,"\u0275\u0275elementContainerStart":Fa,"\u0275\u0275elementContainerEnd":Ma,"\u0275\u0275elementContainer":Ua,"\u0275\u0275pureFunction0":Kh,"\u0275\u0275pureFunction1":Qh,"\u0275\u0275pureFunction2":Yh,"\u0275\u0275pureFunction3":Jh,"\u0275\u0275pureFunction4":Xh,"\u0275\u0275pureFunction5":ed,"\u0275\u0275pureFunction6":td,"\u0275\u0275pureFunction7":nd,"\u0275\u0275pureFunction8":rd,"\u0275\u0275pureFunctionV":sd,"\u0275\u0275getCurrentView":ja,"\u0275\u0275restoreView":Ke,"\u0275\u0275listener":za,"\u0275\u0275projection":Ya,"\u0275\u0275syntheticHostProperty":bu,"\u0275\u0275syntheticHostListener":Ha,"\u0275\u0275pipeBind1":dd,"\u0275\u0275pipeBind2":pd,"\u0275\u0275pipeBind3":fd,"\u0275\u0275pipeBind4":md,"\u0275\u0275pipeBindV":gd,"\u0275\u0275projectionDef":Qa,"\u0275\u0275hostProperty":wu,"\u0275\u0275property":Ra,"\u0275\u0275propertyInterpolate":Ja,"\u0275\u0275propertyInterpolate1":Xa,"\u0275\u0275propertyInterpolate2":el,"\u0275\u0275propertyInterpolate3":tl,"\u0275\u0275propertyInterpolate4":nl,"\u0275\u0275propertyInterpolate5":rl,"\u0275\u0275propertyInterpolate6":sl,"\u0275\u0275propertyInterpolate7":il,"\u0275\u0275propertyInterpolate8":ol,"\u0275\u0275propertyInterpolateV":al,"\u0275\u0275pipe":hd,"\u0275\u0275queryRefresh":Pd,"\u0275\u0275viewQuery":Od,"\u0275\u0275loadQuery":Ld,"\u0275\u0275contentQuery":Dd,"\u0275\u0275reference":Ta,"\u0275\u0275classMap":Il,"\u0275\u0275classMapInterpolate1":Zl,"\u0275\u0275classMapInterpolate2":Wl,"\u0275\u0275classMapInterpolate3":Kl,"\u0275\u0275classMapInterpolate4":Ql,"\u0275\u0275classMapInterpolate5":Yl,"\u0275\u0275classMapInterpolate6":Jl,"\u0275\u0275classMapInterpolate7":Xl,"\u0275\u0275classMapInterpolate8":eu,"\u0275\u0275classMapInterpolateV":tu,"\u0275\u0275styleMap":bl,"\u0275\u0275styleMapInterpolate1":nu,"\u0275\u0275styleMapInterpolate2":ru,"\u0275\u0275styleMapInterpolate3":su,"\u0275\u0275styleMapInterpolate4":iu,"\u0275\u0275styleMapInterpolate5":ou,"\u0275\u0275styleMapInterpolate6":au,"\u0275\u0275styleMapInterpolate7":lu,"\u0275\u0275styleMapInterpolate8":uu,"\u0275\u0275styleMapInterpolateV":cu,"\u0275\u0275styleProp":vl,"\u0275\u0275stylePropInterpolate1":hu,"\u0275\u0275stylePropInterpolate2":du,"\u0275\u0275stylePropInterpolate3":pu,"\u0275\u0275stylePropInterpolate4":fu,"\u0275\u0275stylePropInterpolate5":mu,"\u0275\u0275stylePropInterpolate6":gu,"\u0275\u0275stylePropInterpolate7":yu,"\u0275\u0275stylePropInterpolate8":_u,"\u0275\u0275stylePropInterpolateV":vu,"\u0275\u0275classProp":wl,"\u0275\u0275advance":_i,"\u0275\u0275template":ba,"\u0275\u0275text":Fl,"\u0275\u0275textInterpolate":Ml,"\u0275\u0275textInterpolate1":Ul,"\u0275\u0275textInterpolate2":jl,"\u0275\u0275textInterpolate3":ql,"\u0275\u0275textInterpolate4":Vl,"\u0275\u0275textInterpolate5":Bl,"\u0275\u0275textInterpolate6":zl,"\u0275\u0275textInterpolate7":Hl,"\u0275\u0275textInterpolate8":$l,"\u0275\u0275textInterpolateV":Gl,"\u0275\u0275i18n":Nc,"\u0275\u0275i18nAttributes":Rc,"\u0275\u0275i18nExp":Pc,"\u0275\u0275i18nStart":xc,"\u0275\u0275i18nEnd":Ac,"\u0275\u0275i18nApply":Oc,"\u0275\u0275i18nPostprocess":Dc,"\u0275\u0275resolveWindow":_s,"\u0275\u0275resolveDocument":vs,"\u0275\u0275resolveBody":ws,"\u0275\u0275setComponentScope":X,"\u0275\u0275setNgModuleScope":se,"\u0275\u0275sanitizeHtml":es,"\u0275\u0275sanitizeStyle":ts,"\u0275\u0275sanitizeResourceUrl":rs,"\u0275\u0275sanitizeScript":ss,"\u0275\u0275sanitizeUrl":ns,"\u0275\u0275sanitizeUrlOrResourceUrl":as,"\u0275\u0275trustConstantHtml":is,"\u0275\u0275trustConstantResourceUrl":os,forwardRef:p,resolveForwardRef:f}))(),Vd=[];function Bd(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}function zd(e,t){return{type:e,name:e.name,pipeName:t.name,pure:void 0===t.pure||t.pure}}const Hd=yn("Pipe",e=>Object.assign({pure:!0},e),void 0,void 0,(e,t)=>$d(e,t)),$d=function(e,t){let n=null,r=null;Object.defineProperty(e,K,{get:()=>{if(null===r){const n=zd(e,t),s=In();r=s.compileFactory(qd,`ng:///${n.name}/\u0275fac.js`,{name:n.name,type:n.type,typeArgumentCount:0,deps:or(e),target:s.FactoryTarget.Pipe})}return r},configurable:!1}),Object.defineProperty(e,G,{get:()=>{if(null===n){const r=zd(e,t);n=In().compilePipe(qd,`ng:///${r.name}/\u0275pipe.js`,r)}return n},configurable:!1})},Gd=yn("NgModule",e=>e,void 0,void 0,(e,t)=>Zd(e,t)),Zd=function(e,t={}){!function(e,t,n=!1){const r=Cn(t.declarations||z);let s=null;Object.defineProperty(e,Z,{configurable:!0,get:()=>(null===s&&(s=In().compileNgModule(qd,`ng:///${e.name}/\u0275mod.js`,{type:e,bootstrap:Cn(t.bootstrap||z).map(f),declarations:r.map(f),imports:Cn(t.imports||z).map(f).map(Bd),exports:Cn(t.exports||z).map(f).map(Bd),schemas:t.schemas?Cn(t.schemas):null,id:t.id||null}),s.schemas||(s.schemas=[])),s)});let i=null;Object.defineProperty(e,K,{get:()=>{if(null===i){const t=In();i=t.compileFactory(qd,`ng:///${e.name}/\u0275fac.js`,{name:e.name,type:e,deps:or(e),target:t.FactoryTarget.NgModule,typeArgumentCount:0})}return i},configurable:!1});let o=null;Object.defineProperty(e,k,{get:()=>{if(null===o){const n={name:e.name,type:e,providers:t.providers||z,imports:[(t.imports||z).map(f),(t.exports||z).map(f)]};o=In().compileInjector(qd,`ng:///${e.name}/\u0275inj.js`,n)}return o},configurable:!1})}(e,t),function(e,t){Vd.push({moduleType:e,ngModule:t})}(e,t)},Wd=new bn("Application Initializer");let Kd=(()=>{class e{constructor(e){this.appInits=e,this.resolve=Gc,this.reject=Gc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(qa(t))e.push(t);else if(Ba(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Wn(Wd,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Qd=new bn("AppId"),Yd={provide:Qd,useFactory:function(){return`${Jd()}${Jd()}${Jd()}`},deps:[]};function Jd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xd=new bn("Platform Initializer"),ep=new bn("Platform ID"),tp=new bn("appBootstrapListener");let np=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const rp=new bn("LocaleId"),sp=new bn("DefaultCurrencyCode");class ip{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const op=function(e){return new Wh(e)},ap=op,lp=function(e){return Promise.resolve(op(e))},up=function(e){const t=op(e),n=bs(ue(e).declarations).reduce((e,t)=>{const n=le(t);return n&&e.push(new zh(n)),e},[]);return new ip(t,n)},cp=up,hp=function(e){return Promise.resolve(up(e))};let dp=(()=>{class e{constructor(){this.compileModuleSync=ap,this.compileModuleAsync=lp,this.compileModuleAndAllComponentsSync=cp,this.compileModuleAndAllComponentsAsync=hp}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const pp=(()=>Promise.resolve(0))();function fp(e){"undefined"==typeof Zone?pp.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class mp{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new wd(!1),this.onMicrotaskEmpty=new wd(!1),this.onStable=new wd(!1),this.onError=new wd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=V.requestAnimationFrame,t=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(V,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,_p(e),e.isCheckStableRunning=!0,yp(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),_p(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,s,i,o,a)=>{try{return vp(e),n.invokeTask(s,i,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||e.shouldCoalesceRunChangeDetection)&&t(),wp(e)}},onInvoke:(n,r,s,i,o,a,l)=>{try{return vp(e),n.invoke(s,i,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),wp(e)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,_p(e),yp(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mp.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mp.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,i=s.scheduleEventTask("NgZoneEvent: "+r,e,gp,Gc,Gc);try{return s.runTask(i,t,n)}finally{s.cancelTask(i)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const gp={};function yp(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _p(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function vp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function wp(e){e._nesting--,yp(e)}class bp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new wd,this.onMicrotaskEmpty=new wd,this.onStable=new wd,this.onError=new wd}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let Tp=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mp.assertNotInAngularZone(),fp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Wn(mp))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})(),Ip=(()=>{class e{constructor(){this._applications=new Map,kp.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return kp.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();class Ep{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Sp(e){kp=e}let Cp,kp=new Ep,xp=!0,Ap=!1;function Np(){return Ap=!0,xp}function Rp(){if(Ap)throw new Error("Cannot enable prod mode after platform setup.");xp=!1}const Pp=new bn("AllowMultipleToken");class Op{constructor(e,t){this.name=e,this.token=t}}function Dp(e,t,n=[]){const r=`Platform: ${t}`,s=new bn(r);return(t=[])=>{let i=Lp();if(!i||i.injector.get(Pp,!1))if(e)e(n.concat(t).concat({provide:s,useValue:!0}));else{const e=n.concat(t).concat({provide:s,useValue:!0},{provide:bo,useValue:"platform"});!function(e){if(Cp&&!Cp.destroyed&&!Cp.injector.get(Pp,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Cp=e.get(Fp);const t=e.get(Xd,null);t&&t.forEach(e=>e())}(Do.create({providers:e,name:r}))}return function(e){const t=Lp();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(s)}}function Lp(){return Cp&&!Cp.destroyed?Cp:null}let Fp=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new bp:("zone.js"===e?void 0:e)||new mp({enableLongStackTrace:Np(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:mp,useValue:n}];return n.run(()=>{const t=Do.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(t),i=s.injector.get(fs,null);if(!i)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{i.handleError(e)}});s.onDestroy(()=>{jp(this._modules,s),e.unsubscribe()})}),function(e,t,n){try{const r=n();return qa(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(i,n,()=>{const e=s.injector.get(Kd);return e.runInitializers(),e.donePromise.then(()=>(Lu(s.injector.get(rp,Nu)||Nu),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=Mp({},t);return function(e,t,n){const r=new Wh(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Up);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${c(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Wn(Do))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Mp(e,t){return Array.isArray(t)?t.reduce(Mp,e):Object.assign(Object.assign({},e),t)}let Up=(()=>{class e{constructor(e,t,n,r,s){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new i.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new i.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{mp.assertNotInAngularZone(),fp(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{mp.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,u.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof zc?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Nh),s=n.create(Do.NULL,[],t||n.selector,r),i=s.location.nativeElement,o=s.injector.get(Tp,null),a=o&&s.injector.get(Ip);return o&&a&&a.registerApplication(i,o),s.onDestroy(()=>{this.detachView(s.hostView),jp(this.components,s),a&&a.unregisterApplication(i)}),this._loadComponent(s),s}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;jp(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(tp,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Wn(mp),Wn(Do),Wn(fs),Wn($c),Wn(Kd))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function jp(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class qp{}class Vp{}const Bp={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let zp=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Bp}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>Hp(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),s="NgFactory";return void 0===r&&(r="default",s=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+s]).then(e=>Hp(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Wn(dp),Wn(Vp,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Hp(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const $p=function(e){return null},Gp=Dp(null,"core",[{provide:ep,useValue:"unknown"},{provide:Fp,deps:[Do]},{provide:Ip,deps:[]},{provide:np,deps:[]}]),Zp=[{provide:Up,useClass:Up,deps:[mp,Do,fs,$c,Kd]},{provide:Bh,deps:[mp],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Kd,useClass:Kd,deps:[[new Xn,Wd]]},{provide:dp,useClass:dp,deps:[]},Yd,{provide:fh,useFactory:function(){return Ih},deps:[]},{provide:gh,useFactory:function(){return Eh},deps:[]},{provide:rp,useFactory:function(e){return Lu(e=e||"undefined"!=typeof $localize&&$localize.locale||Nu),e},deps:[[new Jn(rp),new Xn,new tr]]},{provide:sp,useValue:"USD"}];let Wp=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Wn(Up))},e.\u0275mod=re({type:e}),e.\u0275inj=T({providers:Zp}),e})()},9748:(e,t,n)=>{"use strict";n.d(t,{hO:()=>m,xv:()=>h,Dh:()=>c,GT:()=>l,on:()=>d,pX:()=>a});var r=n(5366),s=n(9001),i=n(5271);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(s,i)=>n.runOutsideAngular(()=>{var s;if(e[i])return(null===(s=null==r?void 0:r.spy)||void 0===s?void 0:s.get)&&r.spy.get(i,e[i]),e[i];if(o.indexOf(i)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[i];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const s=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(i,n,s),s})})})}),l=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class u{constructor(e){return e}}const c=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=s.Z.apps.filter(e=>e&&e.name===i.name)[0]||n.runOutsideAngular(()=>s.Z.initializeApp(t,i));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new u(o)}const p=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:u,useFactory:d,deps:[c,r.R0b,[new r.FiY,h]]};let m=(()=>{class e{constructor(e){s.Z.registerVersion("angularfire",i.q4.full,"core"),s.Z.registerVersion("angularfire",i.q4.full,"app-compat"),s.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:c,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[f]}),e})()},5271:(e,t,n)=>{"use strict";n.d(t,{q4:()=>u,iC:()=>v,fc:()=>_,HU:()=>g,cc:()=>d});var r=n(5366);(0,n(7092).registerVersion)("firebase","9.1.1","app");var s=n(8489),i=n(8569),o=n(6599),a=n(9098),l=n(4187);e=n.hmd(e);const u=new r.GfV("7.0.4"),c=!!e.hot,h=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};function d(e,t,n,r,s){const[,i,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(i)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(s,o)||(h("error",`${t} was already initialized on the ${n} Firebase App with different settings.${c?" You may need to reload as Firebase is not HMR aware.":""}`),h("warn",{is:s,was:o})),i;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,s]),t}}function p(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class f{constructor(e,t=s.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class m{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p,{},p,p)),t.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let g=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new f(Zone.current)),this.insideAngular=e.run(()=>new f(Zone.current,i.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function y(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("AngularFireModule has not been provided");return e}function _(e){return e.pipe((0,a.QV)(y().outsideAngular))}function v(e){return y(),(t=y(),function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,l.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))})(e);var t}},1932:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(5725),s=n(5119),i=n(7092),o=n(2134);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,i._addComponent)(e,new s.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,i.deleteApp)(this._delegate)))}_getService(e,t=i._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=i._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,i._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,i._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const l=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),u=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(s,o={}){const a=i.initializeApp(s,o);if((0,r.r3)(t,a.name))return t[a.name];const l=new e(a,n);return t[a.name]=l,l},app:s,registerVersion:i.registerVersion,setLogLevel:i.setLogLevel,onLog:i.onLog,apps:null,SDK_VERSION:i.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(i._registerComponent(t)&&"PUBLIC"===t.type){const i=(e=s())=>{if("function"!=typeof e[a])throw l.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(i,t.serviceProps),n[a]=i,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:i}};function s(e){if(!(0,r.r3)(t,e=e||i._DEFAULT_ENTRY_NAME))throw l.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),s.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),c=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){c.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&c.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=u;(0,i.registerVersion)("@firebase/app-compat","0.1.3",void 0)},7092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>T,_DEFAULT_ENTRY_NAME:()=>c,_addComponent:()=>f,_addOrOverwriteComponent:()=>m,_apps:()=>d,_clearComponents:()=>v,_components:()=>p,_getProvider:()=>y,_registerComponent:()=>g,_removeServiceInstance:()=>_,deleteApp:()=>C,getApp:()=>E,getApps:()=>S,initializeApp:()=>I,onLog:()=>A,registerVersion:()=>x,setLogLevel:()=>N});var r=n(6304),s=n(5119),i=n(2134),o=n(5725);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",u=new i.Yd("@firebase/app"),c="[DEFAULT]",h={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){u.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function g(e){const t=e.name;if(p.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of d.values())f(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function _(e,t,n=c){y(e,t).clearInstance(n)}function v(){p.clear()}const w=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const T="9.1.1";function I(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:c,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw w.create("bad-app-name",{appName:String(r)});const i=d.get(r);if(i){if((0,o.vZ)(e,i.options)&&(0,o.vZ)(n,i.config))return i;throw w.create("duplicate-app",{appName:r})}const a=new s.H0(r);for(const s of p.values())a.addComponent(s);const l=new b(e,n,a);return d.set(r,l),l}function E(e=c){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function S(){return Array.from(d.values())}function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e){const t=e.name;d.has(t)&&(d.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function x(e,t,n){var r;let i=null!==(r=h[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}g(new s.wA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}function A(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,i.Am)(e,t)}function N(e){(0,i.Ub)(e)}g(new s.wA("platform-logger",e=>new a(e),"PRIVATE")),x(l,"0.7.2",void 0),x("fire-js","")},5119:(e,t,n)=>{"use strict";n.d(t,{wA:()=>i,H0:()=>l,zt:()=>a});var r=n(4762),s=n(5725),i=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),o="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new s.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:o})}catch(h){}try{for(var s=(0,r.XA)(this.instancesDeferred.entries()),i=s.next();!i.done;i=s.next()){var a=(0,r.CR)(i.value,2),l=a[1],u=this.normalizeInstanceIdentifier(a[0]);try{var c=this.getOrInitializeService({instanceIdentifier:u});l.resolve(c)}catch(h){}}}catch(d){t={error:d}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=o),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var e;return(0,r.Jh)(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(e.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),(0,r.CR)(e.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return t.sent(),[2]}})})},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=o),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=o),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var s=e.options,i=void 0===s?{}:s,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var l=(0,r.XA)(this.instancesDeferred.entries()),u=l.next();!u.done;u=l.next()){var c=(0,r.CR)(u.value,2),h=c[1];o===this.normalizeInstanceIdentifier(c[0])&&h.resolve(a)}}catch(d){t={error:d}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);var i=this.instances.get(r);return i&&e(i,r),function(){s.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,s,i=this.onInitCallbacks.get(t);if(i)try{for(var o=(0,r.XA)(i),a=o.next();!a.done;a=o.next()){var l=a.value;try{l(e,t)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,s=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===o?void 0:t),options:s}),this.instances.set(n,i),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(a){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=o),this.component?this.component.multipleInstances?e:o:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}(),l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},2134:(e,t,n)=>{"use strict";n.d(t,{in:()=>s,Yd:()=>u,Ub:()=>c,Am:()=>h});const r=[];var s=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}({});const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),s=a[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...e),this._logHandler(this,s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...e),this._logHandler(this,s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,s.INFO,...e),this._logHandler(this,s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,s.WARN,...e),this._logHandler(this,s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...e),this._logHandler(this,s.ERROR,...e)}}function c(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=i[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const o=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:s[n].toLowerCase(),message:o,args:i,type:t.name})}}}},5725:(e,t,n)=>{"use strict";n.d(t,{BH:()=>d,LL:()=>k,ZR:()=>C,gQ:()=>z,hu:()=>r,g5:()=>s,US:()=>o,tV:()=>u,h$:()=>a,r3:()=>D,Sg:()=>p,ne:()=>H,p$:()=>c,vZ:()=>U,ZB:()=>h,gK:()=>W,pd:()=>B,m9:()=>X,z$:()=>f,GJ:()=>O,jU:()=>y,ru:()=>_,d:()=>w,xb:()=>F,w1:()=>b,hl:()=>S,uI:()=>m,UG:()=>g,Yr:()=>I,b$:()=>v,G6:()=>E,Mn:()=>T,w9:()=>P,cI:()=>A,UI:()=>M,xO:()=>q,zd:()=>V,DV:()=>L,ug:()=>J,dS:()=>Y,Pz:()=>N,Dv:()=>Z,Wj:()=>K,lb:()=>Q});const r=function(e,t){if(!e)throw s(t)},s=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0;let u=(15&o)<<2|l>>6,c=63&l;a||(c=64,i||(u=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[u],n[c])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==o||null==a)throw Error();r.push(t<<2|i>>4),64!==o&&(r.push(i<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=i(e);return o.encodeByteArray(t,!0)},l=function(e){return a(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(i)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function _(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return f().indexOf("Electron/")>=0}function b(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return f().indexOf("MSAppHost/")>=0}function I(){return!1}function E(){return!g()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"object"==typeof indexedDB}class C extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],i=s?function(e,t){return e.replace(x,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(s,n):"Error";return new C(r,`${this.serviceName}: ${i} (${r}).`,n)}}const x=/\{\$([^}]+)}/g;function A(e){return JSON.parse(e)}function N(e){return JSON.stringify(e)}const R=function(e){let t={},n={},r={},s="";try{const i=e.split(".");t=A(u(i[0])||""),n=A(u(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch(i){}return{header:t,claims:n,data:r,signature:s}},P=function(e){const t=R(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},O=function(e){const t=R(e).claims;return"object"==typeof t&&!0===t.admin};function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function L(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function F(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M(e,t,n){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}function U(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(j(n)&&j(i)){if(!U(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function j(e){return null!==e&&"object"==typeof e}function q(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function V(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function B(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class z{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let c=0;c<16;c++)n[c]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let c=0;c<16;c++)n[c]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let c=16;c<80;c++){const e=n[c-3]^n[c-8]^n[c-14]^n[c-16];n[c]=4294967295&(e<<1|e>>>31)}let r,s,i=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4];for(let c=0;c<80;c++){c<40?c<20?(r=l^o&(a^l),s=1518500249):(r=o^a^l,s=1859775393):c<60?(r=o&a|l&(o|a),s=2400959708):(r=o^a^l,s=3395469782);const e=(i<<5|i>>>27)+r+u+s+n[c]&4294967295;u=l,l=a,a=4294967295&(o<<30|o>>>2),o=i,i=e}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const s=this.buf_;let i=this.inbuf_;for(;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(s[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<t;)if(s[i]=e[r],++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function H(e,t){const n=new $(e,t);return n.subscribe.bind(n)}class ${constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function G(){}const Z=function(e,t,n,r){let s;if(r<t?s="at least "+t:r>n&&(s=0===n?"none":"no more than "+n),s)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+s+".")};function W(e,t){return`${e} failed: ${t} argument `}function K(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(e,t)+"must be a valid function.")}function Q(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(e,t)+"must be a valid context object.")}const Y=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);if(i>=55296&&i<=56319){const t=i-55296;s++,r(s<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(s)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},J=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function X(e){return e&&e._delegate?e._delegate:e}},9001:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(1932);r.Z.registerVersion("firebase","9.1.1","app-compat")},3678:(e,t,n)=>{"use strict";n.r(t);var r=n(6304),s=n(1932),i=n(5725),o=n(7092),a=n(4762),l=n(2134),u=n(5119);const c=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new l.Yd("@firebase/auth");function p(e,...t){d.logLevel<=l.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${e}`,...t)}function f(e,...t){throw _(e,...t)}function m(e,...t){return _(e,...t)}function g(e,t,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&f(e,"argument-error"),g(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function v(e,t,...n){if(!e)throw _(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function b(e,t){e||w(t)}const T=new Map;function I(e){b(e instanceof Function,"Expected a class definition");let t=T.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T.set(e,t),t)}function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function S(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(S()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class A{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},R=new k(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function O(e,t,n,r){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(e,t,n,r,s={}){return L(e,s,()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),l=new(A.headers());return l.set("Content-Type","application/json"),l.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&l.set("X-Firebase-Locale",e.languageCode),A.fetch()(j(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})})).apply(this,arguments)}function L(e,t,n){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},N),t);try{const t=new q(e),s=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=yield s.json();if("needConfirmation"in i)throw V(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw V(e,"email-already-in-use",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw g(e,a,o);f(e,a)}}catch(s){if(s instanceof i.ZR)throw s;f(e,"network-request-failed")}})).apply(this,arguments)}function M(e,t,n,r){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n,r,s={}){const i=yield O(e,t,n,r,s);return"mfaPendingCredential"in i&&f(e,"multi-factor-auth-required",{serverResponse:i}),i})).apply(this,arguments)}function j(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?x(e.config,s):`${e.config.apiScheme}://${s}`}class q{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(m(this.auth,"timeout")),R.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=m(e,t,r);return s.customData._tokenResponse=n,s}function B(){return(B=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function z(e,t){return H.apply(this,arguments)}function H(){return(H=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function $(e,t){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function W(){return(W=(0,r.Z)(function*(e,t=!1){const n=(0,i.m9)(e),r=yield n.getIdToken(t),s=Q(r);v(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Z(K(s.auth_time)),issuedAtTime:Z(K(s.iat)),expirationTime:Z(K(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function K(e){return 1e3*Number(e)}function Q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(s){return p("Caught error parsing JWT payload as JSON",s),null}}function Y(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof i.ZR&&X(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class te{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Z(this.lastLoginAt),this.creationTime=Z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ne(e){return re.apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),s=yield Y(e,$(n,{idToken:r}));v(null==s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?oe(i.providerUserInfo):[],a=ie(e.providerData,o),l=!!e.isAnonymous&&!(e.email&&i.passwordHash||(null==a?void 0:a.length)),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new te(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(e,u)})).apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){const t=(0,i.m9)(e);yield ne(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function ie(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function oe(e){return e.map(e=>{var{providerId:t}=e,n=(0,a._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ae(){return(ae=(0,r.Z)(function*(e,t){const n=yield L(e,{},()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=j(e,r,"/v1/token",`key=${s}`);return A.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(void 0!==e.idToken,"internal-error"),v(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Q(e);return v(t,"internal-error"),v(void 0!==t.exp,"internal-error"),v(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return v(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:s,expiresIn:i}=yield function(e,t){return ae.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,s,Number(i))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new le;return n&&(v("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(v("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(v("number"==typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return w("not implemented")}}function ue(e,t){v("string"==typeof e||void 0===e,"internal-error",{appName:t})}class ce{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=(0,a._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.metadata=new te(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield Y(t,t.stsTokenManager.getToken(t.auth,e));return v(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return W.apply(this,arguments)}(this,e)}reload(){return function(e){return se.apply(this,arguments)}(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ce(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ne(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield Y(e,function(e,t){return B.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:_,emailVerified:w,isAnonymous:b,providerData:T,stsTokenManager:I}=t;v(_&&I,e,"internal-error");const E=le.fromJSON(this.name,I);v("string"==typeof _,e,"internal-error"),ue(c,e.name),ue(h,e.name),v("boolean"==typeof w,e,"internal-error"),v("boolean"==typeof b,e,"internal-error"),ue(d,e.name),ue(p,e.name),ue(f,e.name),ue(m,e.name),ue(g,e.name),ue(y,e.name);const S=new ce({uid:_,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:E,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(S.providerData=T.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new le;r.updateFromServerResponse(t);const s=new ce({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ne(s),s})()}}const he=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function de(e,t,n){return`firebase:${e}:${t}:${n}`}class pe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=de(this.userKey,r.apiKey,s),this.fullPersistenceKey=de("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ce._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new pe(I(he),e,n);const s=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let i=s[0]||I(he);const o=de(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=ce._fromJSON(e,t);n!==i&&(a=r),i=n;break}}catch(u){}const l=s.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&l.length?(i=l[0],a&&(yield i._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==i)try{yield e._remove(o)}catch(u){}});return function(t){return e.apply(this,arguments)}}())),new pe(i,e,n)):new pe(i,e,n)})()}}function fe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(me(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(we(t))return"Blackberry";if(be(t))return"Webos";if(ge(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(ve(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function me(e=(0,i.z$)()){return/firefox\//i.test(e)}function ge(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,i.z$)()){return/crios\//i.test(e)}function _e(e=(0,i.z$)()){return/iemobile/i.test(e)}function ve(e=(0,i.z$)()){return/android/i.test(e)}function we(e=(0,i.z$)()){return/blackberry/i.test(e)}function be(e=(0,i.z$)()){return/webos/i.test(e)}function Te(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ie(e=(0,i.z$)()){return Te(e)||ve(e)||be(e)||we(e)||/windows phone/i.test(e)||_e(e)}function Ee(e,t=[]){let n;switch(e){case"Browser":n=fe((0,i.z$)());break;case"Worker":n=`${fe((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class Se{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ke(this),this.idTokenSubscription=new ke(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=I(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r;n._deleted||(n.persistenceManager=yield pe.create(n,e),n._deleted||((null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)&&(yield n._popupRedirectResolver._initialize(n)),yield n.initializeCurrentUser(t),n._deleted||(n._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();return e.currentUser||t?e.currentUser&&t&&e.currentUser.uid===t.uid?(e._currentUser._assign(t),void(yield e.currentUser.getIdToken())):void(yield e._updateCurrentUser(t)):void 0})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const s=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,i=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);s&&s!==i||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(v(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ne(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,i.m9)(e):null;return n&&v(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&v(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(I(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&I(e)||t._popupRedirectResolver;v(n,t,"argument-error"),t.redirectPersistenceManager=yield pe.create(t,[I(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,s;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(s=t.redirectUser)||void 0===s?void 0:s._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return v(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ee(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Ce(e){return(0,i.m9)(e)}class ke{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ae(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ne{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}function Re(e,t){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:resetPassword",P(e,t))})).apply(this,arguments)}function Oe(e,t){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Le(e,t){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",P(e,t))})).apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPassword",P(e,t))})).apply(this,arguments)}function Ue(e,t){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendOobCode",P(e,t))})).apply(this,arguments)}function qe(e,t){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Be(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function He(e,t){return $e.apply(this,arguments)}function $e(){return($e=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function Ge(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)(function*(e,t){return Ue(e,t)})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))})).apply(this,arguments)}class Qe extends Ne{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Qe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return Me.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return We.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:f(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Oe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Ke.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:f(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function Ye(e,t){return Je.apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithIdp",P(e,t))})).apply(this,arguments)}class Xe extends Ne{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,a._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Xe(n,r);return Object.assign(i,s),i}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))})).apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))})).apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(e,t){const n=yield M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw V(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const st={USER_NOT_FOUND:"user-not-found"};function it(){return(it=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),st)})).apply(this,arguments)}class ot extends Ne{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ot({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ot({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return nt.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return rt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return it.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new ot({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class at{constructor(e){var t,n,r,s,o,a;const l=(0,i.zd)((0,i.pd)(e)),u=null!==(t=l.apiKey)&&void 0!==t?t:null,c=null!==(n=l.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);v(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=null!==(s=l.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=l.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new at(t)}catch(n){return null}}}let lt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return Qe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=at.parseLink(t);return v(n,"argument-error"),Qe._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ut{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ct extends ut{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ht extends ct{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return v("providerId"in t&&"signInMethod"in t,"argument-error"),Xe._fromParams(t)}credential(e){return this._credential(e)}_credential(e){return v(e.idToken||e.accessToken,"argument-error"),Xe._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ht.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ht.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:s,nonce:i,providerId:o}=e;if(!(n||r||t||s))return null;if(!o)return null;try{return new ht(o)._credential({idToken:t,accessToken:n,rawNonce:i,pendingToken:s})}catch(a){return null}}}let dt=(()=>{class e extends ct{constructor(){super("facebook.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),pt=(()=>{class e extends ct{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(s){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),ft=(()=>{class e extends ct{constructor(){super("github.com")}static credential(t){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class mt extends Ne{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Ye(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ye(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ye(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:s}=t;return n&&r&&s&&n===r?new mt(n,s):null}static _create(e,t){return new mt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let gt=(()=>{class e extends ct{constructor(){super("twitter.com")}static credential(t,n){return Xe._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(s){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function yt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signUp",P(e,t))})).apply(this,arguments)}class vt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,s=!1){return(0,r.Z)(function*(){const r=yield ce._fromIdTokenResponse(e,n,s),i=wt(n);return new vt({user:r,providerId:i,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=wt(n);return new vt({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function wt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function bt(){return(bt=(0,r.Z)(function*(e){var t;const n=Ce(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new vt({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield yt(n,{returnSecureToken:!0}),s=yield vt._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(s.user),s})).apply(this,arguments)}class Tt extends i.ZR{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,this.name="FirebaseError",Object.setPrototypeOf(this,Tt.prototype),this.appName=e.name,this.code=t.code,this.tenantId=null!==(s=e.tenantId)&&void 0!==s?s:void 0,this.serverResponse=t.customData.serverResponse}static _fromErrorAndOperation(e,t,n,r){return new Tt(e,t,n,r)}}function It(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Tt._fromErrorAndOperation(e,n,t,r);throw n})}function Et(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function St(){return(St=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);yield xt(!0,n,t);const{providerUserInfo:r}=yield z(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=Et(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Ct(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e,t,n=!1){const r=yield Y(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return vt._forOperation(e,"link",r)})).apply(this,arguments)}function xt(e,t,n){return At.apply(this,arguments)}function At(){return(At=(0,r.Z)(function*(e,t,n){yield ne(t);const r=!1===e?"provider-already-linked":"no-such-provider";v(Et(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Nt(e,t){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,s="reauthenticate";try{const i=yield Y(e,It(r,s,t,e),n);v(i.idToken,r,"internal-error");const o=Q(i.idToken);v(o,r,"internal-error");const{sub:a}=o;return v(e.uid===a,r,"user-mismatch"),vt._forOperation(e,s,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&f(r,"user-mismatch"),i}})).apply(this,arguments)}function Pt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t,n=!1){const r="signIn",s=yield It(e,r,t),i=yield vt._fromIdTokenResponse(e,r,s);return n||(yield e._updateCurrentUser(i.user)),i})).apply(this,arguments)}function Dt(e,t){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(e,t){return Pt(Ce(e),t)})).apply(this,arguments)}function Ft(e,t){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);return yield xt(!1,n,t.providerId),Ct(n,t)})).apply(this,arguments)}function Ut(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t){return Nt((0,i.m9)(e),t)})).apply(this,arguments)}function qt(e,t){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,r.Z)(function*(e,t){return M(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))})).apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){const n=Ce(e),r=yield qt(n,{token:t,returnSecureToken:!0}),s=yield vt._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(s.user),s})).apply(this,arguments)}class zt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ht._fromServerResponse(e,t):f(e,"internal-error")}}class Ht extends zt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ht(t)}}function $t(e,t,n){var r;v((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),v(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(v(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(v(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Gt(){return(Gt=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&$t(r,s,n),yield Be(r,s)})).apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t,n){yield Re((0,i.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){yield Le((0,i.m9)(e),{oobCode:t})})).apply(this,arguments)}function Kt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r=yield Re(n,{oobCode:t}),s=r.requestType;switch(v(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":v(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":v(r.mfaInfo,n,"internal-error");default:v(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=zt._fromServerResponse(Ce(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const{data:n}=yield Kt((0,i.m9)(e),t);return n.email})).apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(e,t,n){const r=Ce(e),s=yield yt(r,{returnSecureToken:!0,email:t,password:n}),i=yield vt._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(i.user),i})).apply(this,arguments)}function Xt(){return(Xt=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};v(n.handleCodeInApp,r,"argument-error"),n&&$t(r,s,n),yield He(r,s)})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=lt.credentialWithLink(t,n||E());return v(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Dt(r,s)})).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:createAuthUri",P(e,t))})).apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:S()?E():"http://localhost"},{signinMethods:r}=yield tn((0,i.m9)(e),n);return r||[]})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&$t(n.auth,r,t);const{email:s}=yield qe(n.auth,r);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&$t(r.auth,s,n);const{email:o}=yield Ge(r.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function an(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,t){return O(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function un(){return(un=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield Y(r,an(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function cn(e,t,n){return hn.apply(this,arguments)}function hn(){return(hn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,s={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=yield Y(e,Oe(r,s));yield e._updateTokensIfNecessary(i,!0)})).apply(this,arguments)}class dn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class pn extends dn{constructor(e,t,n,r){super(e,t,n),this.username=r}}class fn extends dn{constructor(e,t){super(e,"facebook.com",t)}}class mn extends pn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class gn extends dn{constructor(e,t){super(e,"google.com",t)}}class yn extends pn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function _n(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,s=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new dn(i,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new fn(i,s);case"github.com":return new mn(i,s);case"google.com":return new gn(i,s);case"twitter.com":return new yn(i,s,e.screenName||null);case"custom":case"anonymous":return new dn(i,null);default:return new dn(i,r,s)}}(n)}class vn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new vn("enroll",e)}static _fromMfaPendingCredential(e){return new vn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return vn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return vn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class wn{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ce(e),s=(t.serverResponse.mfaInfo||[]).map(e=>zt._fromServerResponse(n,e));v(t.serverResponse.mfaPendingCredential,n,"internal-error");const i=vn._fromMfaPendingCredential(t.serverResponse.mfaPendingCredential);return new wn(i,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,i);delete t.serverResponse.mfaInfo,delete t.serverResponse.mfaPendingCredential;const s=Object.assign(Object.assign({},t.serverResponse),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield vt._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return v(t.user,n,"internal-error"),vt._forOperation(t.user,t.operationType,s);default:f(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function bn(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}class Tn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>zt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Tn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return vn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,s=yield n.getSession(),i=yield Y(n.user,r._process(n.user.auth,s,t));return yield n.user._updateTokensIfNecessary(i),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),s=yield Y(t.user,(i=t.user.auth,o={idToken:r,mfaEnrollmentId:n},O(i,"POST","/v2/accounts/mfaEnrollment:withdraw",P(i,o))));var i,o;t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(s);try{yield t.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const In=new WeakMap,En="__sak";class Sn{constructor(e,t){this.storage=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(En,"1"),this.storage.removeItem(En),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}}const Cn=(()=>{class e extends Sn{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return ge(e)||Te(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Ie(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,s=this;return(0,r.Z)(function*(){yield n().call(s,e,t),s.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),kn=(()=>{class e extends Sn{constructor(){super(window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let xn=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:s,eventType:i,data:o}=n.data,a=t.handlersMap[i];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const l=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),u=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:u})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function An(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Nn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var s=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=An("",20);r.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"))}}},s.handlers.add(o),r.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&s.removeMessageHandler(o)})})()}}function Rn(){return window}function Pn(){return void 0!==Rn().WorkerGlobalScope&&"function"==typeof Rn().importScripts}function On(){return(On=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(e){return null}})).apply(this,arguments)}const Dn="firebaseLocalStorageDb",Ln="firebaseLocalStorage",Fn="fbase_key";class Mn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Un(e,t){return e.transaction([Ln],t?"readwrite":"readonly").objectStore(Ln)}function jn(){const e=indexedDB.open(Dn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Ln,{keyPath:Fn})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(Ln)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(Dn);return new Mn(e).toPromise()}(),t(yield jn()))}))})}function qn(e,t,n){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,r.Z)(function*(e,t,n){const r=Un(e,!0).put({[Fn]:t,value:n});return new Mn(r).toPromise()})).apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(e,t){const n=Un(e,!1).get(t),r=yield new Mn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function zn(e,t){const n=Un(e,!0).delete(t);return new Mn(n).toPromise()}const Hn=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield jn()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return Pn()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=xn._getInstance(Pn()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return On.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new Nn(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);r&&(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){var n;if(t.sender&&t.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield jn();return yield qn(e,En,"1"),yield zn(e,En),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>qn(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return Bn.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>zn(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=Un(e,!1).getAll();return new Mn(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of t)r.add(s),JSON.stringify(e.localCache[s])!==JSON.stringify(i)&&(e.notifyListeners(s,i),n.push(s));for(const s of Object.keys(e.localCache))e.localCache[s]&&!r.has(s)&&(e.notifyListeners(s,null),n.push(s));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function $n(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}function Gn(){return(Gn=(0,r.Z)(function*(e){return(yield O(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Zn(e){return new Promise((t,n)=>{const r=document.createElement("script");var s,i;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=m("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(i=null===(s=document.getElementsByTagName("head"))||void 0===s?void 0:s[0])&&void 0!==i?i:document).appendChild(r)})}function Wn(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Kn=1e12;class Qn{constructor(e){this.auth=e,this.counter=Kn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Yn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Kn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Kn))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||Kn))||void 0===n||n.execute(),""})()}}class Yn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;v(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Jn=Wn("rcb"),Xn=new k(3e4,6e4);class er{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rn().grecaptcha}load(e,t=""){return v(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(Rn().grecaptcha):new Promise((n,r)=>{const s=Rn().setTimeout(()=>{r(m(e,"network-request-failed"))},Xn.get());Rn()[Jn]=()=>{Rn().clearTimeout(s),delete Rn()[Jn];const i=Rn().grecaptcha;if(!i)return void r(m(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},Zn(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:Jn,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(m(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Rn().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tr{load(e){return(0,r.Z)(function*(){return new Qn(e)})()}clearedOneInstance(){}}const nr="recaptcha",rr={theme:"light",type:"image"};class sr{constructor(e,t=Object.assign({},rr),n){this.parameters=t,this.type=nr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ce(n),this.isInvisible="invisible"===this.parameters.size,v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;v(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tr:new er,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const s=t=>{t&&(e.tokenChangeListeners.delete(s),r(t))};e.tokenChangeListeners.add(s),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){v(!this.parameters.sitekey,this.auth,"argument-error"),v(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),v("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=Rn()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){v(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){v(S()&&!Pn(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return Gn.apply(this,arguments)}(e.auth);v(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return v(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ir{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ot._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function or(){return(or=(0,r.Z)(function*(e,t,n){const r=Ce(e),s=yield ur(r,t,(0,i.m9)(n));return new ir(s,e=>Dt(r,e))})).apply(this,arguments)}function ar(){return(ar=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);yield xt(!1,r,"phone");const s=yield ur(r.auth,t,(0,i.m9)(n));return new ir(s,e=>Ft(r,e))})).apply(this,arguments)}function lr(){return(lr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=yield ur(r.auth,t,(0,i.m9)(n));return new ir(s,e=>Ut(r,e))})).apply(this,arguments)}function ur(e,t,n){return cr.apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(e,t,n){var r;const s=yield n.verify();try{let i;if(v("string"==typeof s,e,"argument-error"),v(n.type===nr,e,"argument-error"),i="string"==typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i)return v("enroll"===t.type,e,"internal-error"),(yield bn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{v("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;return v(n,e,"missing-multi-factor-info"),(yield $n(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield et(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}})).apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(e,t){yield Ct((0,i.m9)(e),t)})).apply(this,arguments)}let dr=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=Ce(t)}verifyPhoneNumber(e,t){return ur(this.auth,e,(0,i.m9)(t))}static credential(e,t){return ot._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?ot._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function pr(e,t){return t?I(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class fr extends Ne{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ye(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ye(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ye(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function mr(e){return Pt(e.auth,new fr(e),e.bypassAuthState)}function gr(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Nt(n,new fr(e),e.bypassAuthState)}function yr(e){return _r.apply(this,arguments)}function _r(){return(_r=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return v(n,t,"internal-error"),Ct(n,new fr(e),e.bypassAuthState)})).apply(this,arguments)}class vr{constructor(e,t,n,r,s=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o)return void t.reject(o);const l={auth:t.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(l))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return gr;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wr=new k(2e3,1e4);function br(){return(br=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ut);const s=pr(r,n);return new Er(r,"signInViaPopup",t,s).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,ut);const s=pr(r.auth,n);return new Er(r.auth,"reauthViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}function Ir(){return(Ir=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,ut);const s=pr(r.auth,n);return new Er(r.auth,"linkViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}let Er=(()=>{class e extends vr{constructor(t,n,r,s,i){super(t,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return v(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){b(1===e.filter.length,"Popup operations only handle one event");const t=An();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(m(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(m(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(m(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,wr.get())};e()}}return e.currentPopupAction=null,e})();const Sr=new Map;class Cr extends vr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=Sr.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return kr.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}Sr.set(t.auth._key(),n)}return n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function kr(){return(kr=(0,r.Z)(function*(e,t){const n=Rr(t),r="true"===(yield Nr(e)._get(n));return yield Nr(e)._remove(n),r})).apply(this,arguments)}function xr(e,t){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,r.Z)(function*(e,t){return Nr(e)._set(Rr(t),"true")})).apply(this,arguments)}function Nr(e){return I(e._redirectPersistence)}function Rr(e){return de("pendingRedirect",e.config.apiKey,e.name)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=Ce(e);y(e,t,ut);const s=pr(r,n);return yield xr(s,r),s._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,ut);const s=pr(r.auth,n);yield xr(s,r.auth);const o=yield Ur(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function Dr(){return(Dr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);y(r.auth,t,ut);const s=pr(r.auth,n);yield xt(!1,r,t.providerId),yield xr(s,r.auth);const o=yield Ur(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t){return yield Ce(e)._initializationPromise,Fr(e,t,!1)})).apply(this,arguments)}function Fr(e,t){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(e,t,n=!1){const r=Ce(e),s=pr(r,t),i=new Cr(r,s,n),o=yield i.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,t)),o})).apply(this,arguments)}function Ur(e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(e){const t=An(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class qr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Br(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Br(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(m(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vr(e))}saveEventToCache(e){this.cachedEventUids.add(Vr(e)),this.lastProcessedEventTime=Date.now()}}function Vr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Br({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function zr(e){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,r.Z)(function*(e,t={}){return O(e,"GET","/v1/projects",t)})).apply(this,arguments)}const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Zr(){return(Zr=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield zr(e);for(const r of t)try{if(Wr(r))return}catch(n){}f(e,"unauthorized-domain")})).apply(this,arguments)}function Wr(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Gr.test(n))return!1;if($r.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Kr=new k(3e4,6e4);function Qr(){const e=Rn().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Yr=null;function Jr(e){return Yr=Yr||function(e){return new Promise((t,n)=>{var r,s,i;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(m(e,"network-request-failed"))},timeout:Kr.get()})}if(null===(s=null===(r=Rn().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Rn().gapi)||void 0===i?void 0:i.load)){const t=Wn("iframefcb");return Rn()[t]=()=>{gapi.load?o():n(m(e,"network-request-failed"))},Zn(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Yr=null,e})}(e),Yr}const Xr=new k(5e3,15e3),es={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ts=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(e){const t=e.config;v(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:o.SDK_VERSION},s=ts.get(e.config.apiHost);s&&(r.eid=s);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}function rs(){return(rs=(0,r.Z)(function*(e){const t=yield Jr(e),n=Rn().gapi;return v(n,e,"internal-error"),t.open({where:document.body,url:ns(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:es,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const s=m(e,"network-request-failed"),i=Rn().setTimeout(()=>{r(s)},Xr.get());function o(){Rn().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const ss={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class is{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function os(e,t,n,r,s,a){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:s};if(t instanceof ut){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof ct){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const u=l;for(const i of Object.keys(u))void 0===u[i]&&delete u[i];return`${function({config:e}){return e.emulator?x(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(u).slice(1)}`}const as="webStorageSupport";class ls extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ls(e)}_finalizeEnroll(e,t,n){return function(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:finalize",P(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:finalize",P(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let us=(()=>{class e{constructor(){}static assertion(e){return ls._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var cs;class hs{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ds(){return window}function ps(){return(ps=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:s}=ds();b(t.sessionId,"AuthEvent did not contain a session ID");const i=yield gs(t.sessionId),o={};return Te()?o.ibi=s.packageName:ve()?o.apn=s.packageName:f(e,"operation-not-supported-in-this-environment"),s.displayName&&(o.appDisplayName=s.displayName),o.sessionId=i,os(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function fs(){return(fs=(0,r.Z)(function*(e){const{BuildInfo:t}=ds(),n={};Te()?n.iosBundleId=t.packageName:ve()?n.androidPackageName=t.packageName:f(e,"operation-not-supported-in-this-environment"),yield zr(e,n)})).apply(this,arguments)}function ms(){return(ms=(0,r.Z)(function*(e,t,n){const{cordova:r}=ds();let s=()=>{};try{yield new Promise((i,o)=>{let a=null;function l(){var e;i();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(m(e,"redirect-cancelled-by-user"))},2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),ve()&&document.addEventListener("visibilitychange",c,!1),s=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{s()}})).apply(this,arguments)}function gs(e){return ys.apply(this,arguments)}function ys(){return(ys=(0,r.Z)(function*(e){const t=_s(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _s(e){if(b(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}cs="Browser",(0,o._registerComponent)(new u.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:s}=n.options;return(e=>{v(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),v(!(null==s?void 0:s.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:s,clientPlatform:cs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ee(cs)},i=new Se(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(I);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(i,t),i})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new u.wA("auth-internal",e=>{return t=Ce(e.getProvider("auth").getImmediate()),new hs(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)("@firebase/auth","0.18.1",void 0);class vs extends qr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function ws(e){return bs.apply(this,arguments)}function bs(){return(bs=(0,r.Z)(function*(e){const t=yield Is()._get(Es(e));return t&&(yield Is()._remove(Es(e))),t})).apply(this,arguments)}function Ts(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Is(){return I(Cn)}function Es(e){return de("authEvent",e.config.apiKey,e.name)}function Ss(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,i.zd)(n.join("?"))}function Cs(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:m("no-auth-event")}}function ks(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function xs(e=(0,i.z$)()){return!("file:"!==ks()&&"ionic:"!==ks()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function As(){try{const e=self.localStorage,t=An();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,i.z$)()){return(0,i.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,i.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,i.hl)()}catch(e){return Ns()&&(0,i.hl)()}return!1}function Ns(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rs(){return("http:"===ks()||"https:"===ks()||(0,i.ru)()||xs())&&!((0,i.b$)()||(0,i.UG)())&&As()&&!Ns()}function Ps(){return xs()&&"undefined"!=typeof document}function Os(){return(Os=(0,r.Z)(function*(){return!!Ps()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const Ds={LOCAL:"local",NONE:"none",SESSION:"session"},Ls=v,Fs="persistence";function Ms(e){return Us.apply(this,arguments)}function Us(){return(Us=(0,r.Z)(function*(e){yield e._initializationPromise;const t=js(),n=de(Fs,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function js(){return"undefined"!=typeof window?window:null}const qs=v;class Vs{constructor(){this.browserResolver=I(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Fr}_openPopup(e,t,n,s){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=os(e,t,n,E(),s);return function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},ss),{width:r.toString(),height:s.toString(),top:o,left:a}),c=(0,i.z$)().toLowerCase();n&&(l=ye(c)?"_blank":n),me(c)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,i.z$)()){var t;return Te(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new is(null);const d=window.open(t||"",l,h);v(d,e,"popup-blocked");try{d.focus()}catch(p){}return new is(d)}(e,a,An())})()}_openRedirect(e,t,n,s){var i=this;return(0,r.Z)(function*(){var r;return yield i._originValidation(e),r=os(e,t,n,E(),s),Rn().location.href=r,new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return rs.apply(this,arguments)}(e),r=new qr(e);return n.register("authEvent",t=>(v(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(as,{type:as},n=>{var r;const s=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==s&&t(!!s),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Zr.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ie()||ge()||Te()}}),this.cordovaResolver=I(class{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new vs(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){f(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,s){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,s,i,o,a,l,u,c;const h=ds();v("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),v(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),v("function"==typeof(null===(i=null===(s=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===s?void 0:s.browsertab)||void 0===i?void 0:i.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(l=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),v("function"==typeof(null===(c=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),Sr.clear(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Ts(),postBody:null,tenantId:e.tenantId,error:m(e,"no-auth-event")}}(e,n,s);yield function(e,t){return Is()._set(Es(e),t)}(e,a);const l=yield function(e,t,n){return ps.apply(this,arguments)}(e,a,t),u=yield function(e){const{cordova:t}=ds();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let s=null;r?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)})})}(l);return function(e,t,n){return ms.apply(this,arguments)}(e,r,u)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return fs.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:s,BuildInfo:i}=ds(),o=setTimeout((0,r.Z)(function*(){yield ws(e),t.onEvent(Cs())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield ws(e);let s=null;r&&(null==n?void 0:n.url)&&(s=function(e,t){var n,r;const s=function(e){const t=Ss(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ss(n).link,s=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ss(s).link||s||r||n||e}(t);if(s.includes("/__/auth/callback")){const t=Ss(s),i=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==i?void 0:i.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?m(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:s,postBody:null}}return null}(r,n.url)),t.onEvent(s||Cs())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const l=s,u=`${i.packageName.toLowerCase()}://`;ds().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(u)&&a({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Fr}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,s){var i=this;return(0,r.Z)(function*(){return yield i.selectUnderlyingResolver(),i.assertedUnderlyingResolver._openPopup(e,t,n,s)})()}_openRedirect(e,t,n,s){var i=this;return(0,r.Z)(function*(){return yield i.selectUnderlyingResolver(),i.assertedUnderlyingResolver._openRedirect(e,t,n,s)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Ps()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return Os.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function Bs(e){return e.unwrap()}function zs(e){return $s(e)}function Hs(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Qs(e,function(e,t){var n;const r=(0,i.m9)(e),s=t;return v(t.operationType,r,"argument-error"),v(null===(n=s.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),wn._fromError(r,s)}(e,t));else if(r){const e=$s(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function $s(e){const{_tokenResponse:t}=e instanceof i.ZR?e.customData:e;if(!t)return null;if(!(e instanceof i.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return dr.credentialFromResult(e);const n=t.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=pt;break;case"facebook.com":r=dt;break;case"github.com":r=ft;break;case"twitter.com":r=gt;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:o,nonce:a}=t;return s||i||e||o?o?n.startsWith("saml.")?mt._create(n,o):Xe._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:s}):new ht(n).credential({idToken:e,accessToken:s,rawNonce:a}):null}return e instanceof i.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function Gs(e,t){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,r.Z)(function*(e,t){let n;try{n=yield t}catch(o){throw o instanceof i.ZR&&Hs(e,o),o}const{operationType:r,user:s}=n;return{operationType:r,credential:zs(n),additionalUserInfo:_n(n),user:Ys.getOrCreate(s)}})).apply(this,arguments)}function Ws(e,t){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>Gs(e,n.confirm(t))}})).apply(this,arguments)}class Qs{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Gs(Bs(this.auth),this.resolver.resolveSignIn(e))}}let Ys=(()=>{class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=(0,i.m9)(e);return In.has(t)||In.set(t,Tn._fromUser(t)),In.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gs(t.auth,Ft(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return Ws(n.auth,function(e,t,n){return ar.apply(this,arguments)}(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return Gs(t.auth,function(e,t,n){return Ir.apply(this,arguments)}(t._delegate,e,Vs))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Ms(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Dr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return Gs(t.auth,Ut(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return Ws(this.auth,function(e,t,n){return lr.apply(this,arguments)}(this._delegate,e,t))}reauthenticateWithPopup(e){return Gs(this.auth,function(e,t,n){return Tr.apply(this,arguments)}(this._delegate,e,Vs))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield Ms(Ce(t.auth)),function(e,t,n){return function(e,t,n){return Or.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}sendEmailVerification(e){return function(e,t){return sn.apply(this,arguments)}(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield function(e,t){return St.apply(this,arguments)}(t._delegate,e),t})()}updateEmail(e){return function(e,t){return cn((0,i.m9)(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return cn((0,i.m9)(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return function(e,t){return hr.apply(this,arguments)}(this._delegate,e)}updateProfile(e){return function(e,t){return un.apply(this,arguments)}(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return function(e,t,n){return on.apply(this,arguments)}(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}return e.USER_MAP=new WeakMap,e})();const Js=v;let Xs=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Js(n,"invalid-api-key",{appName:e.name});let r=[he];if("undefined"!=typeof window){r=function(e,t){const n=js();if(!(null==n?void 0:n.sessionStorage))return[];const r=de(Fs,e,t);switch(n.sessionStorage.getItem(r)){case Ds.NONE:return[he];case Ds.LOCAL:return[Hn,kn];case Ds.SESSION:return[kn];default:return[]}}(n,e.name);for(const e of[Hn,Cn,kn])r.includes(e)||r.push(e)}Js(n,"invalid-api-key",{appName:e.name});const s="undefined"!=typeof window?Vs:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:s}}),this._delegate._updateErrorMap(c),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ys.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){!function(e,t,n){const r=Ce(e);v(r._canInitEmulator,r,"emulator-config-failed"),v(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null==n?void 0:n.disableWarnings),i=xe(t),{host:o,port:a}=function(e){const t=xe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ae(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ae(t)}}}(t);r.config.emulator={url:`${i}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),function(e){function t(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(s)}(this._delegate,e,t)}applyActionCode(e){return function(e,t){return Wt.apply(this,arguments)}(this._delegate,e)}checkActionCode(e){return Kt(this._delegate,e)}confirmPasswordReset(e,t){return function(e,t,n){return Zt.apply(this,arguments)}(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return Gs(n._delegate,function(e,t,n){return Jt.apply(this,arguments)}(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return function(e,t){return rn.apply(this,arguments)}(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=at.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Js(Rs(),e._delegate,"operation-not-supported-in-this-environment");const t=yield function(e,t){return Lr.apply(this,arguments)}(e._delegate,Vs);return t?Gs(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){Ce(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:s,complete:i}=ei(e,t,n);return this._delegate.onAuthStateChanged(r,s,i)}onIdTokenChanged(e,t,n){const{next:r,error:s,complete:i}=ei(e,t,n);return this._delegate.onIdTokenChanged(r,s,i)}sendSignInLinkToEmail(e,t){return function(e,t,n){return Xt.apply(this,arguments)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return function(e,t,n){return Gt.apply(this,arguments)}(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){Ls(Object.values(Ds).includes(t),e,"invalid-persistence-type"),(0,i.b$)()?Ls(t!==Ds.SESSION,e,"unsupported-persistence-type"):(0,i.UG)()?Ls(t===Ds.NONE,e,"unsupported-persistence-type"):Ns()?Ls(t===Ds.NONE||t===Ds.LOCAL&&(0,i.hl)(),e,"unsupported-persistence-type"):Ls(t===Ds.NONE||As(),e,"unsupported-persistence-type")}(t._delegate,e),e){case Ds.SESSION:n=kn;break;case Ds.LOCAL:n=(yield I(Hn)._isAvailable())?Hn:Cn;break;case Ds.NONE:n=he;break;default:return f("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Gs(this._delegate,function(e){return bt.apply(this,arguments)}(this._delegate))}signInWithCredential(e){return Gs(this._delegate,Dt(this._delegate,e))}signInWithCustomToken(e){return Gs(this._delegate,function(e,t){return Bt.apply(this,arguments)}(this._delegate,e))}signInWithEmailAndPassword(e,t){return Gs(this._delegate,function(e,t,n){return Dt((0,i.m9)(e),lt.credential(t,n))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Gs(this._delegate,function(e,t,n){return en.apply(this,arguments)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ws(this._delegate,function(e,t,n){return or.apply(this,arguments)}(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Js(Rs(),t._delegate,"operation-not-supported-in-this-environment"),Gs(t._delegate,function(e,t,n){return br.apply(this,arguments)}(t._delegate,e,Vs))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Js(Rs(),t._delegate,"operation-not-supported-in-this-environment"),yield Ms(t._delegate),function(e,t,n){return function(e,t,n){return Pr.apply(this,arguments)}(e,t,n)}(t._delegate,e,Vs)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return function(e,t){return Yt.apply(this,arguments)}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=Ds,e})();function ei(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const s=r;return{next:e=>s(e&&Ys.getOrCreate(e)),error:t,complete:n}}let ti=(()=>{class e{constructor(){this.providerId="phone",this._delegate=new dr(Bs(s.Z.auth()))}static credential(e,t){return dr.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}return e.PHONE_SIGN_IN_METHOD=dr.PHONE_SIGN_IN_METHOD,e.PROVIDER_ID=dr.PROVIDER_ID,e})();const ni=v;var ri;(ri=s.Z).INTERNAL.registerComponent(new u.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xs(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:lt,FacebookAuthProvider:dt,GithubAuthProvider:ft,GoogleAuthProvider:pt,OAuthProvider:ht,PhoneAuthProvider:ti,PhoneMultiFactorGenerator:us,RecaptchaVerifier:class{constructor(e,t,n=s.Z.app()){var r;ni(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:gt,Auth:Xs,AuthCredential:Ne,Error:i.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ri.registerVersion("@firebase/auth-compat","0.1.4")},8318:(e,t,n)=>{"use strict";n.d(t,{y:()=>u});var r=n(6673),s=n(5331),i=n(7498),o=n(6197),a=n(3392),l=n(1484);let u=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[s.b])return e[s.b]()}return e||t||n?new r.L(e,t,n):new r.L(i.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||l.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){l.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:s}=e;if(t||s)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=c(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(s){n(s),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=c(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function c(e){if(e||(e=l.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},7498:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});var r=n(1484),s=n(4294);const i={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,s.z)(e)},complete(){}}},5959:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>u,xQ:()=>c});var r=n(8318),s=n(6673),i=n(7570),o=n(3895),a=n(9291),l=n(5331);class u extends s.L{constructor(e){super(e),this.destination=e}}let c=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.b](){return new u(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let s=0;s<n;s++)r[s].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),i.w.EMPTY):this.isStopped?(e.complete(),i.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends c{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):i.w.EMPTY}}},9291:(e,t,n)=>{"use strict";n.d(t,{W:()=>s});var r=n(7570);class s extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},6673:(e,t,n)=>{"use strict";n.d(t,{L:()=>u});var r=n(5024),s=n(7498),i=n(7570),o=n(5331),a=n(1484),l=n(4294);class u extends i.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=s.c;break;case 1:if(!e){this.destination=s.c;break}if("object"==typeof e){e instanceof u?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new u(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class c extends u{constructor(e,t,n,i){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,i=t.complete,t!==s.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,l.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,l.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,l.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,l.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},7570:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(8470),s=n(2056),i=n(5024);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();let a=(()=>{class e{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:u,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(let e=0;e<n.length;++e)n[e].remove(this);if((0,i.m)(u)){a&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?l(h.errors):[h]}}if((0,r.k)(c)){let e=-1,n=c.length;for(;++e<n;){const n=c[e];if((0,s.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(l(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){const t=n;n=new e,n._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof e){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const s=this._subscriptions;return null===s?this._subscriptions=[n]:s.push(n),n}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var t;return e.EMPTY=((t=new e).closed=!0,t),e})();function l(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}},1484:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>l});var r=n(6673),s=n(8318),i=n(6015);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function l(e,t){if(t.closed)return;if(e instanceof s.y)return e.subscribe(t);let n;try{n=(0,i.s)(e)(t)}catch(r){t.error(r)}return n}},2875:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>l});var r=n(5959),s=n(8318),i=n(7570),o=n(1564);class a extends s.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new i.w,e.add(this.source.subscribe(new u(this.getSubject(),this))),e.closed&&(this._connection=null,e=i.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const l=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class u extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},653:(e,t,n)=>{"use strict";n.d(t,{E:()=>s,c:()=>i});var r=n(8318);const s=new r.y(e=>e.complete());function i(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):s}},9764:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(8318),s=n(6015),i=n(7570),o=n(6197),a=n(2570),l=n(5686),u=n(5168),c=n(9653);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new i.w;return r.add(t.schedule(()=>{const s=e[o.L]();r.add(s.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,u.t)(e))return function(e,t){return new r.y(n=>{const r=new i.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,c.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[l.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new i.w;let s;return r.add(()=>{s&&"function"==typeof s.return&&s.return()}),r.add(t.schedule(()=>{s=e[l.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=s.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,s.s)(e))}},9342:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(8318),s=n(625),i=n(2570);function o(e,t){return t?(0,i.r)(e,t):new r.y((0,s.V)(e))}},1906:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(8318),s=n(6163),i=n(7471),o=n(9342);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,s.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,i.J)(t)((0,o.n)(e,n))}},878:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(6163),s=n(9342),i=n(2570);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,i.r)(e,t)):(0,s.n)(e)}},9996:(e,t,n)=>{"use strict";n.d(t,{U:()=>s});var r=n(6673);function s(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new i(e,t))}}class i{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},7471:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(3982),s=n(3392);function i(e=Number.POSITIVE_INFINITY){return(0,r.zg)(s.y,e)}},3982:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(9996),s=n(9764),i=n(6882);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?i=>i.pipe(o((n,i)=>(0,s.D)(e(n,i)).pipe((0,r.U)((e,r)=>t(n,e,i,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new l(e,this.project,this.concurrent))}}class l extends i.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new i.IY(this),n=this.destination;n.add(t);const r=(0,i.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9098:(e,t,n)=>{"use strict";n.d(t,{ht:()=>c,QV:()=>l});var r=n(6673),s=n(653),i=n(878),o=n(8318);let a=(()=>{class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,s.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e})();function l(e,t=0){return function(n){return n.lift(new u(e,t))}}class u{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new c(e,this.scheduler,this.delay))}}class c extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(c.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},1564:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(6673);function s(){return function(e){return e.lift(new i(e))}}class i{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),s=t.subscribe(r);return r.closed||(r.connection=n.connect()),s}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1055:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var r=n(2875),s=n(1564),i=n(5959);function o(){return new i.xQ}function a(){return e=>{return(0,s.x)()((t=o,function(e){let n;n="function"==typeof t?t:function(){return t};const s=Object.create(e,r.N);return s.source=e,s.subjectFactory=n,s})(e));var t}}},4187:(e,t,n)=>{"use strict";n.d(t,{R:()=>g});var r=n(8318);let s=1;const i=(()=>Promise.resolve())(),o={};function a(e){return e in o&&(delete o[e],!0)}const l={setImmediate(e){const t=s++;return o[t]=!0,i.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var u=n(8277);class c extends u.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=l.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(l.clearImmediate(t),e.scheduled=void 0)}}var h=n(1098);class d extends h.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,s=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<s&&(e=t.shift()));if(this.active=!1,n){for(;++r<s&&(e=t.shift());)e.unsubscribe();throw n}}}const p=new d(c);var f=n(8470);class m extends r.y{constructor(e,t=0,n=p){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,((0,f.k)(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=p)}static create(e,t=0,n=p){return new m(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(m.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function g(e,t=0){return function(n){return n.lift(new y(e,t))}}class y{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new m(t,this.delay,this.scheduler).subscribe(e)}}},6599:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(6673);function s(){}var i=n(5024);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new l(e,this.nextOrObserver,this.error,this.complete))}}class l extends r.L{constructor(e,t,n,r){super(e),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,(0,i.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||s,this._tapError=t.error||s,this._tapComplete=t.complete||s)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},2570:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(8318),s=n(7570);function i(e,t){return new r.y(n=>{const r=new s.w;let i=0;return r.add(t.schedule(function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});var r=n(7570);class s extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class i extends s{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(s){r=!0,n=!!s&&s||new Error(s)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},1098:(e,t,n)=>{"use strict";n.d(t,{v:()=>s});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class s extends r{constructor(e,t=r.now){super(e,()=>s.delegate&&s.delegate!==this?s.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return s.delegate&&s.delegate!==this?s.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},8569:(e,t,n)=>{"use strict";n.d(t,{z:()=>s,P:()=>i});var r=n(8277);const s=new(n(1098).v)(r.o),i=s},8489:(e,t,n)=>{"use strict";n.d(t,{c:()=>l,N:()=>a});var r=n(8277);class s extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}var i=n(1098);class o extends i.v{}const a=new o(s),l=a},5686:(e,t,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,{hZ:()=>s});const s=r()},6197:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4294:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},3392:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},8470:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=(()=>Array.isArray||(e=>e&&"number"==typeof e.length))()},9653:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},5024:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},2056:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},5168:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},6163:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},6015:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(625),s=n(4294),i=n(5686),o=n(6197),a=n(9653),l=n(5168),u=n(2056);const c=e=>{if(e&&"function"==typeof e[o.L])return c=e,e=>{const t=c[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,l.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,s.z),e);if(e&&"function"==typeof e[i.hZ])return t=e,e=>{const n=t[i.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,u.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,c}},625:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},7581:(e,t,n)=>{"use strict";var r=n(5366);let s=null;function i(){return s}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:l,token:e,providedIn:"platform"}),e})();function l(){return(0,r.LFG)(c)}const u=new r.OlP("Location Initialized");let c=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return i().getBaseHref(this._doc)}onPopState(e){const t=i().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=i().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new c((0,r.LFG)(o))}function p(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function f(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function m(e){return e&&"?"!==e[0]?"?"+e:e}let g=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new v((0,r.LFG)(a),t&&t.origin||"")}const _=new r.OlP("appBaseHref");let v=(()=>{class e extends g{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return p(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+m(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const s=this.prepareExternalUrl(n+m(r));this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){const s=this.prepareExternalUrl(n+m(r));this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends g{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=p(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let s=this.prepareExternalUrl(n+m(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,t,s)}replaceState(e,t,n,r){let s=this.prepareExternalUrl(n+m(r));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=f(I(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+m(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,I(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+m(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(g),r.LFG(a))},e.normalizeQueryParams=m,e.joinWithSlash=p,e.stripTrailingSlash=f,e.\u0275prov=(0,r.Yz7)({factory:T,token:e,providedIn:"root"}),e})();function T(){return new b((0,r.LFG)(g),(0,r.LFG)(a))}function I(e){return e.replace(/\/index.html$/,"")}var E=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({});const S=r.kL8;class C{}let k=(()=>{class e extends C{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(S(t||this.locale)(e)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class x{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(Dv){throw new Error(`Cannot find a differ supporting object '${t}' of type '${e=t,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new x(null,this._ngForOf,-1,-1),null===r?void 0:r),s=new N(e,n);t.push(s)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const s=this._viewContainer.get(n);this._viewContainer.move(s,r);const i=new N(e,s);t.push(i)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class N{constructor(e,t){this.record=e,this.view=t}}let R=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){O("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){O("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function O(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:C,useClass:k}]}),e})();function L(e){return"server"===e}let F=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new M((0,r.LFG)(o),window)}),e})();class M{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=U(this.window.history)||U(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(Dv){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Dv){return!1}}}function U(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class j extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new j,s||(s=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(V=V||document.querySelector("base"),V?V.getAttribute("href"):null);return null==t?null:function(e){q=q||document.createElement("a"),q.setAttribute("href",e);const t=q.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){V=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,s]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,e)}}let q,V=null;const B=new r.OlP("TRANSITION_ID"),z=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=i();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[B,o,r.zs3],multi:!0}];class H{static init(){(0,r.VLi)(new H)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,s=!1;const i=function(t){s=s||t,n--,0==n&&e(s)};t.forEach(function(e){e.whenStable(i)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?i().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let $=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const G=new r.OlP("EventManagerPlugins");let Z=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(G),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class W{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=i().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let K=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Q=(()=>{class e extends K{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(Y),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Y))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function Y(e){i().remove(e)}const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function ee(e,t,n){for(let r=0;r<t.length;r++){let s=t[r];Array.isArray(s)?ee(e,s,n):(s=s.replace(X,e),n.push(s))}return n}function te(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let ne=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new re(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new se(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new ie(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=ee(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Z),r.LFG(Q),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class re{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(J[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=J[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=J[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,s){s&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,s&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,te(n)):this.eventManager.addEventListener(e,t,te(n))}}class se extends re{constructor(e,t,n,r){super(e),this.component=n;const s=ee(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ie extends re{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ee(r.id,r.styles,[]);for(let i=0;i<s.length;i++){const e=document.createElement("style");e.textContent=s[i],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let oe=(()=>{class e extends W{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const ae=["alt","control","meta","shift"],le={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ue={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ce={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let he=(()=>{class e extends W{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>i().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=e._normalizeKey(n.pop());let i="";if(ae.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),i+=e+".")}),i+=s,0!=n.length||0===s.length)return null;const o={};return o.domEventName=r,o.fullKey=i,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ue.hasOwnProperty(t)&&(t=ue[t]))}return le[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ae.forEach(r=>{r!=n&&(0,ce[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return s=>{e.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),de=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(fe)},token:e,providedIn:"root"}),e})();function pe(e){return new fe(e.get(o))}let fe=(()=>{class e extends de{constructor(e){super(),this._doc=e}sanitize(e,t){if(null==t)return null;switch(e){case r.q3G.NONE:return t;case r.q3G.HTML:return(0,r.qzn)(t,"HTML")?(0,r.z3N)(t):(0,r.EiD)(this._doc,String(t)).toString();case r.q3G.STYLE:return(0,r.qzn)(t,"Style")?(0,r.z3N)(t):t;case r.q3G.SCRIPT:if((0,r.qzn)(t,"Script"))return(0,r.z3N)(t);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(t),(0,r.qzn)(t,"URL")?(0,r.z3N)(t):(0,r.mCW)(String(t));case r.q3G.RESOURCE_URL:if((0,r.qzn)(t,"ResourceURL"))return(0,r.z3N)(t);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,r.JVY)(e)}bypassSecurityTrustStyle(e){return(0,r.L6k)(e)}bypassSecurityTrustScript(e){return(0,r.eBb)(e)}bypassSecurityTrustUrl(e){return(0,r.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,r.pB0)(e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:function(){return pe((0,r.LFG)(r.gxx))},token:e,providedIn:"root"}),e})();const me=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){j.makeCurrent(),H.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ge=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:G,useClass:oe,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:G,useClass:he,multi:!0,deps:[o]},[],{provide:ne,useClass:ne,deps:[Z,Q,r.AFp]},{provide:r.FYo,useExisting:ne},{provide:K,useExisting:Q},{provide:Q,useClass:Q,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Z,useClass:Z,deps:[G,r.R0b]},{provide:class{},useClass:$,deps:[]},[]];let ye=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:B,useExisting:r.AFp},z]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:ge,imports:[D,r.hGG]}),e})();"undefined"!=typeof window&&window;class _e{}const ve="*";function we(e,t=null){return{type:4,styles:t,timings:e}}function be(e,t=null){return{type:2,steps:e,options:t}}function Te(e){return{type:6,styles:e,offset:null}}function Ie(e,t,n){return{type:0,name:e,styles:t,options:n}}function Ee(e,t,n=null){return{type:1,expr:e,animation:t,options:n}}function Se(e){Promise.resolve(null).then(e)}class Ce{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Se(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class ke{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?Se(()=>this._onFinish()):this.players.forEach(e=>{e.onDone(()=>{++t==s&&this._onFinish()}),e.onDestroy(()=>{++n==s&&this._onDestroy()}),e.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((e,t)=>Math.max(e,t.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(e=>{const n=e.totalTime?Math.min(1,t/e.totalTime):1;e.setPosition(n)})}getPosition(){const e=this.players.reduce((e,t)=>null===e||t.totalTime>e.totalTime?t:e,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}function xe(){return"undefined"!=typeof window&&void 0!==window.document}function Ae(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ne(e){switch(e.length){case 0:return new Ce;case 1:return e[0];default:return new ke(e)}}function Re(e,t,n,r,s={},i={}){const o=[],a=[];let l=-1,u=null;if(r.forEach(e=>{const n=e.offset,r=n==l,c=r&&u||{};Object.keys(e).forEach(n=>{let r=n,a=e[n];if("offset"!==n)switch(r=t.normalizePropertyName(r,o),a){case"!":a=s[n];break;case ve:a=i[n];break;default:a=t.normalizeStyleValue(n,r,a,o)}c[r]=a}),r||a.push(c),u=c,l=n}),o.length){const e="\n - ";throw new Error(`Unable to animate due to the following errors:${e}${o.join(e)}`)}return a}function Pe(e,t,n,r){switch(t){case"start":e.onStart(()=>r(n&&Oe(n,"start",e)));break;case"done":e.onDone(()=>r(n&&Oe(n,"done",e)));break;case"destroy":e.onDestroy(()=>r(n&&Oe(n,"destroy",e)))}}function Oe(e,t,n){const r=n.totalTime,s=De(e.element,e.triggerName,e.fromState,e.toState,t||e.phaseName,null==r?e.totalTime:r,!!n.disabled),i=e._data;return null!=i&&(s._data=i),s}function De(e,t,n,r,s="",i=0,o){return{element:e,triggerName:t,fromState:n,toState:r,phaseName:s,totalTime:i,disabled:!!o}}function Le(e,t,n){let r;return e instanceof Map?(r=e.get(t),r||e.set(t,r=n)):(r=e[t],r||(r=e[t]=n)),r}function Fe(e){const t=e.indexOf(":");return[e.substring(1,t),e.substr(t+1)]}let Me=(e,t)=>!1,Ue=(e,t)=>!1,je=(e,t,n)=>[];const qe=Ae();(qe||"undefined"!=typeof Element)&&(Me=xe()?(e,t)=>{for(;t&&t!==document.documentElement;){if(t===e)return!0;t=t.parentNode||t.host}return!1}:(e,t)=>e.contains(t),Ue=(()=>{if(qe||Element.prototype.matches)return(e,t)=>e.matches(t);{const e=Element.prototype,t=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;return t?(e,n)=>t.apply(e,[n]):Ue}})(),je=(e,t,n)=>{let r=[];if(n){const n=e.querySelectorAll(t);for(let e=0;e<n.length;e++)r.push(n[e])}else{const n=e.querySelector(t);n&&r.push(n)}return r});let Ve=null,Be=!1;function ze(e){Ve||(Ve=("undefined"!=typeof document?document.body:null)||{},Be=!!Ve.style&&"WebkitAppearance"in Ve.style);let t=!0;return Ve.style&&!function(e){return"ebkit"==e.substring(1,6)}(e)&&(t=e in Ve.style,!t&&Be)&&(t="Webkit"+e.charAt(0).toUpperCase()+e.substr(1)in Ve.style),t}const He=Ue,$e=Me,Ge=je;function Ze(e){const t={};return Object.keys(e).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=e[n]}),t}let We=(()=>{class e{validateStyleProperty(e){return ze(e)}matchesElement(e,t){return He(e,t)}containsElement(e,t){return $e(e,t)}query(e,t,n){return Ge(e,t,n)}computeStyle(e,t,n){return n||""}animate(e,t,n,r,s,i=[],o){return new Ce(n,r)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Ke=(()=>{class e{}return e.NOOP=new We,e})();const Qe="ng-enter",Ye="ng-leave",Je="ng-trigger",Xe=".ng-trigger",et="ng-animating",tt=".ng-animating";function nt(e){if("number"==typeof e)return e;const t=e.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:rt(parseFloat(t[1]),t[2])}function rt(e,t){switch(t){case"s":return 1e3*e;default:return e}}function st(e,t,n){return e.hasOwnProperty("duration")?e:function(e,t,n){let r,s=0,i="";if("string"==typeof e){const n=e.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return t.push(`The provided timing value "${e}" is invalid.`),{duration:0,delay:0,easing:""};r=rt(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(s=rt(parseFloat(o),n[4]));const a=n[5];a&&(i=a)}else r=e;if(!n){let n=!1,i=t.length;r<0&&(t.push("Duration values below 0 are not allowed for this animation step."),n=!0),s<0&&(t.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&t.splice(i,0,`The provided timing value "${e}" is invalid.`)}return{duration:r,delay:s,easing:i}}(e,t,n)}function it(e,t={}){return Object.keys(e).forEach(n=>{t[n]=e[n]}),t}function ot(e,t,n={}){if(t)for(let r in e)n[r]=e[r];else it(e,n);return n}function at(e,t,n){return n?t+":"+n+";":""}function lt(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style.item(n);t+=at(0,r,e.style.getPropertyValue(r))}for(const n in e.style)e.style.hasOwnProperty(n)&&!n.startsWith("_")&&(t+=at(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e.style[n]));e.setAttribute("style",t)}function ut(e,t,n){e.style&&(Object.keys(t).forEach(r=>{const s=yt(r);n&&!n.hasOwnProperty(r)&&(n[r]=e.style[s]),e.style[s]=t[r]}),Ae()&&lt(e))}function ct(e,t){e.style&&(Object.keys(t).forEach(t=>{const n=yt(t);e.style[n]=""}),Ae()&&lt(e))}function ht(e){return Array.isArray(e)?1==e.length?e[0]:be(e):e}const dt=new RegExp("{{\\s*(.+?)\\s*}}","g");function pt(e){let t=[];if("string"==typeof e){let n;for(;n=dt.exec(e);)t.push(n[1]);dt.lastIndex=0}return t}function ft(e,t,n){const r=e.toString(),s=r.replace(dt,(e,r)=>{let s=t[r];return t.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),s=""),s.toString()});return s==r?e:s}function mt(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return t}const gt=/-+([a-z0-9])/g;function yt(e){return e.replace(gt,(...e)=>e[1].toUpperCase())}function _t(e,t){return 0===e||0===t}function vt(e,t,n){const r=Object.keys(n);if(r.length&&t.length){let i=t[0],o=[];if(r.forEach(e=>{i.hasOwnProperty(e)||o.push(e),i[e]=n[e]}),o.length)for(var s=1;s<t.length;s++){let n=t[s];o.forEach(function(t){n[t]=bt(e,t)})}}return t}function wt(e,t,n){switch(t.type){case 7:return e.visitTrigger(t,n);case 0:return e.visitState(t,n);case 1:return e.visitTransition(t,n);case 2:return e.visitSequence(t,n);case 3:return e.visitGroup(t,n);case 4:return e.visitAnimate(t,n);case 5:return e.visitKeyframes(t,n);case 6:return e.visitStyle(t,n);case 8:return e.visitReference(t,n);case 9:return e.visitAnimateChild(t,n);case 10:return e.visitAnimateRef(t,n);case 11:return e.visitQuery(t,n);case 12:return e.visitStagger(t,n);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function bt(e,t){return window.getComputedStyle(e)[t]}const Tt="*";function It(e,t){const n=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(e=>function(e,t,n){if(":"==e[0]){const r=function(e,t){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,t)=>parseFloat(t)>parseFloat(e);case":decrement":return(e,t)=>parseFloat(t)<parseFloat(e);default:return t.push(`The transition alias value "${e}" is not supported`),"* => *"}}(e,n);if("function"==typeof r)return void t.push(r);e=r}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${e}" is not supported`),t;const s=r[1],i=r[2],o=r[3];t.push(Ct(s,o)),"<"!=i[0]||s==Tt&&o==Tt||t.push(Ct(o,s))}(e,n,t)):n.push(e),n}const Et=new Set(["true","1"]),St=new Set(["false","0"]);function Ct(e,t){const n=Et.has(e)||St.has(e),r=Et.has(t)||St.has(t);return(s,i)=>{let o=e==Tt||e==s,a=t==Tt||t==i;return!o&&n&&"boolean"==typeof s&&(o=s?Et.has(e):St.has(e)),!a&&r&&"boolean"==typeof i&&(a=i?Et.has(t):St.has(t)),o&&a}}const kt=new RegExp("s*:selfs*,?","g");function xt(e,t,n){return new At(e).build(t,n)}class At{constructor(e){this._driver=e}build(e,t){const n=new Nt(t);return this._resetContextStyleTimingState(n),wt(this,ht(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],i=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(e=>{if(this._resetContextStyleTimingState(t),0==e.type){const n=e,r=n.name;r.toString().split(/\s*,\s*/).forEach(e=>{n.name=e,s.push(this.visitState(n,t))}),n.name=r}else if(1==e.type){const s=this.visitTransition(e,t);n+=s.queryCount,r+=s.depCount,i.push(s)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:i,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,i=r||{};if(n.styles.forEach(e=>{if(Rt(e)){const t=e;Object.keys(t).forEach(e=>{pt(t[e]).forEach(e=>{i.hasOwnProperty(e)||s.add(e)})})}}),s.size){const n=mt(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=wt(this,ht(e.animation),t);return{type:1,matchers:It(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Pt(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(e=>wt(this,e,t)),options:Pt(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(e=>{t.currentTime=n;const s=wt(this,e,t);return r=Math.max(r,t.currentTime),s});return t.currentTime=r,{type:3,steps:s,options:Pt(e.options)}}visitAnimate(e,t){const n=function(e,t){let n=null;if(e.hasOwnProperty("duration"))n=e;else if("number"==typeof e)return Ot(st(e,t).duration,0,"");const r=e;if(r.split(/\s+/).some(e=>"{"==e.charAt(0)&&"{"==e.charAt(1))){const e=Ot(0,0,"");return e.dynamic=!0,e.strValue=r,e}return n=n||st(r,t),Ot(n.duration,n.delay,n.easing)}(e.timings,t.errors);let r;t.currentAnimateTimings=n;let s=e.styles?e.styles:Te({});if(5==s.type)r=this.visitKeyframes(s,t);else{let s=e.styles,i=!1;if(!s){i=!0;const e={};n.easing&&(e.easing=n.easing),s=Te(e)}t.currentTime+=n.duration+n.delay;const o=this.visitStyle(s,t);o.isEmptyStep=i,r=o}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(e=>{"string"==typeof e?e==ve?n.push(e):t.errors.push(`The provided style string value ${e} is not allowed.`):n.push(e)}):n.push(e.styles);let r=!1,s=null;return n.forEach(e=>{if(Rt(e)){const t=e,n=t.easing;if(n&&(s=n,delete t.easing),!r)for(let e in t)if(t[e].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(e=>{"string"!=typeof e&&Object.keys(e).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void t.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const i=t.collectedStyles[t.currentQuerySelector],o=i[n];let a=!0;o&&(s!=r&&s>=o.startTime&&r<=o.endTime&&(t.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${r}ms"`),a=!1),s=o.startTime),a&&(i[n]={startTime:s,endTime:r}),t.options&&function(e,t,n){const r=t.params||{},s=pt(e);s.length&&s.forEach(e=>{r.hasOwnProperty(e)||n.push(`Unable to resolve the local animation param ${e} in the given list of values`)})}(e[n],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const s=[];let i=!1,o=!1,a=0;const l=e.steps.map(e=>{const n=this._makeStyleAst(e,t);let l=null!=n.offset?n.offset:function(e){if("string"==typeof e)return null;let t=null;if(Array.isArray(e))e.forEach(e=>{if(Rt(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(Rt(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}return t}(n.styles),u=0;return null!=l&&(r++,u=n.offset=l),o=o||u<0||u>1,i=i||u<a,a=u,s.push(u),n});o&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),i&&t.errors.push("Please ensure that all keyframe offsets are in order");const u=e.steps.length;let c=0;r>0&&r<u?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(c=1/(u-1));const h=u-1,d=t.currentTime,p=t.currentAnimateTimings,f=p.duration;return l.forEach((e,r)=>{const i=c>0?r==h?1:c*r:s[r],o=i*f;t.currentTime=d+p.delay+o,p.duration=o,this._validateStyleAst(e,t),e.offset=i,n.styles.push(e)}),n}visitReference(e,t){return{type:8,animation:wt(this,ht(e.animation),t),options:Pt(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pt(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pt(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,i]=function(e){const t=!!e.split(/\s*,\s*/).find(e=>":self"==e);return t&&(e=e.replace(kt,"")),[e=e.replace(/@\*/g,Xe).replace(/@\w+/g,e=>".ng-trigger-"+e.substr(1)).replace(/:animating/g,tt),t]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Le(t.collectedStyles,t.currentQuerySelector,{});const o=wt(this,ht(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:i,animation:o,originalSelector:e.selector,options:Pt(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:st(e.timings,t.errors,!0);return{type:12,animation:wt(this,ht(e.animation),t),timings:n,options:null}}}class Nt{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Rt(e){return!Array.isArray(e)&&"object"==typeof e}function Pt(e){var t;return e?(e=it(e)).params&&(e.params=(t=e.params)?it(t):null):e={},e}function Ot(e,t,n){return{duration:e,delay:t,easing:n}}function Dt(e,t,n,r,s,i,o=null,a=!1){return{type:1,element:e,keyframes:t,preStyleProps:n,postStyleProps:r,duration:s,delay:i,totalTime:s+i,easing:o,subTimeline:a}}class Lt{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ft=new RegExp(":enter","g"),Mt=new RegExp(":leave","g");function Ut(e,t,n,r,s,i={},o={},a,l,u=[]){return(new jt).buildKeyframes(e,t,n,r,s,i,o,a,l,u)}class jt{buildKeyframes(e,t,n,r,s,i,o,a,l,u=[]){l=l||new Lt;const c=new Vt(e,t,l,r,s,u,[]);c.options=a,c.currentTimeline.setStyles([i],null,c.errors,a),wt(this,n,c);const h=c.timelines.filter(e=>e.containsAnimation());if(h.length&&Object.keys(o).length){const e=h[h.length-1];e.allowOnlyTimelineStyles()||e.setStyles([o],null,c.errors,a)}return h.length?h.map(e=>e.buildKeyframes()):[Dt(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,i=this._visitSubInstructions(n,r,r.options);s!=i&&t.transformIntoNewTimeline(i)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let r=t.currentTimeline.currentTime;const s=null!=n.duration?nt(n.duration):null,i=null!=n.delay?nt(n.delay):null;return 0!==s&&e.forEach(e=>{const n=t.appendInstructionToTimeline(e,s,i);r=Math.max(r,n.duration+n.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),wt(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qt);const e=nt(s.delay);r.delayNextStep(e)}e.steps.length&&(e.steps.forEach(e=>wt(this,e,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?nt(e.options.delay):0;e.steps.forEach(i=>{const o=t.createSubContext(e.options);s&&o.delayNextStep(s),wt(this,i,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(e=>t.currentTimeline.mergeTimelineCollectedStyles(e)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return st(t.params?ft(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,i=t.createSubContext().currentTimeline;i.easing=n.easing,e.styles.forEach(e=>{i.forwardTime((e.offset||0)*s),i.setStyles(e.styles,e.easing,t.errors,t.options),i.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(i),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?nt(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=qt);let i=n;const o=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{t.currentQueryIndex=r;const o=t.createSubContext(e.options,n);s&&o.delayNextStep(s),n===t.element&&(a=o.currentTimeline),wt(this,e.animation,o),o.currentTimeline.applyStylesToKeyframe(),i=Math.max(i,o.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(i),a&&(t.currentTimeline.mergeTimelineCollectedStyles(a),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,i=Math.abs(s.duration),o=i*(t.currentQueryTotal-1);let a=i*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=t.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;wt(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const qt={};class Vt{constructor(e,t,n,r,s,i,o,a){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=i,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Bt(this._driver,t,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=nt(n.duration)),null!=n.delay&&(r.delay=nt(n.delay));const s=n.params;if(s){let e=r.params;e||(e=this.options.params={}),Object.keys(s).forEach(n=>{t&&e.hasOwnProperty(n)||(e[n]=ft(s[n],e,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(e=>{n[e]=t[e]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new Vt(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=qt,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},s=new zt(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,i){let o=[];if(r&&o.push(this.element),e.length>0){e=(e=e.replace(Ft,"."+this._enterClassName)).replace(Mt,"."+this._leaveClassName);let t=this._driver.query(this.element,e,1!=n);0!==n&&(t=n<0?t.slice(t.length+n,t.length):t.slice(0,n)),o.push(...t)}return s||0!=o.length||i.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),o}}class Bt{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Bt(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||ve,this._currentKeyframe[e]=ve}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},i=function(e,t){const n={};let r;return e.forEach(e=>{"*"===e?(r=r||Object.keys(t),r.forEach(e=>{n[e]=ve})):ot(e,!1,n)}),n}(e,this._globalTimelineStyles);Object.keys(i).forEach(e=>{const t=ft(i[e],s,n);this._pendingStyles[e]=t,this._localTimelineStyles.hasOwnProperty(e)||(this._backFill[e]=this._globalTimelineStyles.hasOwnProperty(e)?this._globalTimelineStyles[e]:ve),this._updateStyle(e,t)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(t=>{this._currentKeyframe[t]=e[t]}),Object.keys(this._localTimelineStyles).forEach(e=>{this._currentKeyframe.hasOwnProperty(e)||(this._currentKeyframe[e]=this._localTimelineStyles[e])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],r=e._styleSummary[t];(!n||r.time>n.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((s,i)=>{const o=ot(s,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?e.add(n):r==ve&&t.add(n)}),n||(o.offset=i/this.duration),r.push(o)});const s=e.size?mt(e.values()):[],i=t.size?mt(t.values()):[];if(n){const e=r[0],t=it(e);e.offset=0,t.offset=1,r=[e,t]}return Dt(this.element,r,s,i,this.duration,this.startTime,this.easing,!1)}}class zt extends Bt{constructor(e,t,n,r,s,i,o=!1){super(e,t,i.delay),this.element=t,this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=o,this.timings={duration:i.duration,delay:i.delay,easing:i.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],i=n+t,o=t/i,a=ot(e[0],!1);a.offset=0,s.push(a);const l=ot(e[0],!1);l.offset=Ht(o),s.push(l);const u=e.length-1;for(let r=1;r<=u;r++){let o=ot(e[r],!1);o.offset=Ht((t+o.offset*n)/i),s.push(o)}n=i,t=0,r="",e=s}return Dt(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function Ht(e,t=3){const n=Math.pow(10,t-1);return Math.round(e*n)/n}class $t{}class Gt extends $t{normalizePropertyName(e,t){return yt(e)}normalizeStyleValue(e,t,n,r){let s="";const i=n.toString().trim();if(Zt[t]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const t=n.match(/^[+-]?[\d\.]+([a-z]*)$/);t&&0==t[1].length&&r.push(`Please provide a CSS unit value for ${e}:${n}`)}return i+s}}const Zt=(()=>function(e){const t={};return e.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Wt(e,t,n,r,s,i,o,a,l,u,c,h,d){return{type:0,element:e,triggerName:t,isRemovalTransition:s,fromState:n,fromStyles:i,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const Kt={};class Qt{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function(e,t,n,r,s){return e.some(e=>e(t,n,r,s))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){const r=this._stateStyles["*"],s=this._stateStyles[e],i=r?r.buildStyles(t,n):{};return s?s.buildStyles(t,n):i}build(e,t,n,r,s,i,o,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||Kt,d=this.buildStyles(n,o&&o.params||Kt,c),p=a&&a.params||Kt,f=this.buildStyles(r,p,c),m=new Set,g=new Map,y=new Map,_="void"===r,v={params:Object.assign(Object.assign({},h),p)},w=u?[]:Ut(e,t,this.ast.animation,s,i,d,f,v,l,c);let b=0;if(w.forEach(e=>{b=Math.max(e.duration+e.delay,b)}),c.length)return Wt(t,this._triggerName,n,r,_,d,f,[],[],g,y,b,c);w.forEach(e=>{const n=e.element,r=Le(g,n,{});e.preStyleProps.forEach(e=>r[e]=!0);const s=Le(y,n,{});e.postStyleProps.forEach(e=>s[e]=!0),n!==t&&m.add(n)});const T=mt(m.values());return Wt(t,this._triggerName,n,r,_,d,f,w,T,g,y,b)}}class Yt{constructor(e,t){this.styles=e,this.defaultParams=t}buildStyles(e,t){const n={},r=it(this.defaultParams);return Object.keys(e).forEach(t=>{const n=e[t];null!=n&&(r[t]=n)}),this.styles.styles.forEach(e=>{if("string"!=typeof e){const s=e;Object.keys(s).forEach(e=>{let i=s[e];i.length>1&&(i=ft(i,r,t)),n[e]=i})}}),n}}class Jt{constructor(e,t){this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(e=>{this.states[e.name]=new Yt(e.style,e.options&&e.options.params||{})}),Xt(this.states,"true","1"),Xt(this.states,"false","0"),t.transitions.forEach(t=>{this.transitionFactories.push(new Qt(e,t,this.states))}),this.fallbackTransition=new Qt(e,{type:1,animation:{type:2,steps:[],options:null},matchers:[(e,t)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(s=>s.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Xt(e,t,n){e.hasOwnProperty(t)?e.hasOwnProperty(n)||(e[n]=e[t]):e.hasOwnProperty(n)&&(e[t]=e[n])}const en=new Lt;class tn{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],r=xt(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=r}_buildPlayer(e,t,n){const r=e.element,s=Re(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations[e];let i;const o=new Map;if(s?(i=Ut(this._driver,t,s,Qe,Ye,{},{},n,en,r),i.forEach(e=>{const t=Le(o,e.element,{});e.postStyleProps.forEach(e=>t[e]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),i=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((e,t)=>{Object.keys(e).forEach(n=>{e[n]=this._driver.computeStyle(t,n,ve)})});const a=Ne(i.map(e=>{const t=o.get(e.element);return this._buildPlayer(e,{},t)}));return this._playersById[e]=a,a.onDestroy(()=>this.destroy(e)),this.players.push(a),a}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,r){const s=De(t,"","","");return Pe(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const nn="ng-animate-queued",rn="ng-animate-disabled",sn=".ng-animate-disabled",on=[],an={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ln={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class un{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const t=it(e);delete t.value,this.options=t}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const e=this.options.params;Object.keys(t).forEach(n=>{null==e[n]&&(e[n]=t[n])})}}}const cn="void",hn=new un(cn);class dn{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vn(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(s=n)&&"done"!=s)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var s;const i=Le(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};i.push(o);const a=Le(this._engine.statesByElement,e,{});return a.hasOwnProperty(t)||(vn(e,Je),vn(e,"ng-trigger-"+t),a[t]=hn),()=>{this._engine.afterFlush(()=>{const e=i.indexOf(o);e>=0&&i.splice(e,1),this._triggers[t]||delete a[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),i=new fn(this.id,t,e);let o=this._engine.statesByElement.get(e);o||(vn(e,Je),vn(e,"ng-trigger-"+t),this._engine.statesByElement.set(e,o={}));let a=o[t];const l=new un(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[t]=l,a||(a=hn),l.value!==cn&&a.value===l.value){if(!function(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!=r.length)return!1;for(let s=0;s<n.length;s++){const r=n[s];if(!t.hasOwnProperty(r)||e[r]!==t[r])return!1}return!0}(a.params,l.params)){const t=[],n=s.matchStyles(a.value,a.params,t),r=s.matchStyles(l.value,l.params,t);t.length?this._engine.reportError(t):this._engine.afterFlush(()=>{ct(e,n),ut(e,r)})}return}const u=Le(this._engine.playersByElement,e,[]);u.forEach(e=>{e.namespaceId==this.id&&e.triggerName==t&&e.queued&&e.destroy()});let c=s.matchTransition(a.value,l.value,e,l.params),h=!1;if(!c){if(!r)return;c=s.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:c,fromState:a,toState:l,player:i,isFallbackTransition:h}),h||(vn(e,nn),i.onStart(()=>{wn(e,nn)})),i.onDone(()=>{let t=this.players.indexOf(i);t>=0&&this.players.splice(t,1);const n=this._engine.playersByElement.get(e);if(n){let e=n.indexOf(i);e>=0&&n.splice(e,1)}}),this.players.push(i),u.push(i),i}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(t=>t.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(e=>e.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,Xe,!0);n.forEach(e=>{if(e.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(e);n.size?n.forEach(n=>n.triggerLeaveAnimation(e,t,!1,!0)):this.clearElementCache(e)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(e=>this.clearElementCache(e)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e);if(s){const i=[];if(Object.keys(s).forEach(t=>{if(this._triggers[t]){const n=this.trigger(e,t,cn,r);n&&i.push(n)}}),i.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&Ne(i).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(t=>{const s=t.name;if(r.has(s))return;r.add(s);const i=this._triggers[s].fallbackTransition,o=n[s]||hn,a=new un(cn),l=new fn(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:i,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const t=n.players.length?n.playersByQueriedElement.get(e):[];if(t&&t.length)r=!0;else{let t=e;for(;t=t.parentNode;)if(n.statesByElement.get(t)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const r=e.__ng_removed;r&&r!==an||(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){vn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,i=this._elementListeners.get(s);i&&i.forEach(t=>{if(t.name==n.triggerName){const r=De(s,n.triggerName,n.fromState.value,n.toState.value);r._data=e,Pe(n.player,t.phase,r,t.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((e,t)=>{const n=e.transition.ast.depCount,r=t.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(e.element,t.element)?1:-1})}destroy(e){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(t=>t.element===e)||t,t}}class pn{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(e,t)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,t){const n=new dn(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),r=!0;break}r||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const t=this._namespaceList.indexOf(n);t>=0&&this._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const e=Object.keys(n);for(let r=0;r<e.length;r++){const s=n[e[r]].namespaceId;if(s){const e=this._fetchNamespace(s);e&&t.add(e)}}}return t}trigger(e,t,n,r){if(mn(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!mn(t))return;const s=t.__ng_removed;if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const e=this.collectedLeaveElements.indexOf(t);e>=0&&this.collectedLeaveElements.splice(e,1)}if(e){const r=this._fetchNamespace(e);r&&r.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vn(e,rn)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wn(e,rn))}removeNode(e,t,n,r){if(mn(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const n=this.namespacesByHostElement.get(t);n&&n.id!==e&&n.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r){this.collectedLeaveElements.push(t),t.__ng_removed={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,r,s){return mn(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Xe,!0);t.forEach(e=>this.destroyActiveAnimationsForElement(e)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,tt,!0),t.forEach(e=>this.finishActiveQueriedAnimationOnElement(e)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(e=>{e.queued?e.markedForDestroy=!0:e.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(e=>e.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ne(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e.__ng_removed;if(t&&t.setForRemoval){if(e.__ng_removed=an,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,sn)&&this.markElementAsDisabled(e,!1),this.driver.query(e,sn,!0).forEach(e=>{this.markElementAsDisabled(e,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((e,t)=>this._balanceNamespaceList(e,t)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)vn(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let e=0;e<n.length;e++)n[e]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(e=>e()),this._flushFns=[],this._whenQuietFns.length){const e=this._whenQuietFns;this._whenQuietFns=[],t.length?Ne(t).onDone(()=>{e.forEach(e=>e())}):e.forEach(e=>e())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new Lt,r=[],s=new Map,i=[],o=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(e=>{u.add(e);const t=this.driver.query(e,".ng-animate-queued",!0);for(let n=0;n<t.length;n++)u.add(t[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=_n(h,this.collectedEnterElements),p=new Map;let f=0;d.forEach((e,t)=>{const n=Qe+f++;p.set(t,n),e.forEach(e=>vn(e,n))});const m=[],g=new Set,y=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const e=this.collectedLeaveElements[N],t=e.__ng_removed;t&&t.setForRemoval&&(m.push(e),g.add(e),t.hasAnimation?this.driver.query(e,".ng-star-inserted",!0).forEach(e=>g.add(e)):y.add(e))}const _=new Map,v=_n(h,Array.from(g));v.forEach((e,t)=>{const n=Ye+f++;_.set(t,n),e.forEach(e=>vn(e,n))}),e.push(()=>{d.forEach((e,t)=>{const n=p.get(t);e.forEach(e=>wn(e,n))}),v.forEach((e,t)=>{const n=_.get(t);e.forEach(e=>wn(e,n))}),m.forEach(e=>{this.processLeaveNode(e)})});const w=[],b=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(e=>{const t=e.player,s=e.element;if(w.push(t),this.collectedEnterElements.length){const e=s.__ng_removed;if(e&&e.setForMove)return void t.destroy()}const u=!c||!this.driver.containsElement(c,s),h=_.get(s),d=p.get(s),f=this._buildInstruction(e,n,d,h,u);if(f.errors&&f.errors.length)b.push(f);else{if(u)return t.onStart(()=>ct(s,f.fromStyles)),t.onDestroy(()=>ut(s,f.toStyles)),void r.push(t);if(e.isFallbackTransition)return t.onStart(()=>ct(s,f.fromStyles)),t.onDestroy(()=>ut(s,f.toStyles)),void r.push(t);f.timelines.forEach(e=>e.stretchStartingKeyframe=!0),n.append(s,f.timelines),i.push({instruction:f,player:t,element:s}),f.queriedElements.forEach(e=>Le(o,e,[]).push(t)),f.preStyleProps.forEach((e,t)=>{const n=Object.keys(e);if(n.length){let e=a.get(t);e||a.set(t,e=new Set),n.forEach(t=>e.add(t))}}),f.postStyleProps.forEach((e,t)=>{const n=Object.keys(e);let r=l.get(t);r||l.set(t,r=new Set),n.forEach(e=>r.add(e))})}});if(b.length){const e=[];b.forEach(t=>{e.push(`@${t.triggerName} has failed due to:\n`),t.errors.forEach(t=>e.push(`- ${t}\n`))}),w.forEach(e=>e.destroy()),this.reportError(e)}const T=new Map,I=new Map;i.forEach(e=>{const t=e.element;n.has(t)&&(I.set(t,t),this._beforeAnimationBuild(e.player.namespaceId,e.instruction,T))}),r.forEach(e=>{const t=e.element;this._getPreviousPlayers(t,!1,e.namespaceId,e.triggerName,null).forEach(e=>{Le(T,t,[]).push(e),e.destroy()})});const E=m.filter(e=>In(e,a,l)),S=new Map;yn(S,this.driver,y,l,ve).forEach(e=>{In(e,a,l)&&E.push(e)});const C=new Map;d.forEach((e,t)=>{yn(C,this.driver,new Set(e),a,"!")}),E.forEach(e=>{const t=S.get(e),n=C.get(e);S.set(e,Object.assign(Object.assign({},t),n))});const k=[],x=[],A={};i.forEach(e=>{const{element:t,player:i,instruction:o}=e;if(n.has(t)){if(u.has(t))return i.onDestroy(()=>ut(t,o.toStyles)),i.disabled=!0,i.overrideTotalTime(o.totalTime),void r.push(i);let e=A;if(I.size>1){let n=t;const r=[];for(;n=n.parentNode;){const t=I.get(n);if(t){e=t;break}r.push(n)}r.forEach(t=>I.set(t,e))}const n=this._buildAnimation(i.namespaceId,o,T,s,C,S);if(i.setRealPlayer(n),e===A)k.push(i);else{const t=this.playersByElement.get(e);t&&t.length&&(i.parentPlayer=Ne(t)),r.push(i)}}else ct(t,o.fromStyles),i.onDestroy(()=>ut(t,o.toStyles)),x.push(i),u.has(t)&&r.push(i)}),x.forEach(e=>{const t=s.get(e.element);if(t&&t.length){const n=Ne(t);e.setRealPlayer(n)}}),r.forEach(e=>{e.parentPlayer?e.syncPlayerEvents(e.parentPlayer):e.destroy()});for(let N=0;N<m.length;N++){const e=m[N],t=e.__ng_removed;if(wn(e,Ye),t&&t.hasAnimation)continue;let n=[];if(o.size){let t=o.get(e);t&&t.length&&n.push(...t);let r=this.driver.query(e,tt,!0);for(let e=0;e<r.length;e++){let t=o.get(r[e]);t&&t.length&&n.push(...t)}}const r=n.filter(e=>!e.destroyed);r.length?bn(this,e,r):this.processLeaveNode(e)}return m.length=0,k.forEach(e=>{this.players.push(e),e.onDone(()=>{e.destroy();const t=this.players.indexOf(e);this.players.splice(t,1)}),e.play()}),k}elementContainsData(e,t){let n=!1;const r=t.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let i=[];if(t){const t=this.playersByQueriedElement.get(e);t&&(i=t)}else{const t=this.playersByElement.get(e);if(t){const e=!s||s==cn;t.forEach(t=>{t.queued||(e||t.triggerName==r)&&i.push(t)})}}return(n||r)&&(i=i.filter(e=>!(n&&n!=e.namespaceId||r&&r!=e.triggerName))),i}_beforeAnimationBuild(e,t,n){const r=t.element,s=t.isRemovalTransition?void 0:e,i=t.isRemovalTransition?void 0:t.triggerName;for(const o of t.timelines){const e=o.element,a=e!==r,l=Le(n,e,[]);this._getPreviousPlayers(e,a,s,i,t.toState).forEach(e=>{const t=e.getRealPlayer();t.beforeDestroy&&t.beforeDestroy(),e.destroy(),l.push(e)})}ct(r,t.fromStyles)}_buildAnimation(e,t,n,r,s,i){const o=t.triggerName,a=t.element,l=[],u=new Set,c=new Set,h=t.timelines.map(t=>{const h=t.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Ce(t.duration,t.delay);const p=h!==a,f=function(e){const t=[];return Tn(e,t),t}((n.get(h)||on).map(e=>e.getRealPlayer())).filter(e=>!!e.element&&e.element===h),m=s.get(h),g=i.get(h),y=Re(0,this._normalizer,0,t.keyframes,m,g),_=this._buildPlayer(t,y,f);if(t.subTimeline&&r&&c.add(h),p){const t=new fn(e,o,h);t.setRealPlayer(_),l.push(t)}return _});l.forEach(e=>{Le(this.playersByQueriedElement,e.element,[]).push(e),e.onDone(()=>function(e,t,n){let r;if(e instanceof Map){if(r=e.get(t),r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&e.delete(t)}}else if(r=e[t],r){if(r.length){const e=r.indexOf(n);r.splice(e,1)}0==r.length&&delete e[t]}return r}(this.playersByQueriedElement,e.element,e))}),u.forEach(e=>vn(e,et));const d=Ne(h);return d.onDestroy(()=>{u.forEach(e=>wn(e,et)),ut(a,t.toStyles)}),c.forEach(e=>{Le(r,e,[]).push(d)}),d}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Ce(e.duration,e.delay)}}class fn{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Ce,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Pe(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Le(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mn(e){return e&&1===e.nodeType}function gn(e,t){const n=e.style.display;return e.style.display=null!=t?t:"none",n}function yn(e,t,n,r,s){const i=[];n.forEach(e=>i.push(gn(e)));const o=[];r.forEach((n,r)=>{const i={};n.forEach(e=>{const n=i[e]=t.computeStyle(r,e,s);n&&0!=n.length||(r.__ng_removed=ln,o.push(r))}),e.set(r,i)});let a=0;return n.forEach(e=>gn(e,i[a++])),o}function _n(e,t){const n=new Map;if(e.forEach(e=>n.set(e,[])),0==t.length)return n;const r=new Set(t),s=new Map;function i(e){if(!e)return 1;let t=s.get(e);if(t)return t;const o=e.parentNode;return t=n.has(o)?o:r.has(o)?1:i(o),s.set(e,t),t}return t.forEach(e=>{const t=i(e);1!==t&&n.get(t).push(e)}),n}function vn(e,t){if(e.classList)e.classList.add(t);else{let n=e.$$classes;n||(n=e.$$classes={}),n[t]=!0}}function wn(e,t){if(e.classList)e.classList.remove(t);else{let n=e.$$classes;n&&delete n[t]}}function bn(e,t,n){Ne(n).onDone(()=>e.processLeaveNode(t))}function Tn(e,t){for(let n=0;n<e.length;n++){const r=e[n];r instanceof ke?Tn(r.players,t):t.push(r)}}function In(e,t,n){const r=n.get(e);if(!r)return!1;let s=t.get(e);return s?r.forEach(e=>s.add(e)):t.set(e,r),n.delete(e),!0}class En{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._triggerCache={},this.onRemovalComplete=(e,t)=>{},this._transitionEngine=new pn(e,t,n),this._timelineEngine=new tn(e,t,n),this._transitionEngine.onRemovalComplete=(e,t)=>this.onRemovalComplete(e,t)}registerTrigger(e,t,n,r,s){const i=e+"-"+r;let o=this._triggerCache[i];if(!o){const e=[],t=xt(this._driver,s,e);if(e.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${e.join("\n - ")}`);o=function(e,t){return new Jt(e,t)}(r,t),this._triggerCache[i]=o}this._transitionEngine.registerTrigger(t,r,o)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[e,s]=Fe(n);this._timelineEngine.command(e,t,s,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[e,r]=Fe(n);return this._timelineEngine.listen(e,t,r,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Sn(e,t){let n=null,r=null;return Array.isArray(t)&&t.length?(n=kn(t[0]),t.length>1&&(r=kn(t[t.length-1]))):t&&(n=kn(t)),n||r?new Cn(e,n,r):null}let Cn=(()=>{class e{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=e.initialStylesByElement.get(t);s||e.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ut(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ut(this._element,this._initialStyles),this._endStyles&&(ut(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ct(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ct(this._element,this._endStyles),this._endStyles=null),ut(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function kn(e){let t=null;const n=Object.keys(e);for(let r=0;r<n.length;r++){const s=n[r];xn(s)&&(t=t||{},t[s]=e[s])}return t}function xn(e){return"display"===e||"position"===e}const An="animation",Nn="animationend";class Rn{constructor(e,t,n,r,s,i,o){this._element=e,this._name=t,this._duration=n,this._delay=r,this._easing=s,this._fillMode=i,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=e=>this._handleCallback(e)}apply(){!function(e,t){const n=Mn(e,"").trim();n.length&&(function(e,t){let n=0;for(let r=0;r<e.length;r++)","===e.charAt(r)&&n++}(n),t=`${n}, ${t}`),Fn(e,"",t)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Ln(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Pn(this._element,this._name,"paused")}resume(){Pn(this._element,this._name,"running")}setPosition(e){const t=On(this._element,this._name);this._position=e*this._duration,Fn(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Ln(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(e,t){const n=Mn(e,"").split(","),r=Dn(n,t);r>=0&&(n.splice(r,1),Fn(e,"",n.join(",")))}(this._element,this._name))}}function Pn(e,t,n){Fn(e,"PlayState",n,On(e,t))}function On(e,t){const n=Mn(e,"");return n.indexOf(",")>0?Dn(n.split(","),t):Dn([n],t)}function Dn(e,t){for(let n=0;n<e.length;n++)if(e[n].indexOf(t)>=0)return n;return-1}function Ln(e,t,n){n?e.removeEventListener(Nn,t):e.addEventListener(Nn,t)}function Fn(e,t,n,r){const s=An+t;if(null!=r){const t=e.style[s];if(t.length){const e=t.split(",");e[r]=n,n=e.join(",")}}e.style[s]=n}function Mn(e,t){return e.style[An+t]||""}class Un{constructor(e,t,n,r,s,i,o,a){this.element=e,this.keyframes=t,this.animationName=n,this._duration=r,this._delay=s,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=i||"linear",this.totalTime=r+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Rn(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:bt(this.element,n))})}this.currentSnapshot=e}}class jn extends Ce{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Ze(t)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class qn{constructor(){this._count=0}validateStyleProperty(e){return ze(e)}matchesElement(e,t){return He(e,t)}containsElement(e,t){return $e(e,t)}query(e,t,n){return Ge(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(e=>Ze(e));let r=`@keyframes ${t} {\n`,s="";n.forEach(e=>{s=" ";const t=parseFloat(e.offset);r+=`${s}${100*t}% {\n`,s+=" ",Object.keys(e).forEach(t=>{const n=e[t];switch(t){case"offset":return;case"easing":return void(n&&(r+=`${s}animation-timing-function: ${n};\n`));default:return void(r+=`${s}${t}: ${n};\n`)}}),r+=`${s}}\n`}),r+="}\n";const i=document.createElement("style");return i.textContent=r,i}animate(e,t,n,r,s,i=[],o){const a=i.filter(e=>e instanceof Un),l={};_t(n,r)&&a.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const u=function(e){let t={};return e&&(Array.isArray(e)?e:[e]).forEach(e=>{Object.keys(e).forEach(n=>{"offset"!=n&&"easing"!=n&&(t[n]=e[n])})}),t}(t=vt(e,t,l));if(0==n)return new jn(e,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(e,c,t);(function(e){var t;const n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(e).appendChild(h);const d=Sn(e,t),p=new Un(e,t,c,n,r,s,u,d);return p.onDestroy(()=>{var e;(e=h).parentNode.removeChild(e)}),p}}class Vn{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:bt(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(e=>e()),t.length=0}}class Bn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(zn().toString()),this._cssKeyframesDriver=new qn}validateStyleProperty(e){return ze(e)}matchesElement(e,t){return He(e,t)}containsElement(e,t){return $e(e,t)}query(e,t,n){return Ge(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,r,s,i=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,r,s,i);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(a.easing=s);const l={},u=i.filter(e=>e instanceof Vn);_t(n,r)&&u.forEach(e=>{let t=e.currentSnapshot;Object.keys(t).forEach(e=>l[e]=t[e])});const c=Sn(e,t=vt(e,t=t.map(e=>ot(e,!1)),l));return new Vn(e,t,a,c)}}function zn(){return xe()&&Element.prototype.animate||{}}let Hn=(()=>{class e extends _e{constructor(e,t){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(t.body,{id:"0",encapsulation:r.ifc.None,styles:[],data:{animation:[]}})}build(e){const t=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(e)?be(e):e;return Zn(this._renderer,null,t,"register",[n]),new $n(t,this._renderer)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class $n extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Gn(this._id,e,t||{},this._renderer)}}class Gn{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Zn(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Zn(e,t,n,r,s){return e.setProperty(t,`@@${n}:${r}`,s)}const Wn="@",Kn="@.disabled";let Qn=(()=>{class e{constructor(e,t,n){this.delegate=e,this.engine=t,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),t.onRemovalComplete=(e,t)=>{t&&t.parentNode(e)&&t.removeChild(e.parentNode,e)}}createRenderer(e,t){const n=this.delegate.createRenderer(e,t);if(!(e&&t&&t.data&&t.data.animation)){let e=this._rendererCache.get(n);return e||(e=new Yn("",n,this.engine),this._rendererCache.set(n,e)),e}const r=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const i=t=>{Array.isArray(t)?t.forEach(i):this.engine.registerTrigger(r,s,e,t.name,t)};return t.data.animation.forEach(i),new Jn(this,s,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,n){e>=0&&e<this._microtaskId?this._zone.run(()=>t(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(e=>{const[t,n]=e;t(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([t,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo),r.LFG(En),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class Yn{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?e=>t.destroyNode(e):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){t.charAt(0)==Wn&&t==Kn?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Jn extends Yn{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){t.charAt(0)==Wn?"."==t.charAt(1)&&t==Kn?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if(t.charAt(0)==Wn){const r=function(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(e);let s=t.substr(1),i="";return s.charAt(0)!=Wn&&([s,i]=function(e){const t=e.indexOf(".");return[e.substring(0,t),e.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,i,e=>{this.factory.scheduleListenerCallback(e._data||-1,n,e)})}return this.delegate.listen(e,t,n)}}let Xn=(()=>{class e extends En{constructor(e,t,n){super(e.body,t,n)}ngOnDestroy(){this.flush()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o),r.LFG(Ke),r.LFG($t))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const er=new r.OlP("AnimationModuleType"),tr=[{provide:_e,useClass:Hn},{provide:$t,useFactory:function(){return new Gt}},{provide:En,useClass:Xn},{provide:r.FYo,useFactory:function(e,t,n){return new Qn(e,t,n)},deps:[ne,En,r.R0b]}],nr=[{provide:Ke,useFactory:function(){return"function"==typeof zn()?new Bn:new qn}},{provide:er,useValue:"BrowserAnimations"},...tr],rr=[{provide:Ke,useClass:We},{provide:er,useValue:"NoopAnimations"},...tr];let sr=(()=>{class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?rr:nr}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:nr,imports:[ye]}),e})();var ir=n(9764),or=n(878),ar=n(5959),lr=n(3895);class ur extends ar.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new lr.N;return this._value}next(e){super.next(this._value=e)}}var cr=n(6163),hr=n(8470),dr=n(6673);class pr extends dr.L{notifyNext(e,t,n,r,s){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class fr extends dr.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var mr=n(6015),gr=n(8318);function yr(e,t,n,r,s=new fr(e,n,r)){if(!s.closed)return t instanceof gr.y?t.subscribe(s):(0,mr.s)(t)(s)}var _r=n(9342);const vr={};class wr{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new br(e,this.resultSelector))}}class br extends pr{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(vr),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(yr(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,s=this.toRespond?r[n]===vr?--this.toRespond:this.toRespond:0;r[n]=t,0===s&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Tr=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var Ir=n(7471);function Er(...e){return(0,Ir.J)(1)((0,or.of)(...e))}var Sr=n(653);function Cr(e){return new gr.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,ir.D)(n):(0,Sr.c)()).subscribe(t)})}var kr=n(2875),xr=n(9996),Ar=n(6882);function Nr(e,t){return"function"==typeof t?n=>n.pipe(Nr((n,r)=>(0,ir.D)(e(n,r)).pipe((0,xr.U)((e,s)=>t(n,e,r,s))))):t=>t.lift(new Rr(e))}class Rr{constructor(e){this.project=e}call(e,t){return t.subscribe(new Pr(e,this.project))}}class Pr extends Ar.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(VI){return void this.destination.error(VI)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new Ar.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ar.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const Or=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function Dr(e){return t=>0===e?(0,Sr.c)():t.lift(new Lr(e))}class Lr{constructor(e){if(this.total=e,this.total<0)throw new Or}call(e,t){return t.subscribe(new Fr(e,this.total))}}class Fr extends dr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function Mr(...e){const t=e[e.length-1];return(0,cr.K)(t)?(e.pop(),n=>Er(e,n,t)):t=>Er(e,t)}function Ur(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new jr(e,t,n))}}class jr{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new qr(e,this.accumulator,this.seed,this.hasSeed))}}class qr extends dr.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Vr(e,t){return function(n){return n.lift(new Br(e,t))}}class Br{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new zr(e,this.predicate,this.thisArg))}}class zr extends dr.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function Hr(e){return function(t){const n=new $r(e),r=t.lift(n);return n.caught=r}}class $r{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Gr(e,this.selector,this.caught))}}class Gr extends Ar.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new Ar.IY(this);this.add(r);const s=(0,Ar.ft)(n,r);s!==r&&this.add(s)}}}var Zr=n(3982);function Wr(e,t){return(0,Zr.zg)(e,t,1)}function Kr(e){return function(t){return 0===e?(0,Sr.c)():t.lift(new Qr(e))}}class Qr{constructor(e){if(this.total=e,this.total<0)throw new Or}call(e,t){return t.subscribe(new Yr(e,this.total))}}class Yr extends dr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let s=0;s<n;s++){const s=t++%n;e.next(r[s])}}e.complete()}}function Jr(e=ts){return t=>t.lift(new Xr(e))}class Xr{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new es(e,this.errorFactory))}}class es extends dr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function ts(){return new Tr}function ns(e=null){return t=>t.lift(new rs(e))}class rs{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new ss(e,this.defaultValue))}}class ss extends dr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var is=n(3392);function os(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Vr((t,n)=>e(t,n,r)):is.y,Dr(1),n?ns(t):Jr(()=>new Tr))}var as=n(6599),ls=n(1564),us=n(7570);function cs(e){return t=>t.lift(new hs(e))}class hs{constructor(e){this.callback=e}call(e,t){return t.subscribe(new ds(e,this.callback))}}class ds extends dr.L{constructor(e,t){super(e),this.add(new us.w(t))}}class ps{constructor(e,t){this.id=e,this.url=t}}class fs extends ps{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ms extends ps{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gs extends ps{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ys extends ps{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _s extends ps{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vs extends ps{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ws extends ps{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class bs extends ps{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ts extends ps{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Es{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ss{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cs{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ks{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class As{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ns="primary";class Rs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ps(e){return new Rs(e)}function Os(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function Ds(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const s={};for(let i=0;i<r.length;i++){const t=r[i],n=e[i];if(t.startsWith(":"))s[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:s}}function Ls(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let s;for(let i=0;i<n.length;i++)if(s=n[i],!Fs(e[s],t[s]))return!1;return!0}function Fs(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Ms(e){return Array.prototype.concat.apply([],e)}function Us(e){return e.length>0?e[e.length-1]:null}function js(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function qs(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,ir.D)(Promise.resolve(e)):(0,or.of)(e)}const Vs={exact:function e(t,n,r){if(!Qs(t.segments,n.segments))return!1;if(!Gs(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children){if(!t.children[s])return!1;if(!e(t.children[s],n.children[s],r))return!1}return!0},subset:Hs},Bs={exact:function(e,t){return Ls(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Fs(e[n],t[n]))},ignored:()=>!0};function zs(e,t,n){return Vs[n.paths](e.root,t.root,n.matrixParams)&&Bs[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Hs(e,t,n){return $s(e,t,t.segments,n)}function $s(e,t,n,r){if(e.segments.length>n.length){const s=e.segments.slice(0,n.length);return!!Qs(s,n)&&!t.hasChildren()&&!!Gs(s,n,r)}if(e.segments.length===n.length){if(!Qs(e.segments,n))return!1;if(!Gs(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!Hs(e.children[n],t.children[n],r))return!1}return!0}{const s=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!!Qs(e.segments,s)&&!!Gs(e.segments,s,r)&&!!e.children.primary&&$s(e.children.primary,t,i,r)}}function Gs(e,t,n){return t.every((t,r)=>Bs[n](e[r].parameters,t.parameters))}class Zs{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ps(this.queryParams)),this._queryParamMap}toString(){return Xs.serialize(this)}}class Ws{constructor(e,t){this.segments=e,this.children=t,this.parent=null,js(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ei(this)}}class Ks{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ps(this.parameters)),this._parameterMap}toString(){return ai(this)}}function Qs(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Ys{}class Js{parse(e){const t=new di(e);return new Zs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${ti(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${ri(t)}=${ri(e)}`).join("&"):`${ri(t)}=${ri(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const Xs=new Js;function ei(e){return e.segments.map(e=>ai(e)).join("/")}function ti(e,t){if(!e.hasChildren())return ei(e);if(t){const t=e.children.primary?ti(e.children.primary,!1):"",n=[];return js(e.children,(e,t)=>{t!==Ns&&n.push(`${t}:${ti(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return js(e.children,(e,r)=>{r===Ns&&(n=n.concat(t(e,r)))}),js(e.children,(e,r)=>{r!==Ns&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===Ns?[ti(e.children.primary,!1)]:[`${n}:${ti(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children.primary?`${ei(e)}/${t[0]}`:`${ei(e)}/(${t.join("//")})`}}function ni(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ri(e){return ni(e).replace(/%3B/gi,";")}function si(e){return ni(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ii(e){return decodeURIComponent(e)}function oi(e){return ii(e.replace(/\+/g,"%20"))}function ai(e){return`${si(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${si(e)}=${si(t[e])}`).join("")}`;var t}const li=/^[^\/()?;=#]+/;function ui(e){const t=e.match(li);return t?t[0]:""}const ci=/^[^=?&#]+/,hi=/^[^?&#]+/;class di{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ws([],{}):new Ws([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n.primary=new Ws(e,t)),n}parseSegment(){const e=ui(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ks(ii(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ui(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=ui(this.remaining);e&&(n=e,this.capture(n))}e[ii(t)]=ii(n)}parseQueryParam(e){const t=function(e){const t=e.match(ci);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(hi);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=oi(t),s=oi(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ui(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;n.indexOf(":")>-1?(s=n.substr(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ns);const i=this.parseChildren();t[s]=1===Object.keys(i).length?i.primary:new Ws([],i),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class pi{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fi(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=fi(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=mi(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return mi(e,this._root).map(e=>e.value)}}function fi(e,t){if(e===t.value)return t;for(const n of t.children){const t=fi(e,n);if(t)return t}return null}function mi(e,t){if(e===t.value)return[t];for(const n of t.children){const r=mi(e,n);if(r.length)return r.unshift(t),r}return[]}class gi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yi(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class _i extends pi{constructor(e,t){super(e),this.snapshot=t,Ei(this,e)}toString(){return this.snapshot.toString()}}function vi(e,t){const n=function(e,t){const n=new Ti([],{},{},"",{},Ns,t,null,e.root,-1,{});return new Ii("",new gi(n,[]))}(e,t),r=new ur([new Ks("",{})]),s=new ur({}),i=new ur({}),o=new ur({}),a=new ur(""),l=new wi(r,s,o,a,i,Ns,t,n.root);return l.snapshot=n.root,new _i(new gi(l,[]),n)}class wi{constructor(e,t,n,r,s,i,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xr.U)(e=>Ps(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xr.U)(e=>Ps(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bi(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ti{constructor(e,t,n,r,s,i,o,a,l,u,c){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=i,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ps(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ps(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ii extends pi{constructor(e,t){super(t),this.url=e,Ei(this,t)}toString(){return Si(this._root)}}function Ei(e,t){t.value._routerState=e,t.children.forEach(t=>Ei(e,t))}function Si(e){const t=e.children.length>0?` { ${e.children.map(Si).join(", ")} } `:"";return`${e.value}${t}`}function Ci(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ls(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ls(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ls(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ls(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function ki(e,t){return Ls(e.params,t.params)&&function(e,t){return Qs(e,t)&&e.every((e,n)=>Ls(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||ki(e.parent,t.parent))}function xi(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const s=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return xi(e,t,r);return xi(e,t)})}(e,t,n);return new gi(r,s)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return Ai(t,e),e}}const n=new wi(new ur((r=t.value).url),new ur(r.params),new ur(r.queryParams),new ur(r.fragment),new ur(r.data),r.outlet,r.component,r),s=t.children.map(t=>xi(e,t));return new gi(n,s)}var r}function Ai(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)Ai(e.children[n],t.children[n])}function Ni(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ri(e){return"object"==typeof e&&null!=e&&e.outlets}function Pi(e,t,n,r,s){let i={};return r&&js(r,(e,t)=>{i[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Zs(n.root===e?t:Oi(n.root,e,t),i,s)}function Oi(e,t,n){const r={};return js(e.children,(e,s)=>{r[s]=e===t?n:Oi(e,t,n)}),new Ws(e.segments,r)}class Di{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Ni(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Ri);if(r&&r!==Us(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Li{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Fi(e,t,n){if(e||(e=new Ws([],{})),0===e.segments.length&&e.hasChildren())return Mi(e,t,n);const r=function(e,t,n){let r=0,s=t;const i={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(r>=n.length)return i;const t=e.segments[s],o=n[r];if(Ri(o))break;const a=`${o}`,l=r<n.length-1?n[r+1]:null;if(s>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Vi(a,l,t))return i;r+=2}else{if(!Vi(a,{},t))return i;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(e,t,n),s=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new Ws(e.segments.slice(0,r.pathIndex),{});return t.children.primary=new Ws(e.segments.slice(r.pathIndex),e.children),Mi(t,0,s)}return r.match&&0===s.length?new Ws(e.segments,{}):r.match&&!e.hasChildren()?Ui(e,t,n):r.match?Mi(e,0,s):Ui(e,t,n)}function Mi(e,t,n){if(0===n.length)return new Ws(e.segments,{});{const r=function(e){return Ri(e[0])?e[0].outlets:{[Ns]:e}}(n),s={};return js(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(s[r]=Fi(e.children[r],t,n))}),js(e.children,(e,t)=>{void 0===r[t]&&(s[t]=e)}),new Ws(e.segments,s)}}function Ui(e,t,n){const r=e.segments.slice(0,t);let s=0;for(;s<n.length;){const i=n[s];if(Ri(i)){const e=ji(i.outlets);return new Ws(r,e)}if(0===s&&Ni(n[0])){r.push(new Ks(e.segments[t].path,qi(n[0]))),s++;continue}const o=Ri(i)?i.outlets.primary:`${i}`,a=s<n.length-1?n[s+1]:null;o&&a&&Ni(a)?(r.push(new Ks(o,qi(a))),s+=2):(r.push(new Ks(o,{})),s++)}return new Ws(r,{})}function ji(e){const t={};return js(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Ui(new Ws([],{}),0,e))}),t}function qi(e){const t={};return js(e,(e,n)=>t[n]=`${e}`),t}function Vi(e,t,n){return e==n.path&&Ls(t,n.parameters)}class Bi{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Ci(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=yi(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),js(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=yi(e);for(const i of Object.keys(s))this.deactivateRouteAndItsChildren(s[i],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=yi(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new xs(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Cs(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(Ci(r),r===s)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),zi(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),s=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=s,t.outlet&&t.outlet.activateWith(r,s),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function zi(e){Ci(e.value),e.children.forEach(zi)}class Hi{constructor(e,t){this.routes=e,this.module=t}}function $i(e){return"function"==typeof e}function Gi(e){return e instanceof Zs}const Zi=Symbol("INITIAL_VALUE");function Wi(){return Nr(e=>function(...e){let t,n;return(0,cr.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,hr.k)(e[0])&&(e=e[0]),(0,_r.n)(e,n).lift(new wr(t))}(e.map(e=>e.pipe(Dr(1),Mr(Zi)))).pipe(Ur((e,t)=>{let n=!1;return t.reduce((e,r,s)=>{if(e!==Zi)return e;if(r===Zi&&(n=!0),!n){if(!1===r)return r;if(s===t.length-1||Gi(r))return r}return e},e)},Zi),Vr(e=>e!==Zi),(0,xr.U)(e=>Gi(e)?e:!0===e),Dr(1)))}let Ki=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[Ho]},encapsulation:2}),e})();function Qi(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Yi(r,Ji(t,r))}}function Yi(e,t){e.children&&Qi(e.children,t)}function Ji(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Xi(e){const t=e.children&&e.children.map(Xi),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ns&&(n.component=Ki),n}function eo(e){return e.outlet||Ns}function to(e,t){const n=e.filter(e=>eo(e)===t);return n.push(...e.filter(e=>eo(e)!==t)),n}const no={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ro(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},no):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Ds)(n,e,t);if(!s)return Object.assign({},no);const i={};js(s.posParams,(e,t)=>{i[t]=e.path});const o=s.consumed.length>0?Object.assign(Object.assign({},i),s.consumed[s.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:o,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function so(e,t,n,r,s="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>io(e,t,n)&&eo(n)!==Ns)}(e,n,r)){const s=new Ws(t,function(e,t,n,r){const s={};s.primary=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const i of n)if(""===i.path&&eo(i)!==Ns){const n=new Ws([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,s[eo(i)]=n}return s}(e,t,r,new Ws(n,e.children)));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>io(e,t,n))}(e,n,r)){const i=new Ws(e.segments,function(e,t,n,r,s,i){const o={};for(const a of r)if(io(e,n,a)&&!s[eo(a)]){const n=new Ws([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===i?e.segments.length:t.length,o[eo(a)]=n}return Object.assign(Object.assign({},s),o)}(e,t,n,r,e.children,s));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}const i=new Ws(e.segments,e.children);return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:n}}function io(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function oo(e,t,n,r){return!!(eo(e)===r||r!==Ns&&io(t,n,e))&&("**"===e.path||ro(t,e,n).matched)}function ao(e,t,n){return 0===t.length&&!e.children[n]}class lo{constructor(e){this.segmentGroup=e||null}}class uo{constructor(e){this.urlTree=e}}function co(e){return new gr.y(t=>t.error(new lo(e)))}function ho(e){return new gr.y(t=>t.error(new uo(e)))}function po(e){return new gr.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class fo{constructor(e,t,n,s,i){this.configLoader=t,this.urlSerializer=n,this.urlTree=s,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=so(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ws(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ns).pipe((0,xr.U)(e=>this.createUrlTree(mo(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Hr(e=>{if(e instanceof uo)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof lo)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ns).pipe((0,xr.U)(t=>this.createUrlTree(mo(t),e.queryParams,e.fragment))).pipe(Hr(e=>{if(e instanceof lo)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new Ws([],{[Ns]:e}):e;return new Zs(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,xr.U)(e=>new Ws([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return(0,ir.D)(r).pipe(Wr(r=>{const s=n.children[r],i=to(t,r);return this.expandSegmentGroup(e,i,s,r).pipe((0,xr.U)(e=>({segment:e,outlet:r})))}),Ur((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Vr((t,n)=>e(t,n,r)):is.y,Kr(1),n?ns(t):Jr(()=>new Tr))}())}expandSegment(e,t,n,r,s,i){return(0,ir.D)(n).pipe(Wr(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,s,i).pipe(Hr(e=>{if(e instanceof lo)return(0,or.of)(null);throw e}))),os(e=>!!e),Hr((e,n)=>{if(e instanceof Tr||"EmptyError"===e.name){if(ao(t,r,s))return(0,or.of)(new Ws([],{}));throw new lo(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,s,i,o){return oo(r,t,s,i)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,i):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i):co(t):co(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?ho(s):this.lineralizeSegments(n,s).pipe((0,Zr.zg)(n=>{const s=new Ws(n,{});return this.expandSegment(e,s,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,i){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:u}=ro(t,r,s);if(!o)return co(t);const c=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?ho(c):this.lineralizeSegments(r,c).pipe((0,Zr.zg)(r=>this.expandSegment(e,t,n,r.concat(s.slice(l)),i,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,or.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,xr.U)(e=>(n._loadedConfig=e,new Ws(r,{})))):(0,or.of)(new Ws(r,{}));const{matched:i,consumedSegments:o,lastChild:a}=ro(t,n,r);if(!i)return co(t);const l=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,Zr.zg)(e=>{const r=e.module,i=e.routes,{segmentGroup:a,slicedSegments:u}=so(t,o,l,i),c=new Ws(a.segments,a.children);if(0===u.length&&c.hasChildren())return this.expandChildren(r,i,c).pipe((0,xr.U)(e=>new Ws(o,e)));if(0===i.length&&0===u.length)return(0,or.of)(new Ws(o,{}));const h=eo(n)===s;return this.expandSegment(r,c,i,u,h?Ns:s,!0).pipe((0,xr.U)(e=>new Ws(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,or.of)(new Hi(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,or.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,Zr.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,xr.U)(e=>(t._loadedConfig=e,e))):function(e){return new gr.y(t=>t.error(Os(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,or.of)(new Hi([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,or.of)(!0);const s=r.map(r=>{const s=e.get(r);let i;if(function(e){return e&&$i(e.canLoad)}(s))i=s.canLoad(t,n);else{if(!$i(s))throw new Error("Invalid CanLoad guard");i=s(t,n)}return qs(i)});return(0,or.of)(s).pipe(Wi(),(0,as.b)(e=>{if(!Gi(e))return;const t=Os(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,xr.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,or.of)(n);if(r.numberOfChildren>1||!r.children.primary)return po(e.redirectTo);r=r.children.primary}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Zs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return js(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const s=e.substring(1);n[r]=t[s]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let i={};return js(t.children,(t,s)=>{i[s]=this.createSegmentGroup(e,t,n,r)}),new Ws(s,i)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function mo(e){const t={};for(const n of Object.keys(e.children)){const r=mo(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children.primary){const t=e.children.primary;return new Ws(e.segments.concat(t.segments),t.children)}return e}(new Ws(e.segments,t))}class go{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yo{constructor(e,t){this.component=e,this.route=t}}function _o(e,t,n){const r=e._root;return wo(r,t?t._root:null,n,[r.value])}function vo(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function wo(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=yi(t);return e.children.forEach(e=>{!function(e,t,n,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const i=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const l=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Qs(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Qs(e.url,t.url)||!Ls(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ki(e,t)||!Ls(e.queryParams,t.queryParams);case"paramsChange":default:return!ki(e,t)}}(o,i,i.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new go(r)):(i.data=o.data,i._resolvedData=o._resolvedData),wo(e,t,i.component?a?a.children:null:n,r,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new yo(a.outlet.component,o))}else o&&bo(t,a,s),s.canActivateChecks.push(new go(r)),wo(e,null,i.component?a?a.children:null:n,r,s)}(e,i[e.value.outlet],n,r.concat([e.value]),s),delete i[e.value.outlet]}),js(i,(e,t)=>bo(e,n.getContext(t),s)),s}function bo(e,t,n){const r=yi(e),s=e.value;js(r,(e,r)=>{bo(e,s.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new yo(s.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,s))}class To{}function Io(e){return new gr.y(t=>t.error(e))}class Eo{constructor(e,t,n,r,s,i){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=i}recognize(){const e=so(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ns);if(null===t)return null;const n=new Ti([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ns,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new gi(n,t),s=new Ii(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,n=bi(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const s of Object.keys(t.children)){const r=t.children[s],i=to(e,s),o=this.processSegmentGroup(i,r,s);if(null===o)return null;n.push(...o)}const r=Co(n);return r.sort((e,t)=>e.value.outlet===Ns?-1:t.value.outlet===Ns?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const s of e){const e=this.processSegmentAgainstRoute(s,t,n,r);if(null!==e)return e}return ao(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!oo(e,t,n,r))return null;let s,i=[],o=[];if("**"===e.path){const r=n.length>0?Us(n).parameters:{};s=new Ti(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ao(e),eo(e),e.component,e,ko(t),xo(t)+n.length,No(e))}else{const r=ro(t,e,n);if(!r.matched)return null;i=r.consumedSegments,o=n.slice(r.lastChild),s=new Ti(i,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ao(e),eo(e),e.component,e,ko(t),xo(t)+i.length,No(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:l,slicedSegments:u}=so(t,i,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const e=this.processChildren(a,l);return null===e?null:[new gi(s,e)]}if(0===a.length&&0===u.length)return[new gi(s,[])];const c=eo(e)===r,h=this.processSegment(a,l,u,c?Ns:r);return null===h?null:[new gi(s,h)]}}function So(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Co(e){const t=[],n=new Set;for(const r of e){if(!So(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=Co(r.children);t.push(new gi(r.value,e))}return t.filter(e=>!n.has(e))}function ko(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function xo(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Ao(e){return e.data||{}}function No(e){return e.resolve||{}}function Ro(e){return Nr(t=>{const n=e(t);return n?(0,ir.D)(n).pipe((0,xr.U)(()=>t)):(0,or.of)(t)})}class Po extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Oo=new r.OlP("ROUTES");class Do{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,xr.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const s=n.create(e);return new Hi(Ms(s.injector.get(Oo,void 0,r.XFs.Self|r.XFs.Optional)).map(Xi),s)}),Hr(e=>{throw t._loader$=void 0,e}));return t._loader$=new kr.c(n,()=>new ar.xQ).pipe((0,ls.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,ir.D)(this.loader.load(e)):qs(e()).pipe((0,Zr.zg)(e=>e instanceof r.YKP?(0,or.of)(e):(0,ir.D)(this.compiler.compileModuleAsync(e))))}}class Lo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Fo,this.attachRef=null}}class Fo{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Lo,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Mo{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Uo(e){throw e}function jo(e,t,n){return t.parse("/")}function qo(e,t){return(0,or.of)(null)}const Vo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Bo={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zo=(()=>{class e{constructor(e,t,n,s,i,o,a,l){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ar.xQ,this.errorHandler=Uo,this.malformedUriErrorHandler=jo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:qo,afterPreactivation:qo},this.urlHandlingStrategy=new Mo,this.routeReuseStrategy=new Po,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(r.h0i),this.console=i.get(r.c2e);const u=i.get(r.R0b);this.isNgZoneEnabled=u instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new Zs(new Ws([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Do(o,a,e=>this.triggerEvent(new Is(e)),e=>this.triggerEvent(new Es(e))),this.routerState=vi(this.currentUrlTree,this.rootComponentType),this.transitions=new ur({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(e){const t=this.events;return e.pipe(Vr(e=>0!==e.id),(0,xr.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),Nr(e=>{let n=!1,r=!1;return(0,or.of)(e).pipe((0,as.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nr(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,or.of)(e).pipe(Nr(e=>{const n=this.transitions.getValue();return t.next(new fs(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Sr.E:Promise.resolve(e)}),(r=this.ngModule.injector,s=this.configLoader,i=this.urlSerializer,o=this.config,Nr(e=>function(e,t,n,r,s){return new fo(e,t,n,r,s).apply()}(r,s,i,e.extractedUrl,o).pipe((0,xr.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,as.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,s){return(0,Zr.zg)(i=>function(e,t,n,r,s="emptyOnly",i="legacy"){try{const o=new Eo(e,t,n,r,s,i).recognize();return null===o?Io(new To):(0,or.of)(o)}catch(o){return Io(o)}}(e,t,i.urlAfterRedirects,n(i.urlAfterRedirects),r,s).pipe((0,xr.U)(e=>Object.assign(Object.assign({},i),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,as.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new _s(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,s,i,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:s,restoredState:i,extras:o}=e,a=new fs(n,this.serializeUrl(r),s,i);t.next(a);const l=vi(r,this.rootComponentType).snapshot;return(0,or.of)(Object.assign(Object.assign({},e),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Sr.E}),Ro(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),(0,as.b)(e=>{const t=new vs(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,xr.U)(e=>Object.assign(Object.assign({},e),{guards:_o(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,Zr.zg)(n=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:i,canDeactivateChecks:o}}=n;return 0===o.length&&0===i.length?(0,or.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,ir.D)(e).pipe((0,Zr.zg)(e=>function(e,t,n,r,s){const i=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!i||0===i.length)return(0,or.of)(!0);const o=i.map(i=>{const o=vo(i,t,s);let a;if(function(e){return e&&$i(e.canDeactivate)}(o))a=qs(o.canDeactivate(e,t,n,r));else{if(!$i(o))throw new Error("Invalid CanDeactivate guard");a=qs(o(e,t,n,r))}return a.pipe(os())});return(0,or.of)(o).pipe(Wi())}(e.component,e.route,n,t,r)),os(e=>!0!==e,!0))}(o,r,s,e).pipe((0,Zr.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,ir.D)(t).pipe(Wr(t=>Er(function(e,t){return null!==e&&t&&t(new Ss(e)),(0,or.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new ks(e)),(0,or.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Cr(()=>{const s=t.guards.map(s=>{const i=vo(s,t.node,n);let o;if(function(e){return e&&$i(e.canActivateChild)}(i))o=qs(i.canActivateChild(r,e));else{if(!$i(i))throw new Error("Invalid CanActivateChild guard");o=qs(i(r,e))}return o.pipe(os())});return(0,or.of)(s).pipe(Wi())}));return(0,or.of)(s).pipe(Wi())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,or.of)(!0);const s=r.map(r=>Cr(()=>{const s=vo(r,t,n);let i;if(function(e){return e&&$i(e.canActivate)}(s))i=qs(s.canActivate(t,e));else{if(!$i(s))throw new Error("Invalid CanActivate guard");i=qs(s(t,e))}return i.pipe(os())}));return(0,or.of)(s).pipe(Wi())}(e,t.route,n))),os(e=>!0!==e,!0))}(r,i,e,t):(0,or.of)(n)),(0,xr.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,as.b)(e=>{if(Gi(e.guardsResult)){const t=Os(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new ws(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Vr(e=>!!e.guardsResult||(this.cancelNavigationTransition(e,""),!1)),Ro(e=>{if(e.guards.canActivateChecks.length)return(0,or.of)(e).pipe((0,as.b)(e=>{const t=new bs(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),Nr(e=>{let t=!1;return(0,or.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Zr.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:s}}=e;if(!s.length)return(0,or.of)(e);let i=0;return(0,ir.D)(s).pipe(Wr(e=>function(e,t,n,r){return function(e,t,n,r){const s=Object.keys(e);if(0===s.length)return(0,or.of)({});const i={};return(0,ir.D)(s).pipe((0,Zr.zg)(s=>function(e,t,n,r){const s=vo(e,t,r);return qs(s.resolve?s.resolve(t,n):s(t,n))}(e[s],t,n,r).pipe((0,as.b)(e=>{i[s]=e}))),Kr(1),(0,Zr.zg)(()=>Object.keys(i).length===s.length?(0,or.of)(i):Sr.E))}(e._resolve,e,t,r).pipe((0,xr.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),bi(e,n).resolve),null)))}(e.route,t,n,r)),(0,as.b)(()=>i++),Kr(1),(0,Zr.zg)(t=>i===s.length?(0,or.of)(e):Sr.E))})),(0,as.b)({next:()=>t=!0,complete:()=>{t||this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,as.b)(e=>{const t=new Ts(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Ro(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:s,extras:{skipLocationChange:i,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:s,skipLocationChange:!!i,replaceUrl:!!o})}),(0,xr.U)(e=>{const t=function(e,t,n){const r=xi(e,t._root,n?n._root:void 0);return new _i(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,as.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(s=this.rootContexts,i=this.routeReuseStrategy,o=e=>this.triggerEvent(e),(0,xr.U)(e=>(new Bi(i,e.targetRouterState,e.currentRouterState,o).activate(s),e))),(0,as.b)({next(){n=!0},complete(){n=!0}}),cs(()=>{n||r||this.cancelNavigationTransition(e,`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),Hr(n=>{if(r=!0,function(e){return e&&e.ngNavigationCancelingError}(n)){const r=Gi(n.url);r||(this.navigated=!0,this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));const s=new gs(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(s),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);const r=new ys(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(tp){e.reject(tp)}}return Sr.E}));var s,i,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,s={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(s.state=e)}this.scheduleNavigation(r,e,n,s)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Qi(e),this.config=e.map(Xi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:s,queryParamsHandling:i,preserveFragment:o}=t,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:s;let u=null;switch(i){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,s){if(0===n.length)return Pi(t.root,t.root,t,r,s);const i=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Di(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,s)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return js(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===s?(r.split("/").forEach((r,s)=>{0==s&&"."===r||(0==s&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Di(n,t,r)}(n);if(i.toRoot())return Pi(t.root,new Ws([],{}),t,r,s);const o=function(e,t,n){if(e.isAbsolute)return new Li(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Li(e,e===t.root,0)}const r=Ni(e.commands[0])?0:1;return function(e,t,n){let r=e,s=t,i=n;for(;i>s;){if(i-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Li(r,!1,s-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(i,t,e),a=o.processChildren?Mi(o.segmentGroup,o.index,i.commands):Fi(o.segmentGroup,o.index,i.commands);return Pi(o.segmentGroup,a,t,r,s)}(a,this.currentUrlTree,e,u,null!=l?l:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=Gi(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let s=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||t.skipLocationChange||t.replaceUrl)&&(s=this.location.getState()),this.scheduleNavigation(r,"imperative",s,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Vo):!1===t?Object.assign({},Bo):t,Gi(e))return zs(this.currentUrlTree,e,n);const r=this.parseUrl(e);return zs(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ms(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,s){if(this.disposed)return Promise.resolve(!1);const i=this.getTransition(),o="imperative"!==t&&"imperative"===(null==i?void 0:i.source),a=(this.lastSuccessfulId===i.id||this.currentNavigation?i.rawUrl:i.urlAfterRedirects).toString()===e.toString();if(o&&a)return Promise.resolve(!0);let l,u,c;s?(l=s.resolve,u=s.reject,c=s.promise):c=new Promise((e,t)=>{l=e,u=t});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){"computed"===this.canceledNavigationResolution?"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-e.targetPageId):this.resetUrlToCurrentUrlTree();const n=new gs(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(Ys),r.LFG(Fo),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Ho=(()=>{class e{constructor(e,t,n,s,i){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=s||Ns,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,s=new $o(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,s),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Fo),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class $o{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===wi?this.route:e===Fo?this.childContexts:this.parent.get(e,t)}}class Go{}class Zo{preload(e,t){return(0,or.of)(null)}}let Wo=(()=>{class e{constructor(e,t,n,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new Do(t,n,t=>e.triggerEvent(new Is(t)),t=>e.triggerEvent(new Es(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vr(e=>e instanceof ms),Wr(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,ir.D)(n).pipe((0,Ir.J)(),(0,xr.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,or.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,Zr.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(zo),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(Go))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),Ko=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof fs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ms&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof As&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new As(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(zo),r.LFG(F),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const Qo=new r.OlP("ROUTER_CONFIGURATION"),Yo=new r.OlP("ROUTER_FORROOT_GUARD"),Jo=[b,{provide:Ys,useClass:Js},{provide:zo,useFactory:function(e,t,n,r,s,i,o,a={},l,u){const c=new zo(null,e,t,n,r,s,i,Ms(o));return l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,c),a.enableTracing&&c.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[Ys,Fo,b,r.zs3,r.v3s,r.Sil,Oo,Qo,[class{},new r.FiY],[class{},new r.FiY]]},Fo,{provide:wi,useFactory:function(e){return e.routerState.root},deps:[zo]},{provide:r.v3s,useClass:r.EAV},Wo,Zo,class{preload(e,t){return t().pipe(Hr(()=>(0,or.of)(null)))}},{provide:Qo,useValue:{enableTracing:!1}}];function Xo(){return new r.PXZ("Router",zo)}let ea=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[Jo,sa(t),{provide:Yo,useFactory:ra,deps:[[zo,new r.FiY,new r.tp0]]},{provide:Qo,useValue:n||{}},{provide:g,useFactory:na,deps:[a,[new r.tBr(_),new r.FiY],Qo]},{provide:Ko,useFactory:ta,deps:[zo,F,Qo]},{provide:Go,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Zo},{provide:r.PXZ,multi:!0,useFactory:Xo},[ia,{provide:r.ip1,multi:!0,useFactory:oa,deps:[ia]},{provide:la,useFactory:aa,deps:[ia]},{provide:r.tb,multi:!0,useExisting:la}]]}}static forChild(t){return{ngModule:e,providers:[sa(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Yo,8),r.LFG(zo,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function ta(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ko(e,t,n)}function na(e,t,n={}){return n.useHash?new w(e,t):new v(e,t)}function ra(e){return"guarded"}function sa(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:Oo,multi:!0,useValue:e}]}let ia=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.resultOfPreactivationDone=new ar.xQ}appInitializer(){return this.injector.get(u,Promise.resolve(null)).then(()=>{let e=null;const t=new Promise(t=>e=t),n=this.injector.get(zo),r=this.injector.get(Qo);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,or.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Qo),n=this.injector.get(Wo),s=this.injector.get(Ko),i=this.injector.get(zo),o=this.injector.get(r.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),s.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function oa(e){return e.appInitializer.bind(e)}function aa(e){return e.bootstrapListener.bind(e)}const la=new r.OlP("Router Initializer"),ua=[];let ca=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[ea.forRoot(ua)],ea]}),e})();const ha={apiKey:"AIzaSyBi8NPLjaXZoqV-EhyWTqYheYiTM5JPz_g",authDomain:"co-onetest-407b6.firebaseapp.com",projectId:"co-onetest-407b6",storageBucket:"co-onetest-407b6.appspot.com",messagingSenderId:"701363109445",appId:"1:701363109445:web:2896083f48a80c31076d2c"};var da=n(8569),pa=n(5271);function fa(){return e=>e.lift(new ma)}class ma{call(e,t){return t.subscribe(new ga(e))}}class ga extends dr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function ya(e,t){return n=>n.lift(new _a(e,t))}class _a{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new va(e,this.compare,this.keySelector))}}class va extends dr.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var wa,ba=n(9748),Ta=(n(3678),n(1932)),Ia=n(6304),Ea=n(7092),Sa=n(5119),Ca=n(2134),ka=n(5725),xa="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Aa={},Na=Na||{},Ra=xa||self;function Pa(){}function Oa(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Da(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var La="closure_uid_"+(1e9*Math.random()>>>0),Fa=0;function Ma(e,t,n){return e.call.apply(e.bind,arguments)}function Ua(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ja(e,t,n){return(ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ma:Ua).apply(null,arguments)}function qa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Va(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function Ba(){this.s=this.s,this.o=this.o}var za={};Ba.prototype.s=!1,Ba.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,La)&&e[La]||(e[La]=++Fa)}(this);delete za[e]}},Ba.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ha=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},$a=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,s="string"==typeof e?e.split(""):e;for(let i=0;i<r;i++)i in s&&t.call(n,s[i],i,e)};function Ga(e){return Array.prototype.concat.apply([],arguments)}function Za(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Wa(e){return/^[\s\xa0]*$/.test(e)}var Ka,Qa=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Ya(e,t){return-1!=e.indexOf(t)}function Ja(e,t){return e<t?-1:e>t?1:0}e:{var Xa=Ra.navigator;if(Xa){var el=Xa.userAgent;if(el){Ka=el;break e}}Ka=""}function tl(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function nl(e){const t={};for(const n in e)t[n]=e[n];return t}var rl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sl(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<rl.length;t++)n=rl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function il(e){return il[" "](e),e}il[" "]=Pa;var ol,al,ll=Ya(Ka,"Opera"),ul=Ya(Ka,"Trident")||Ya(Ka,"MSIE"),cl=Ya(Ka,"Edge"),hl=cl||ul,dl=Ya(Ka,"Gecko")&&!(Ya(Ka.toLowerCase(),"webkit")&&!Ya(Ka,"Edge"))&&!(Ya(Ka,"Trident")||Ya(Ka,"MSIE"))&&!Ya(Ka,"Edge"),pl=Ya(Ka.toLowerCase(),"webkit")&&!Ya(Ka,"Edge");function fl(){var e=Ra.document;return e?e.documentMode:void 0}e:{var ml="",gl=(al=Ka,dl?/rv:([^\);]+)(\)|;)/.exec(al):cl?/Edge\/([\d\.]+)/.exec(al):ul?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(al):pl?/WebKit\/(\S+)/.exec(al):ll?/(?:Version)[ \/]?(\S+)/.exec(al):void 0);if(gl&&(ml=gl?gl[1]:""),ul){var yl=fl();if(null!=yl&&yl>parseFloat(ml)){ol=String(yl);break e}}ol=ml}var _l={};var vl=Ra.document&&ul&&(fl()||parseInt(ol,10))||void 0,wl=function(){if(!Ra.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ra.addEventListener("test",Pa,t),Ra.removeEventListener("test",Pa,t)}catch(n){}return e}();function bl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Tl(e,t){if(bl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(dl){e:{try{il(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Il[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Tl.Z.h.call(this)}}bl.prototype.h=function(){this.defaultPrevented=!0},Va(Tl,bl);var Il={2:"touch",3:"pen",4:"mouse"};Tl.prototype.h=function(){Tl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var El="closure_listenable_"+(1e6*Math.random()|0),Sl=0;function Cl(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=s,this.key=++Sl,this.ca=this.fa=!1}function kl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function xl(e){this.src=e,this.g={},this.h=0}function Al(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Ha(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(kl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Nl(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return s}return-1}xl.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Nl(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Cl(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var Rl="closure_lm_"+(1e6*Math.random()|0),Pl={};function Ol(e,t,n,r,s){if(r&&r.once)return Ll(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ol(e,t[i],n,r,s);return null}return n=Bl(n),e&&e[El]?e.N(t,n,Da(r)?!!r.capture:!!r,s):Dl(e,t,n,!1,r,s)}function Dl(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Da(s)?!!s.capture:!!s,a=ql(e);if(a||(e[Rl]=a=new xl(e)),(n=a.add(t,n,r,o,i)).proxy)return n;if(r=function(){var e=jl;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)wl||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Ul(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ll(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ll(e,t[i],n,r,s);return null}return n=Bl(n),e&&e[El]?e.O(t,n,Da(r)?!!r.capture:!!r,s):Dl(e,t,n,!0,r,s)}function Fl(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Fl(e,t[i],n,r,s);else r=Da(r)?!!r.capture:!!r,n=Bl(n),e&&e[El]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Nl(i=e.g[t],n,r,s))&&(kl(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--))):e&&(e=ql(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Nl(t,n,r,s)),(n=-1<e?t[e]:null)&&Ml(n))}function Ml(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[El])Al(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ul(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ql(t))?(Al(n,e),0==n.h&&(n.src=null,t[Rl]=null)):kl(e)}}}function Ul(e){return e in Pl?Pl[e]:Pl[e]="on"+e}function jl(e,t){if(e.ca)e=!0;else{t=new Tl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ml(e),e=n.call(r,t)}return e}function ql(e){return(e=e[Rl])instanceof xl?e:null}var Vl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bl(e){return"function"==typeof e?e:(e[Vl]||(e[Vl]=function(t){return e.handleEvent(t)}),e[Vl])}function zl(){Ba.call(this),this.i=new xl(this),this.P=this,this.I=null}function Hl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new bl(t,e);else if(t instanceof bl)t.target=t.target||e;else{var s=t;sl(t=new bl(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=$l(o,r,!0,t)&&s}if(s=$l(o=t.g=e,r,!0,t)&&s,s=$l(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=$l(o=t.g=n[i],r,!1,t)&&s}function $l(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var a=o.listener,l=o.ia||o.src;o.fa&&Al(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}Va(zl,Ba),zl.prototype[El]=!0,zl.prototype.removeEventListener=function(e,t,n,r){Fl(this,e,t,n,r)},zl.prototype.M=function(){if(zl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)kl(n[r]);delete t.g[e],t.h--}}this.I=null},zl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Gl=Ra.JSON.stringify;function Zl(){var e=eu;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Wl,Kl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ql,e=>e.reset());class Ql{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Yl(e){Ra.setTimeout(()=>{throw e},0)}function Jl(e,t){Wl||function(){var e=Ra.Promise.resolve(void 0);Wl=function(){e.then(tu)}}(),Xl||(Wl(),Xl=!0),eu.add(e,t)}var Xl=!1,eu=new class{constructor(){this.h=this.g=null}add(e,t){const n=Kl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function tu(){for(var e;e=Zl();){try{e.h.call(e.g)}catch(n){Yl(n)}var t=Kl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xl=!1}function nu(e,t){zl.call(this),this.h=e||1,this.g=t||Ra,this.j=ja(this.kb,this),this.l=Date.now()}function ru(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function su(e,t,n){if("function"==typeof e)n&&(e=ja(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ja(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ra.setTimeout(e,t||0)}function iu(e){e.g=su(()=>{e.g=null,e.i&&(e.i=!1,iu(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Va(nu,zl),(wa=nu.prototype).da=!1,wa.S=null,wa.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Hl(this,"tick"),this.da&&(ru(this),this.start()))}},wa.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wa.M=function(){nu.Z.M.call(this),ru(this),delete this.g};class ou extends Ba{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:iu(this)}M(){super.M(),this.g&&(Ra.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function au(e){Ba.call(this),this.h=e,this.g={}}Va(au,Ba);var lu=[];function uu(e,t,n,r){Array.isArray(n)||(n&&(lu[0]=n.toString()),n=lu);for(var s=0;s<n.length;s++){var i=Ol(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function cu(e){tl(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ml(e)},e),e.g={}}function hu(){this.g=!0}function du(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return Gl(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}au.prototype.M=function(){au.Z.M.call(this),cu(this)},au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hu.prototype.Aa=function(){this.g=!1},hu.prototype.info=function(){};var pu={},fu=null;function mu(){return fu=fu||new zl}function gu(e){bl.call(this,pu.Ma,e)}function yu(e){const t=mu();Hl(t,new gu(t,e))}function _u(e,t){bl.call(this,pu.STAT_EVENT,e),this.stat=t}function vu(e){const t=mu();Hl(t,new _u(t,e))}function wu(e,t){bl.call(this,pu.Na,e),this.size=t}function bu(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ra.setTimeout(function(){e()},t)}pu.Ma="serverreachability",Va(gu,bl),pu.STAT_EVENT="statevent",Va(_u,bl),pu.Na="timingevent",Va(wu,bl);var Tu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Iu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Eu(){}function Su(){}Eu.prototype.h=null;var Cu,ku={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function xu(){bl.call(this,"d")}function Au(){bl.call(this,"c")}function Nu(){}function Ru(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new au(this),this.P=Ou,this.W=new nu(e=hl?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pu}function Pu(){this.i=null,this.g="",this.h=!1}Va(xu,bl),Va(Au,bl),Va(Nu,Eu),Nu.prototype.g=function(){return new XMLHttpRequest},Nu.prototype.i=function(){return{}},Cu=new Nu;var Ou=45e3,Du={},Lu={};function Fu(e,t,n){e.K=1,e.v=ic(Xu(t)),e.s=n,e.U=!0,Mu(e,null)}function Mu(e,t){e.F=Date.now(),Vu(e),e.A=Xu(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),_c(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Pu,e.g=_h(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ou(ja(e.Ia,e,e.g),e.O)),uu(e.V,e.g,"readystatechange",e.gb),t=e.H?nl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),yu(1),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function Uu(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function ju(e,t,n){let r,s=!0;for(;!e.I&&e.C<n.length;){if(r=qu(e,n),r==Lu){4==t&&(e.o=4,vu(14),s=!1),du(e.j,e.m,null,"[Incomplete Response]");break}if(r==Du){e.o=4,vu(15),du(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}du(e.j,e.m,r,null),Gu(e,r)}Uu(e)&&r!=Lu&&r!=Du&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vu(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),ch(t),t.L=!0,vu(11))):(du(e.j,e.m,n,"[Invalid Chunked Response]"),$u(e),Hu(e))}function qu(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Lu:(n=Number(t.substring(n,r)),isNaN(n)?Du:(r+=1)+n>t.length?Lu:(t=t.substr(r,n),e.C=r+n,t))}function Vu(e){e.Y=Date.now()+e.P,Bu(e,e.P)}function Bu(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=bu(ja(e.eb,e),t)}function zu(e){e.B&&(Ra.clearTimeout(e.B),e.B=null)}function Hu(e){0==e.l.G||e.I||ph(e.l,e)}function $u(e){zu(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ru(e.W),cu(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Gu(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ec(n.i,e)))if(n.I=e.N,!e.J&&Ec(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;dh(n),th(n)}uh(n),vu(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=bu(ja(n.ab,n),6e3));if(1>=Ic(n.i)&&n.ka){try{n.ka()}catch(u){}n.ka=void 0}}else mh(n,11)}else if((e.J||n.g==e)&&dh(n),!Wa(t))for(s=n.Ca.g.parse(t),t=0;t<s.length;t++){let u=s[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const s=u[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(n.K=r=1.5*c,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;!i.g&&(Ya(e,"spdy")||Ya(e,"quic")||Ya(e,"h2"))&&(i.j=i.l,i.g=new Set,i.h&&(Sc(i,i.h),i.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,sc(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=yh(r,r.H?r.la:null,r.W),o.J){Cc(r.i,o);var a=o,l=r.K;l&&a.setTimeout(l),a.B&&(zu(a),Vu(a)),r.g=o}else lh(r);0<n.l.length&&sh(n)}else"stop"!=u[0]&&"close"!=u[0]||mh(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?mh(n,7):eh(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}yu(4)}catch(u){}}function Zu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Oa(e)||"string"==typeof e)$a(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Oa(e)||"string"==typeof e){n=[];for(var r=e.length,s=0;s<r;s++)n.push(s)}else for(s in n=[],r=0,e)n[r++]=s;s=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Oa(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}}function Wu(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Wu)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ku(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Qu(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var s={};for(n=t=0;t<e.g.length;)Qu(s,r=e.g[t])||(e.g[n++]=r,s[r]=1),t++;e.g.length=n}}function Qu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(wa=Ru.prototype).setTimeout=function(e){this.P=e},wa.gb=function(e){e=e.target;const t=this.L;t&&3==Kc(e)?t.l():this.Ia(e)},wa.Ia=function(e){try{if(e==this.g)e:{const c=Kc(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>c)&&(3!=c||hl||this.g&&(this.h.h||this.g.ga()||Qc(this.g)))){this.I||4!=c||7==t||yu(8==t||0>=h?3:2),zu(this);var n=this.g.ba();this.N=n;t:if(Uu(this)){var r=Qc(this.g);e="";var s=r.length,i=4==Kc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){$u(this),Hu(this);var o="";break t}this.h.i=new Ra.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.j,this.u,this.A,this.m,this.X,c,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wa(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,vu(12),$u(this),Hu(this);break e}du(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Gu(this,n)}this.U?(ju(this,c,o),hl&&this.i&&3==c&&(uu(this.V,this.W,"tick",this.fb),this.W.start())):(du(this.j,this.m,o,null),Gu(this,o)),4==c&&$u(this),this.i&&!this.I&&(4==c?ph(this.l,this):(this.i=!1,Vu(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,vu(12)):(this.o=0,vu(13)),$u(this),Hu(this)}}}catch(c){}},wa.fb=function(){if(this.g){var e=Kc(this.g),t=this.g.ga();this.C<t.length&&(zu(this),ju(this,e,t),this.i&&4!=e&&Vu(this))}},wa.cancel=function(){this.I=!0,$u(this)},wa.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(yu(3),vu(17)),$u(this),this.o=2,Hu(this)):Bu(this,this.Y-e)},(wa=Wu.prototype).R=function(){Ku(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},wa.T=function(){return Ku(this),this.g.concat()},wa.get=function(e,t){return Qu(this.h,e)?this.h[e]:t},wa.set=function(e,t){Qu(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},wa.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var s=n[r],i=this.get(s);e.call(t,i,s,this)}};var Yu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ju(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ju){this.g=void 0!==t?t:e.g,ec(this,e.j),this.s=e.s,tc(this,e.i),nc(this,e.m),this.l=e.l,t=e.h;var n=new fc;n.i=t.i,t.g&&(n.g=new Wu(t.g),n.h=t.h),rc(this,n),this.o=e.o}else e&&(n=String(e).match(Yu))?(this.g=!!t,ec(this,n[1]||"",!0),this.s=oc(n[2]||""),tc(this,n[3]||"",!0),nc(this,n[4]),this.l=oc(n[5]||"",!0),rc(this,n[6]||"",!0),this.o=oc(n[7]||"")):(this.g=!!t,this.h=new fc(null,this.g))}function Xu(e){return new Ju(e)}function ec(e,t,n){e.j=n?oc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tc(e,t,n){e.i=n?oc(t,!0):t}function nc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function rc(e,t,n){t instanceof fc?(e.h=t,function(e,t){t&&!e.j&&(mc(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(gc(this,t),_c(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=ac(t,dc)),e.h=new fc(t,e.g))}function sc(e,t,n){e.h.set(t,n)}function ic(e){return sc(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function oc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ac(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,lc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ju.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ac(t,uc,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ac(t,uc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ac(n,"/"==n.charAt(0)?hc:cc,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ac(n,pc)),e.join("")};var uc=/[#\/\?@]/g,cc=/[#\?:]/g,hc=/[#\?]/g,dc=/[#\?@]/g,pc=/#/g;function fc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mc(e){e.g||(e.g=new Wu,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gc(e,t){mc(e),t=vc(e,t),Qu(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Qu((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ku(e)))}function yc(e,t){return mc(e),t=vc(e,t),Qu(e.g.h,t)}function _c(e,t,n){gc(e,t),0<n.length&&(e.i=null,e.g.set(vc(e,t),Za(n)),e.h+=n.length)}function vc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function wc(e){this.l=e||bc,e=Ra.PerformanceNavigationTiming?0<(e=Ra.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ra.g&&Ra.g.Ea&&Ra.g.Ea()&&Ra.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(wa=fc.prototype).add=function(e,t){mc(this),this.i=null,e=vc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wa.forEach=function(e,t){mc(this),this.g.forEach(function(n,r){$a(n,function(n){e.call(t,n,r,this)},this)},this)},wa.T=function(){mc(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var s=e[r],i=0;i<s.length;i++)n.push(t[r]);return n},wa.R=function(e){mc(this);var t=[];if("string"==typeof e)yc(this,e)&&(t=Ga(t,this.g.get(vc(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Ga(t,e[n])}return t},wa.set=function(e,t){return mc(this),this.i=null,yc(this,e=vc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wa.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},wa.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],s=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=s;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var bc=10;function Tc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ic(e){return e.h?1:e.g?e.g.size:0}function Ec(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Sc(e,t){e.g?e.g.add(t):e.h=t}function Cc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function kc(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Za(e.i)}function xc(){}function Ac(){this.g=new xc}function Nc(e,t,n){const r=n||"";try{Zu(e,function(e,n){let s=e;Da(e)&&(s=Gl(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Rc(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function Pc(e){this.l=e.$b||null,this.j=e.ib||!1}function Oc(e,t){zl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Dc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wc.prototype.cancel=function(){if(this.i=kc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},xc.prototype.stringify=function(e){return Ra.JSON.stringify(e,void 0)},xc.prototype.parse=function(e){return Ra.JSON.parse(e,void 0)},Va(Pc,Eu),Pc.prototype.g=function(){return new Oc(this.l,this.j)},Pc.prototype.i=function(e){return function(){return e}}({}),Va(Oc,zl);var Dc=0;function Lc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Fc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Mc(e)}function Mc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wa=Oc.prototype).open=function(e,t){if(this.readyState!=Dc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Mc(this)},wa.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ra).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},wa.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fc(this)),this.readyState=Dc},wa.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Mc(this)),this.g&&(this.readyState=3,Mc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ra.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Lc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},wa.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Fc(this):Mc(this),3==this.readyState&&Lc(this)}},wa.Ua=function(e){this.g&&(this.response=this.responseText=e,Fc(this))},wa.Ta=function(e){this.g&&(this.response=e,Fc(this))},wa.ha=function(){this.g&&Fc(this)},wa.setRequestHeader=function(e,t){this.v.append(e,t)},wa.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wa.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Oc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Uc=Ra.JSON.parse;function jc(e){zl.call(this),this.headers=new Wu,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qc,this.K=this.L=!1}Va(jc,zl);var qc="",Vc=/^https?$/i,Bc=["POST","PUT"];function zc(e){return"content-type"==e.toLowerCase()}function Hc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$c(e),Zc(e)}function $c(e){e.D||(e.D=!0,Hl(e,"complete"),Hl(e,"error"))}function Gc(e){if(e.h&&void 0!==Na&&(!e.C[1]||4!=Kc(e)||2!=e.ba()))if(e.v&&4==Kc(e))su(e.Fa,0,e);else if(Hl(e,"readystatechange"),4==Kc(e)){e.h=!1;try{const l=e.ba();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===l){var s=String(e.H).match(Yu)[1]||null;if(!s&&Ra.self&&Ra.self.location){var i=Ra.self.location.protocol;s=i.substr(0,i.length-1)}r=!Vc.test(s?s.toLowerCase():"")}n=r}if(n)Hl(e,"complete"),Hl(e,"success");else{e.m=6;try{var o=2<Kc(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",$c(e)}}finally{Zc(e)}}}function Zc(e,t){if(e.g){Wc(e);const r=e.g,s=e.C[0]?Pa:null;e.g=null,e.C=null,t||Hl(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Wc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ra.clearTimeout(e.A),e.A=null)}function Kc(e){return e.g?e.g.readyState:0}function Qc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case qc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Yc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return tl(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):sc(e,t,n))}function Jc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xc(e){this.za=0,this.l=[],this.h=new hu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Jc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Jc("baseRetryDelayMs",5e3,e),this.$a=Jc("retryDelaySeedMs",1e4,e),this.Ya=Jc("forwardChannelMaxRetries",2,e),this.ra=Jc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new wc(e&&e.concurrentRequestLimit),this.Ca=new Ac,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function eh(e){if(nh(e),3==e.G){var t=e.V++,n=Xu(e.F);sc(n,"SID",e.J),sc(n,"RID",t),sc(n,"TYPE","terminate"),oh(e,n),(t=new Ru(e,e.h,t,void 0)).K=2,t.v=ic(Xu(n)),n=!1,Ra.navigator&&Ra.navigator.sendBeacon&&(n=Ra.navigator.sendBeacon(t.v.toString(),"")),!n&&Ra.Image&&((new Image).src=t.v,n=!0),n||(t.g=_h(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Vu(t)}gh(e)}function th(e){e.g&&(ch(e),e.g.cancel(),e.g=null)}function nh(e){th(e),e.u&&(Ra.clearTimeout(e.u),e.u=null),dh(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ra.clearTimeout(e.m),e.m=null)}function rh(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&sh(e)}function sh(e){Tc(e.i)||e.m||(e.m=!0,Jl(e.Ha,e),e.C=0)}function ih(e,t){var n;n=t?t.m:e.V++;const r=Xu(e.F);sc(r,"SID",e.J),sc(r,"RID",n),sc(r,"AID",e.U),oh(e,r),e.o&&e.s&&Yc(r,e.o,e.s),n=new Ru(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=ah(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Sc(e.i,n),Fu(n,r,t)}function oh(e,t){e.j&&Zu({},function(e,n){sc(t,n,e)})}function ah(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ja(e.j.Oa,e.j,e):null;e:{var s=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=t,0>n)t=Math.max(0,s[o].h-100),i=!1;else try{Nc(a,e,"req"+n+"_")}catch(Qh){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function lh(e){e.g||e.u||(e.Y=1,Jl(e.Ga,e),e.A=0)}function uh(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=bu(ja(e.Ga,e),fh(e,e.A)),e.A++,0))}function ch(e){null!=e.B&&(Ra.clearTimeout(e.B),e.B=null)}function hh(e){e.g=new Ru(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Xu(e.oa);sc(t,"RID","rpc"),sc(t,"SID",e.J),sc(t,"CI",e.N?"0":"1"),sc(t,"AID",e.U),oh(e,t),sc(t,"TYPE","xmlhttp"),e.o&&e.s&&Yc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ic(Xu(t)),n.s=null,n.U=!0,Mu(n,e)}function dh(e){null!=e.v&&(Ra.clearTimeout(e.v),e.v=null)}function ph(e,t){var n=null;if(e.g==t){dh(e),ch(e),e.g=null;var r=2}else{if(!Ec(e.i,t))return;n=t.D,Cc(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var s=e.C;Hl(r=mu(),new wu(r,n,t,s)),sh(e)}else lh(e);else if(3==(s=t.o)||0==s&&0<e.I||!(1==r&&function(e,t){return!(Ic(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=bu(ja(e.Ha,e,t),fh(e,e.C)),e.C++,0)))}(e,t)||2==r&&uh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:mh(e,5);break;case 4:mh(e,10);break;case 3:mh(e,6);break;default:mh(e,2)}}function fh(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function mh(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ja(e.jb,e);n||(n=new Ju("//www.google.com/images/cleardot.gif"),Ra.location&&"http"==Ra.location.protocol||ec(n,"https"),ic(n)),function(e,t){const n=new hu;if(Ra.Image){const r=new Image;r.onload=qa(Rc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qa(Rc,n,r,"TestLoadImage: error",!1,t),r.onabort=qa(Rc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qa(Rc,n,r,"TestLoadImage: timeout",!1,t),Ra.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else vu(2);e.G=0,e.j&&e.j.va(t),gh(e),nh(e)}function gh(e){e.G=0,e.I=-1,e.j&&(0==kc(e.i).length&&0==e.l.length||(e.i.i.length=0,Za(e.l),e.l.length=0),e.j.ua())}function yh(e,t,n){let r=function(e){return e instanceof Ju?Xu(e):new Ju(e,void 0)}(n);if(""!=r.i)t&&tc(r,t+"."+r.i),nc(r,r.m);else{const e=Ra.location;r=function(e,t,n,r){var s=new Ju(null,void 0);return e&&ec(s,e),t&&tc(s,t),n&&nc(s,n),r&&(s.l=r),s}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&tl(e.aa,function(e,t){sc(r,t,e)}),n=e.sa,(t=e.D)&&n&&sc(r,t,n),sc(r,"VER",e.ma),oh(e,r),r}function _h(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new jc(n&&e.Ba&&!e.qa?new Pc({ib:!0}):e.qa)).L=e.H,t}function vh(){}function wh(){if(ul&&!(10<=Number(vl)))throw Error("Environmental error: no available transport.")}function bh(e,t){zl.call(this),this.g=new Xc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Wa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Wa(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Eh(this)}function Th(e){xu.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ih(){Au.call(this),this.status=1}function Eh(e){this.g=e}(wa=jc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cu.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:Cu),this.g.onreadystatechange=ja(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(i){return void Hc(this,i)}e=n||"";const s=new Wu(this.headers);r&&Zu(r,function(e,t){s.set(t,e)}),r=function(e){e:{var t=zc;const n=e.length,r="string"==typeof e?e.split(""):e;for(let s=0;s<n;s++)if(s in r&&t.call(void 0,r[s],s,e)){t=s;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(s.T()),n=Ra.FormData&&e instanceof Ra.FormData,!(0<=Ha(Bc,t))||r||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wc(this),0<this.B&&((this.K=function(e){return ul&&function(){return e=_l,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Qa(String(ol)).split("."),n=Qa("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var s=t[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],0==s[0].length&&0==i[0].length)break;e=Ja(0==s[1].length?0:parseInt(s[1],10),0==i[1].length?0:parseInt(i[1],10))||Ja(0==s[2].length,0==i[2].length)||Ja(s[2],i[2]),s=s[3],i=i[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ja(this.pa,this)):this.A=su(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Hc(this,i)}},wa.pa=function(){void 0!==Na&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hl(this,"timeout"),this.abort(8))},wa.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hl(this,"complete"),Hl(this,"abort"),Zc(this))},wa.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zc(this,!0)),jc.Z.M.call(this)},wa.Fa=function(){this.s||(this.F||this.v||this.l?Gc(this):this.cb())},wa.cb=function(){Gc(this)},wa.ba=function(){try{return 2<Kc(this)?this.g.status:-1}catch(al){return-1}},wa.ga=function(){try{return this.g?this.g.responseText:""}catch(al){return""}},wa.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Uc(t)}},wa.Da=function(){return this.m},wa.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wa=Xc.prototype).ma=8,wa.G=1,wa.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},wa.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Ru(this,this.h,e,void 0);let i=this.s;if(this.P&&(i?(i=nl(i),sl(i,this.P)):i=this.P),null===this.o&&(s.H=i),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ah(this,s,t),sc(n=Xu(this.F),"RID",e),sc(n,"CVER",22),this.D&&sc(n,"X-HTTP-Session-Id",this.D),oh(this,n),this.o&&i&&Yc(n,this.o,i),Sc(this.i,s),this.Ra&&sc(n,"TYPE","init"),this.ja?(sc(n,"$req",t),sc(n,"SID","null"),s.$=!0,Fu(s,n,null)):Fu(s,n,t),this.G=2}}else 3==this.G&&(e?ih(this,e):0==this.l.length||Tc(this.i)||ih(this))},wa.Ga=function(){if(this.u=null,hh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=bu(ja(this.bb,this),e)}},wa.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vu(10),th(this),hh(this))},wa.ab=function(){null!=this.v&&(this.v=null,th(this),uh(this),vu(19))},wa.jb=function(e){e?(this.h.info("Successfully pinged google.com"),vu(2)):(this.h.info("Failed to ping google.com"),vu(1))},(wa=vh.prototype).xa=function(){},wa.wa=function(){},wa.va=function(){},wa.ua=function(){},wa.Oa=function(){},wh.prototype.g=function(e,t){return new bh(e,t)},Va(bh,zl),bh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Jl(ja(e.hb,e,t))),vu(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=yh(e,null,e.W),sh(e)},bh.prototype.close=function(){eh(this.g)},bh.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,rh(this.g,t)}else this.v?((t={}).__data__=Gl(e),rh(this.g,t)):rh(this.g,e)},bh.prototype.M=function(){this.g.j=null,delete this.j,eh(this.g),delete this.g,bh.Z.M.call(this)},Va(Th,xu),Va(Ih,Au),Va(Eh,vh),Eh.prototype.xa=function(){Hl(this.g,"a")},Eh.prototype.wa=function(e){Hl(this.g,new Th(e))},Eh.prototype.va=function(e){Hl(this.g,new Ih(e))},Eh.prototype.ua=function(){Hl(this.g,"b")},wh.prototype.createWebChannel=wh.prototype.g,bh.prototype.send=bh.prototype.u,bh.prototype.open=bh.prototype.m,bh.prototype.close=bh.prototype.close,Tu.NO_ERROR=0,Tu.TIMEOUT=8,Tu.HTTP_ERROR=6,Iu.COMPLETE="complete",Su.EventType=ku,ku.OPEN="a",ku.CLOSE="b",ku.ERROR="c",ku.MESSAGE="d",zl.prototype.listen=zl.prototype.N,jc.prototype.listenOnce=jc.prototype.O,jc.prototype.getLastError=jc.prototype.La,jc.prototype.getLastErrorCode=jc.prototype.Da,jc.prototype.getStatus=jc.prototype.ba,jc.prototype.getResponseJson=jc.prototype.Qa,jc.prototype.getResponseText=jc.prototype.ga,jc.prototype.send=jc.prototype.ea;var Sh=Aa.createWebChannelTransport=function(){return new wh},Ch=Aa.getStatEventTarget=function(){return mu()},kh=Aa.ErrorCode=Tu,xh=Aa.EventType=Iu,Ah=Aa.Event=pu,Nh=Aa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Rh=Aa.FetchXmlHttpFactory=Pc,Ph=Aa.WebChannel=Su,Oh=Aa.XhrIo=jc;class Dh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dh.UNAUTHENTICATED=new Dh(null),Dh.GOOGLE_CREDENTIALS=new Dh("google-credentials-uid"),Dh.FIRST_PARTY=new Dh("first-party-uid"),Dh.MOCK_USER=new Dh("mock-user");let Lh="9.1.0";const Fh=new Ca.Yd("@firebase/firestore");function Mh(){return Fh.logLevel}function Uh(e,...t){if(Fh.logLevel<=Ca.in.DEBUG){const n=t.map(Vh);Fh.debug(`Firestore (${Lh}): ${e}`,...n)}}function jh(e,...t){if(Fh.logLevel<=Ca.in.ERROR){const n=t.map(Vh);Fh.error(`Firestore (${Lh}): ${e}`,...n)}}function qh(e,...t){if(Fh.logLevel<=Ca.in.WARN){const n=t.map(Vh);Fh.warn(`Firestore (${Lh}): ${e}`,...n)}}function Vh(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Bh(e="Unexpected state"){const t=`FIRESTORE (${Lh}) INTERNAL ASSERTION FAILED: `+e;throw jh(t),new Error(t)}function zh(e,t){e||Bh()}function Hh(e,t){return e}const $h={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Gh extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Zh{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Wh{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Kh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dh.UNAUTHENTICATED))}shutdown(){}}class Qh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yh{constructor(e){this.t=e,this.currentUser=Dh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const s=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let i=new Zh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zh,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable((0,Ia.Z)(function*(){yield t.promise,yield s(n.currentUser)}))},a=e=>{Uh("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Uh("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zh)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Uh("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zh("string"==typeof t.accessToken),new Wh(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return zh(null===e||"string"==typeof e),new Dh(e)}}class Jh{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=Dh.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Xh{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Jh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Dh.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ed{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function td(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ed.T=-1;class nd{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=td(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%e.length))}return n}}function rd(e,t){return e<t?-1:e>t?1:0}function sd(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function id(e){return e+"\0"}class od{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Gh($h.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Gh($h.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Gh($h.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Gh($h.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return od.fromMillis(Date.now())}static fromDate(e){return od.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new od(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rd(this.nanoseconds,e.nanoseconds):rd(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ad{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ad(e)}static min(){return new ad(new od(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ld(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ud(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class hd{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bh(),void 0===n?n=e.length-t:n>e.length-t&&Bh(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===hd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hd?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dd extends hd{construct(e,t,n){return new dd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Gh($h.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new dd(t)}static emptyPath(){return new dd([])}}const pd=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fd extends hd{construct(e,t,n){return new fd(e,t,n)}static isValidIdentifier(e){return pd.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fd.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fd(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Gh($h.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Gh($h.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Gh($h.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Gh($h.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fd(t)}static emptyPath(){return new fd([])}}class md{constructor(e){this.fields=e,e.sort(fd.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sd(this.fields,e.fields,(e,t)=>e.isEqual(t))}}let gd=(()=>{class e{constructor(e){this.binaryString=e}static fromBase64String(t){const n=atob(t);return new e(n)}static fromUint8Array(t){const n=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rd(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}return e.EMPTY_BYTE_STRING=new e(""),e})();const yd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _d(e){if(zh(!!e),"string"==typeof e){let t=0;const n=yd.exec(e);if(zh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:vd(e.seconds),nanos:vd(e.nanos)}}function vd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wd(e){return"string"==typeof e?gd.fromBase64String(e):gd.fromUint8Array(e)}function bd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Td(e){const t=e.mapValue.fields.__previous_value__;return bd(t)?Td(t):t}function Id(e){const t=_d(e.mapValue.fields.__local_write_time__.timestampValue);return new od(t.seconds,t.nanos)}function Ed(e){return null==e}function Sd(e){return 0===e&&1/e==-1/0}function Cd(e){return"number"==typeof e&&Number.isInteger(e)&&!Sd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class kd{constructor(e){this.path=e}static fromPath(e){return new kd(dd.fromString(e))}static fromName(e){return new kd(dd.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===dd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kd(new dd(e.slice()))}}function xd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bd(e)?4:10:Bh()}function Ad(e,t){const n=xd(e);if(n!==xd(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Id(e).isEqual(Id(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_d(e.timestampValue),r=_d(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wd(e.bytesValue).isEqual(wd(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return vd(e.geoPointValue.latitude)===vd(t.geoPointValue.latitude)&&vd(e.geoPointValue.longitude)===vd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return vd(e.integerValue)===vd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=vd(e.doubleValue),r=vd(t.doubleValue);return n===r?Sd(n)===Sd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sd(e.arrayValue.values||[],t.arrayValue.values||[],Ad);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ld(n)!==ld(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ad(n[s],r[s])))return!1;return!0}(e,t);default:return Bh()}}function Nd(e,t){return void 0!==(e.values||[]).find(e=>Ad(e,t))}function Rd(e,t){const n=xd(e),r=xd(t);if(n!==r)return rd(n,r);switch(n){case 0:return 0;case 1:return rd(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=vd(e.integerValue||e.doubleValue),r=vd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pd(e.timestampValue,t.timestampValue);case 4:return Pd(Id(e),Id(t));case 5:return rd(e.stringValue,t.stringValue);case 6:return function(e,t){const n=wd(e),r=wd(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=rd(n[s],r[s]);if(0!==e)return e}return rd(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rd(vd(e.latitude),vd(t.latitude));return 0!==n?n:rd(vd(e.longitude),vd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Rd(n[s],r[s]);if(e)return e}return rd(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=rd(r[o],i[o]);if(0!==e)return e;const t=Rd(n[r[o]],s[i[o]]);if(0!==t)return t}return rd(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Bh()}}function Pd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rd(e,t);const n=_d(e),r=_d(t),s=rd(n.seconds,r.seconds);return 0!==s?s:rd(n.nanos,r.nanos)}function Od(e){return Dd(e)}function Dd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_d(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?wd(e.bytesValue).toBase64():"referenceValue"in e?kd.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Dd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Dd(e.fields[s])}`;return n+"}"}(e.mapValue):Bh();var t}function Ld(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Fd(e){return!!e&&"integerValue"in e}function Md(e){return!!e&&"arrayValue"in e}function Ud(e){return!!e&&"nullValue"in e}function jd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qd(e){return!!e&&"mapValue"in e}function Vd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ud(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Vd(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vd(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Bd{constructor(e){this.value=e}static empty(){return new Bd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vd(t)}setAll(e){let t=fd.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Vd(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());qd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ad(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qd(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ud(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Bd(Vd(this.value))}}function zd(e){const t=[];return ud(e.fields,(e,n)=>{const r=new fd([e]);if(qd(n)){const e=zd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new md(t)}class Hd{constructor(e,t,n,r,s){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=s}static newInvalidDocument(e){return new Hd(e,0,ad.min(),Bd.empty(),0)}static newFoundDocument(e,t,n){return new Hd(e,1,t,n,0)}static newNoDocument(e,t){return new Hd(e,2,t,Bd.empty(),0)}static newUnknownDocument(e,t){return new Hd(e,3,t,Bd.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hd&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Hd(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $d{constructor(e,t=null,n=[],r=[],s=null,i=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.A=null}}function Gd(e,t=null,n=[],r=[],s=null,i=null,o=null){return new $d(e,t,n,r,s,i,o)}function Zd(e){const t=Hh(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Od(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Ed(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=op(t.startAt)),t.endAt&&(e+="|ub:",e+=op(t.endAt)),t.A=e}return t.A}function Wd(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let s=0;s<e.orderBy.length;s++)if(!lp(e.orderBy[s],t.orderBy[s]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if((n=e.filters[s]).op!==(r=t.filters[s]).op||!n.field.isEqual(r.field)||!Ad(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!cp(e.startAt,t.startAt)&&cp(e.endAt,t.endAt)}function Kd(e){return kd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Qd extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Yd(e,t,n):"array-contains"===t?new tp(e,n):"in"===t?new np(e,n):"not-in"===t?new rp(e,n):"array-contains-any"===t?new sp(e,n):new Qd(e,t,n)}static R(e,t,n){return"in"===t?new Jd(e,n):new Xd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Rd(t,this.value)):null!==t&&xd(this.value)===xd(t)&&this.P(Rd(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bh()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yd extends Qd{constructor(e,t,n){super(e,t,n),this.key=kd.fromName(n.referenceValue)}matches(e){const t=kd.comparator(e.key,this.key);return this.P(t)}}class Jd extends Qd{constructor(e,t){super(e,"in",t),this.keys=ep(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Xd extends Qd{constructor(e,t){super(e,"not-in",t),this.keys=ep(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ep(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>kd.fromName(e.referenceValue))}class tp extends Qd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Md(t)&&Nd(t.arrayValue,this.value)}}class np extends Qd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nd(this.value.arrayValue,t)}}class rp extends Qd{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nd(this.value.arrayValue,t)}}class sp extends Qd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Md(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Nd(this.value.arrayValue,e))}}class ip{constructor(e,t){this.position=e,this.before=t}}function op(e){return`${e.before?"b":"a"}:${e.position.map(e=>Od(e)).join(",")}`}class ap{constructor(e,t="asc"){this.field=e,this.dir=t}}function lp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function up(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?kd.comparator(kd.fromName(o.referenceValue),n.key):Rd(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function cp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ad(e.position[n],t.position[n]))return!1;return!0}class hp{constructor(e,t=null,n=[],r=[],s=null,i="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function dp(e,t,n,r,s,i,o,a){return new hp(e,t,n,r,s,i,o,a)}function pp(e){return new hp(e)}function fp(e){return!Ed(e.limit)&&"F"===e.limitType}function mp(e){return!Ed(e.limit)&&"L"===e.limitType}function gp(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function yp(e){for(const t of e.filters)if(t.v())return t.field;return null}function _p(e){return null!==e.collectionGroup}function vp(e){const t=Hh(e);if(null===t.V){t.V=[];const e=yp(t),n=gp(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new ap(e)),t.V.push(new ap(fd.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new ap(fd.keyField(),e))}}}return t.V}function wp(e){const t=Hh(e);if(!t.S)if("F"===t.limitType)t.S=Gd(t.path,t.collectionGroup,vp(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of vp(t))e.push(new ap(s.field,"desc"===s.dir?"asc":"desc"));const n=t.endAt?new ip(t.endAt.position,!t.endAt.before):null,r=t.startAt?new ip(t.startAt.position,!t.startAt.before):null;t.S=Gd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function bp(e,t,n){return new hp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Tp(e,t){return Wd(wp(e),wp(t))&&e.limitType===t.limitType}function Ip(e){return`${Zd(wp(e))}|lt:${e.limitType}`}function Ep(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Od(t.value)}`;var t}).join(", ")}]`),Ed(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+op(e.startAt)),e.endAt&&(t+=", endAt: "+op(e.endAt)),`Target(${t})`}(wp(e))}; limitType=${e.limitType})`}function Sp(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):kd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!up(e.startAt,vp(e),t)||e.endAt&&up(e.endAt,vp(e),t))}(e,t)}function Cp(e){return(t,n)=>{let r=!1;for(const s of vp(e)){const e=kp(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function kp(e,t,n){const r=e.field.isKeyField()?kd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Rd(r,s):Bh()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bh()}}function xp(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(t)?"-0":t}}function Ap(e){return{integerValue:""+e}}function Np(e,t){return Cd(t)?Ap(t):xp(e,t)}class Rp{constructor(){this._=void 0}}function Pp(e,t,n){return e instanceof Lp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Fp?Mp(e,t):e instanceof Up?jp(e,t):function(e,t){const n=Dp(e,t),r=Vp(n)+Vp(e.C);return Fd(n)&&Fd(e.C)?Ap(r):xp(e.N,r)}(e,t)}function Op(e,t,n){return e instanceof Fp?Mp(e,t):e instanceof Up?jp(e,t):n}function Dp(e,t){return e instanceof qp?Fd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Lp extends Rp{}class Fp extends Rp{constructor(e){super(),this.elements=e}}function Mp(e,t){const n=Bp(t);for(const r of e.elements)n.some(e=>Ad(e,r))||n.push(r);return{arrayValue:{values:n}}}class Up extends Rp{constructor(e){super(),this.elements=e}}function jp(e,t){let n=Bp(t);for(const r of e.elements)n=n.filter(e=>!Ad(e,r));return{arrayValue:{values:n}}}class qp extends Rp{constructor(e,t){super(),this.N=e,this.C=t}}function Vp(e){return vd(e.integerValue||e.doubleValue)}function Bp(e){return Md(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class zp{constructor(e,t){this.field=e,this.transform=t}}class Hp{constructor(e,t){this.version=e,this.transformResults=t}}class $p{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $p}static exists(e){return new $p(void 0,e)}static updateTime(e){return new $p(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gp(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Zp{}function Wp(e,t,n){e instanceof Xp?function(e,t,n){const r=e.value.clone(),s=nf(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ef?function(e,t,n){if(!Gp(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=nf(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(tf(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kp(e,t,n){e instanceof Xp?function(e,t,n){if(!Gp(e.precondition,t))return;const r=e.value.clone(),s=rf(e.fieldTransforms,n,t);r.setAll(s),t.convertToFoundDocument(Jp(t),r).setHasLocalMutations()}(e,t,n):e instanceof ef?function(e,t,n){if(!Gp(e.precondition,t))return;const r=rf(e.fieldTransforms,n,t),s=t.data;s.setAll(tf(e)),s.setAll(r),t.convertToFoundDocument(Jp(t),s).setHasLocalMutations()}(e,t,n):function(e,t){Gp(e.precondition,t)&&t.convertToNoDocument(ad.min())}(e,t)}function Qp(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Dp(r.transform,e||null);null!=s&&(null==n&&(n=Bd.empty()),n.set(r.field,s))}return n||null}function Yp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sd(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fp&&t instanceof Fp||e instanceof Up&&t instanceof Up?sd(e.elements,t.elements,Ad):e instanceof qp&&t instanceof qp?Ad(e.C,t.C):e instanceof Lp&&t instanceof Lp}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Jp(e){return e.isFoundDocument()?e.version:ad.min()}class Xp extends Zp{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class ef extends Zp{constructor(e,t,n,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}}function tf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function nf(e,t,n){const r=new Map;zh(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Op(o,a,n[s]))}return r}function rf(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Pp(e,i,t))}return r}class sf extends Zp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class of extends Zp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class af{constructor(e){this.count=e}}var lf,uf;function cf(e){switch(e){case $h.OK:return Bh();case $h.CANCELLED:case $h.UNKNOWN:case $h.DEADLINE_EXCEEDED:case $h.RESOURCE_EXHAUSTED:case $h.INTERNAL:case $h.UNAVAILABLE:case $h.UNAUTHENTICATED:return!1;case $h.INVALID_ARGUMENT:case $h.NOT_FOUND:case $h.ALREADY_EXISTS:case $h.PERMISSION_DENIED:case $h.FAILED_PRECONDITION:case $h.ABORTED:case $h.OUT_OF_RANGE:case $h.UNIMPLEMENTED:case $h.DATA_LOSS:return!0;default:return Bh()}}function hf(e){if(void 0===e)return jh("GRPC error has no .code"),$h.UNKNOWN;switch(e){case lf.OK:return $h.OK;case lf.CANCELLED:return $h.CANCELLED;case lf.UNKNOWN:return $h.UNKNOWN;case lf.DEADLINE_EXCEEDED:return $h.DEADLINE_EXCEEDED;case lf.RESOURCE_EXHAUSTED:return $h.RESOURCE_EXHAUSTED;case lf.INTERNAL:return $h.INTERNAL;case lf.UNAVAILABLE:return $h.UNAVAILABLE;case lf.UNAUTHENTICATED:return $h.UNAUTHENTICATED;case lf.INVALID_ARGUMENT:return $h.INVALID_ARGUMENT;case lf.NOT_FOUND:return $h.NOT_FOUND;case lf.ALREADY_EXISTS:return $h.ALREADY_EXISTS;case lf.PERMISSION_DENIED:return $h.PERMISSION_DENIED;case lf.FAILED_PRECONDITION:return $h.FAILED_PRECONDITION;case lf.ABORTED:return $h.ABORTED;case lf.OUT_OF_RANGE:return $h.OUT_OF_RANGE;case lf.UNIMPLEMENTED:return $h.UNIMPLEMENTED;case lf.DATA_LOSS:return $h.DATA_LOSS;default:return Bh()}}(uf=lf||(lf={}))[uf.OK=0]="OK",uf[uf.CANCELLED=1]="CANCELLED",uf[uf.UNKNOWN=2]="UNKNOWN",uf[uf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",uf[uf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",uf[uf.NOT_FOUND=5]="NOT_FOUND",uf[uf.ALREADY_EXISTS=6]="ALREADY_EXISTS",uf[uf.PERMISSION_DENIED=7]="PERMISSION_DENIED",uf[uf.UNAUTHENTICATED=16]="UNAUTHENTICATED",uf[uf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",uf[uf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",uf[uf.ABORTED=10]="ABORTED",uf[uf.OUT_OF_RANGE=11]="OUT_OF_RANGE",uf[uf.UNIMPLEMENTED=12]="UNIMPLEMENTED",uf[uf.INTERNAL=13]="INTERNAL",uf[uf.UNAVAILABLE=14]="UNAVAILABLE",uf[uf.DATA_LOSS=15]="DATA_LOSS";class df{constructor(e,t){this.comparator=e,this.root=t||ff.EMPTY}insert(e,t){return new df(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ff.BLACK,null,null))}remove(e){return new df(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ff.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pf(this.root,e,this.comparator,!1)}getReverseIterator(){return new pf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pf(this.root,e,this.comparator,!0)}}class pf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ff{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ff.RED,this.left=null!=r?r:ff.EMPTY,this.right=null!=s?s:ff.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ff(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ff.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ff.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ff.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ff.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bh();if(this.right.isRed())throw Bh();const e=this.left.check();if(e!==this.right.check())throw Bh();return e+(this.isRed()?0:1)}}ff.EMPTY=null,ff.RED=!0,ff.BLACK=!1,ff.EMPTY=new class{constructor(){this.size=0}get key(){throw Bh()}get value(){throw Bh()}get color(){throw Bh()}get left(){throw Bh()}get right(){throw Bh()}copy(e,t,n,r,s){return this}insert(e,t,n){return new ff(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mf{constructor(e){this.comparator=e,this.data=new df(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gf(this.data.getIterator())}getIteratorFrom(e){return new gf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mf(this.comparator);return t.data=e,t}}class gf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const yf=new df(kd.comparator);function _f(){return yf}const vf=new df(kd.comparator);function wf(){return vf}const bf=new df(kd.comparator);function Tf(){return bf}const If=new mf(kd.comparator);function Ef(...e){let t=If;for(const n of e)t=t.add(n);return t}const Sf=new mf(rd);function Cf(){return Sf}class kf{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,xf.createSynthesizedTargetChangeForCurrentChange(e,t)),new kf(ad.min(),n,Cf(),_f(),Ef())}}class xf{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xf(gd.EMPTY_BYTE_STRING,t,Ef(),Ef(),Ef())}}class Af{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class Nf{constructor(e,t){this.targetId=e,this.O=t}}class Rf{constructor(e,t,n=gd.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Pf{constructor(){this.F=0,this.M=Lf(),this.L=gd.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=Ef(),t=Ef(),n=Ef();return this.M.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bh()}}),new xf(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=Lf()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class Of{constructor(e){this.tt=e,this.et=new Map,this.nt=_f(),this.st=Df(),this.it=new mf(rd)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ct(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Bh()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Kd(e))if(0===n){const n=new kd(e.path);this.at(t,n,Hd.newNoDocument(n,ad.min()))}else zh(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const s=this.dt(r);if(s){if(n.current&&Kd(s.target)){const t=new kd(s.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.at(r,t,Hd.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=Ef();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new kf(e,t,this.it,this.nt,n);return this.nt=_f(),this.st=Df(),this.it=new mf(rd),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}at(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new Pf,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new mf(rd),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Uh("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}lt(e){this.et.set(e,new Pf),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function Df(){return new df(kd.comparator)}function Lf(){return new df(kd.comparator)}const Ff={asc:"ASCENDING",desc:"DESCENDING"},Mf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Uf{constructor(e,t){this.databaseId=e,this.D=t}}function jf(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qf(e,t){return e.D?t.toBase64():t.toUint8Array()}function Vf(e,t){return jf(e,t.toTimestamp())}function Bf(e){return zh(!!e),ad.fromTimestamp(function(e){const t=_d(e);return new od(t.seconds,t.nanos)}(e))}function zf(e,t){return function(e){return new dd(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Hf(e){const t=dd.fromString(e);return zh(fm(t)),t}function $f(e,t){return zf(e.databaseId,t.path)}function Gf(e,t){const n=Hf(t);if(n.get(1)!==e.databaseId.projectId)throw new Gh($h.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Gh($h.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new kd(Qf(n))}function Zf(e,t){return zf(e.databaseId,t)}function Wf(e){const t=Hf(e);return 4===t.length?dd.emptyPath():Qf(t)}function Kf(e){return new dd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Qf(e){return zh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Yf(e,t,n){return{name:$f(e,t),fields:n.value.mapValue.fields}}function Jf(e,t,n){const r=Gf(e,t.name),s=Bf(t.updateTime),i=new Bd({mapValue:{fields:t.fields}}),o=Hd.newFoundDocument(r,s,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Xf(e,t){let n;if(t instanceof Xp)n={update:Yf(e,t.key,t.value)};else if(t instanceof sf)n={delete:$f(e,t.key)};else if(t instanceof ef)n={update:Yf(e,t.key,t.data),updateMask:pm(t.fieldMask)};else{if(!(t instanceof of))return Bh();n={verify:$f(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Lp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Up)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qp)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Bh()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Vf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bh()}(e,t.precondition)),n}function em(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?$p.updateTime(Bf(e.updateTime)):void 0!==e.exists?$p.exists(e.exists):$p.none()}(t.currentDocument):$p.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(zh("REQUEST_TIME"===t.setToServerValue),n=new Lp):"appendMissingElements"in t?n=new Fp(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Up(t.removeAllFromArray.values||[]):"increment"in t?n=new qp(e,t.increment):Bh();const r=fd.fromServerFormat(t.fieldPath);return new zp(r,n)}(e,t)):[];if(t.update){const s=Gf(e,t.update.name),i=new Bd({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new md((e.fieldPaths||[]).map(e=>fd.fromServerFormat(e)))}(t.updateMask);return new ef(s,i,e,n,r)}return new Xp(s,i,n,r)}if(t.delete){const r=Gf(e,t.delete);return new sf(r,n)}if(t.verify){const r=Gf(e,t.verify);return new of(r,n)}return Bh()}function tm(e,t){return{documents:[Zf(e,t.path)]}}function nm(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Zf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Zf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(jd(e.value))return{unaryFilter:{field:um(e.field),op:"IS_NAN"}};if(Ud(e.value))return{unaryFilter:{field:um(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jd(e.value))return{unaryFilter:{field:um(e.field),op:"IS_NOT_NAN"}};if(Ud(e.value))return{unaryFilter:{field:um(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:um(e.field),op:lm(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:um(e.field),direction:am(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(e,t){return e.D||Ed(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=im(t.startAt)),t.endAt&&(n.structuredQuery.endAt=im(t.endAt)),n}function rm(e){let t=Wf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){zh(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=sm(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new ap(cm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ed(t)?null:t}(n.limit));let l=null;n.startAt&&(l=om(n.startAt));let u=null;return n.endAt&&(u=om(n.endAt)),dp(t,s,o,i,a,"F",l,u)}function sm(e){return e?void 0!==e.unaryFilter?[dm(e)]:void 0!==e.fieldFilter?[hm(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>sm(e)).reduce((e,t)=>e.concat(t)):Bh():[]}function im(e){return{before:e.before,values:e.position}}function om(e){return new ip(e.values||[],!!e.before)}function am(e){return Ff[e]}function lm(e){return Mf[e]}function um(e){return{fieldPath:e.canonicalString()}}function cm(e){return fd.fromServerFormat(e.fieldPath)}function hm(e){return Qd.create(cm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bh()}}(e.fieldFilter.op),e.fieldFilter.value)}function dm(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cm(e.unaryFilter.field);return Qd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=cm(e.unaryFilter.field);return Qd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cm(e.unaryFilter.field);return Qd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cm(e.unaryFilter.field);return Qd.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bh()}}function pm(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function fm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function mm(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ym(t)),t=gm(e.get(n),t);return ym(t)}function gm(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function ym(e){return e+"\x01\x01"}function _m(e){const t=e.length;if(zh(t>=2),2===t)return zh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),dd.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf("\x01",i);switch((t<0||t>n)&&Bh(),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:Bh()}i=t+2}return new dd(r)}class vm{constructor(e,t){this.seconds=e,this.nanoseconds=t}}let wm=(()=>{class e{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}return e.store="owner",e.key="owner",e})(),bm=(()=>{class e{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}return e.store="mutationQueues",e.keyPath="userId",e})();class Tm{constructor(e,t,n,r,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=s}}Tm.store="mutations",Tm.keyPath="batchId",Tm.userMutationsIndex="userMutationsIndex",Tm.userMutationsKeyPath=["userId","batchId"];let Im=(()=>{class e{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,mm(t)]}static key(e,t,n){return[e,mm(t),n]}}return e.store="documentMutations",e.PLACEHOLDER=new e,e})();class Em{constructor(e,t){this.path=e,this.readTime=t}}class Sm{constructor(e,t){this.path=e,this.version=t}}class Cm{constructor(e,t,n,r,s,i){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=s,this.parentPath=i}}Cm.store="remoteDocuments",Cm.readTimeIndex="readTimeIndex",Cm.readTimeIndexPath="readTime",Cm.collectionReadTimeIndex="collectionReadTimeIndex",Cm.collectionReadTimeIndexPath=["parentPath","readTime"];let km=(()=>{class e{constructor(e){this.byteSize=e}}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e})();class xm{constructor(e,t,n,r,s,i,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=i,this.query=o}}xm.store="targets",xm.keyPath="targetId",xm.queryTargetsIndexName="queryTargetsIndex",xm.queryTargetsKeyPath=["canonicalId","targetId"];class Am{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Am.store="targetDocuments",Am.keyPath=["targetId","path"],Am.documentTargetsIndex="documentTargetsIndex",Am.documentTargetsKeyPath=["path","targetId"];let Nm=(()=>{class e{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}return e.key="targetGlobalKey",e.store="targetGlobal",e})(),Rm=(()=>{class e{constructor(e,t){this.collectionId=e,this.parent=t}}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e})(),Pm=(()=>{class e{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}return e.store="clientMetadata",e.keyPath="clientId",e})(),Om=(()=>{class e{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}return e.store="bundles",e.keyPath="bundleId",e})(),Dm=(()=>{class e{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}return e.store="namedQueries",e.keyPath="name",e})();const Lm=[bm.store,Tm.store,Im.store,Cm.store,xm.store,wm.store,Nm.store,Am.store,Pm.store,km.store,Rm.store,Om.store,Dm.store],Fm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Um{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bh(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Um((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Um?t:Um.resolve(t)}catch(e){return Um.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Um.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Um.reject(t)}static resolve(e){return new Um((t,n)=>{t(e)})}static reject(e){return new Um((t,n)=>{n(e)})}static waitFor(e){return new Um((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Um.resolve(!1);for(const n of e)t=t.next(e=>e?Um.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class jm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Tt=new Zh,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{t.error?this.Tt.reject(new Bm(e,t.error)):this.Tt.resolve()},this.transaction.onerror=t=>{const n=Zm(t.target.error);this.Tt.reject(new Bm(e,n))}}static open(e,t,n,r){try{return new jm(t,e.transaction(r,n))}catch(e){throw new Bm(t,e)}}get It(){return this.Tt.promise}abort(e){e&&this.Tt.reject(e),this.aborted||(Uh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Hm(t)}}class qm{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===qm.Rt((0,ka.z$)())&&jh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Uh("SimpleDb","Removing database:",e),$m(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,ka.hl)())return!1;if(qm.Pt())return!0;const e=(0,ka.z$)(),t=qm.Rt(e),n=0<t&&t<10,r=qm.vt(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Dt(e){var t=this;return(0,Ia.Z)(function*(){return t.db||(Uh("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=e=>{n(e.target.result)},s.onblocked=()=>{r(new Bm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Gh($h.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Gh($h.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Bm(e,n))},s.onupgradeneeded=e=>{Uh("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.At.Ct(e.target.result,s.transaction,e.oldVersion,t.version).next(()=>{Uh("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=e=>t.Nt(e)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var s=this;return(0,Ia.Z)(function*(){const i="readonly"===t;let o=0;for(;;){++o;try{s.db=yield s.Dt(e);const t=jm.open(s.db,e,i?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),Um.reject(e))).toPromise();return o.catch(()=>{}),yield t.It,o}catch(e){const n="FirebaseError"!==e.name&&o<3;if(Uh("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),s.close(),!n)return Promise.reject(e)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Vm{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return $m(this.kt.delete())}}class Bm extends Gh{constructor(e,t){super($h.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zm(e){return"IndexedDbTransactionError"===e.name}class Hm{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Uh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Uh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$m(n)}add(e){return Uh("SimpleDb","ADD",this.store.name,e,e),$m(this.store.add(e))}get(e){return $m(this.store.get(e)).next(t=>(void 0===t&&(t=null),Uh("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Uh("SimpleDb","DELETE",this.store.name,e),$m(this.store.delete(e))}count(){return Uh("SimpleDb","COUNT",this.store.name),$m(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){Uh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new Um((n,r)=>{t.onerror=e=>{const t=Zm(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new Um((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new Vm(s),o=t(s.primaryKey,s.value,i);if(o instanceof Um){const e=o.catch(e=>(i.done(),Um.reject(e)));n.push(e)}i.isDone?r():null===i.Ft?s.continue():s.continue(i.Ft)}}).next(()=>Um.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $m(e){return new Um((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Zm(e.target.error);n(t)}})}let Gm=!1;function Zm(e){const t=qm.Rt((0,ka.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Gh("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gm||(Gm=!0,setTimeout(()=>{throw e},0)),e}}return e}class Wm extends Mm{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Km(e,t){const n=Hh(e);return qm.St(n.Qt,t)}class Qm{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wp(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Kp(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Kp(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(ad.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ef())}isEqual(e){return this.batchId===e.batchId&&sd(this.mutations,e.mutations,(e,t)=>Yp(e,t))&&sd(this.baseMutations,e.baseMutations,(e,t)=>Yp(e,t))}}class Ym{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zh(e.mutations.length===n.length);let r=Tf();const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ym(e,t,n,r)}}class Jm{constructor(e,t,n,r,s=ad.min(),i=ad.min(),o=gd.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o}withSequenceNumber(e){return new Jm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Xm{constructor(e){this.Wt=e}}function eg(e,t){if(t.document)return Jf(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=kd.fromSegments(t.noDocument.path),n=ig(t.noDocument.readTime),r=Hd.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=kd.fromSegments(t.unknownDocument.path),n=ig(t.unknownDocument.version);return Hd.newUnknownDocument(e,n)}return Bh()}function tg(e,t,n){const r=ng(n),s=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:$f(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jf(e,t.version.toTimestamp())}}(e.Wt,t);return new Cm(null,null,n,t.hasCommittedMutations,r,s)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=sg(t.version),i=t.hasCommittedMutations;return new Cm(null,new Em(e,n),null,i,r,s)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=sg(t.version);return new Cm(new Sm(e,n),null,null,!0,r,s)}return Bh()}function ng(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rg(e){const t=new od(e[0],e[1]);return ad.fromTimestamp(t)}function sg(e){const t=e.toTimestamp();return new vm(t.seconds,t.nanoseconds)}function ig(e){const t=new od(e.seconds,e.nanoseconds);return ad.fromTimestamp(t)}function og(e,t){const n=(t.baseMutations||[]).map(t=>em(e.Wt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform&&(e.updateTransforms=t.mutations[i+1].transform.fieldTransforms,t.mutations.splice(i+1,1),++i)}const r=t.mutations.map(t=>em(e.Wt,t)),s=od.fromMillis(t.localWriteTimeMs);return new Qm(t.batchId,s,n,r)}function ag(e){const t=ig(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?ig(e.lastLimboFreeSnapshotVersion):ad.min();let r;var s;return void 0!==e.query.documents?(zh(1===(s=e.query).documents.length),r=wp(pp(Wf(s.documents[0])))):r=function(e){return wp(rm(e))}(e.query),new Jm(r,e.targetId,0,e.lastListenSequenceNumber,t,n,gd.fromBase64String(e.resumeToken))}function lg(e,t){const n=sg(t.snapshotVersion),r=sg(t.lastLimboFreeSnapshotVersion);let s;s=Kd(t.target)?tm(e.Wt,t.target):nm(e.Wt,t.target);const i=t.resumeToken.toBase64();return new xm(t.targetId,Zd(t.target),n,i,t.sequenceNumber,r,s)}function ug(e){const t=rm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bp(t,t.limit,"L"):t}class cg{getBundleMetadata(e,t){return hg(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:ig(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return hg(e).put({bundleId:(n=t).id,createTime:sg(Bf(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return dg(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:ug(t.bundledQuery),readTime:ig(t.readTime)};var t})}saveNamedQuery(e,t){return dg(e).put(function(e){return{name:e.name,readTime:sg(Bf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function hg(e){return Km(e,Om.store)}function dg(e){return Km(e,Dm.store)}class pg{constructor(){this.Gt=new fg}addToCollectionParentIndex(e,t){return this.Gt.add(t),Um.resolve()}getCollectionParents(e,t){return Um.resolve(this.Gt.getEntries(t))}}class fg{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mf(dd.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mf(dd.comparator)).toArray()}}class mg{constructor(){this.zt=new fg}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const s={collectionId:n,parent:mm(r)};return gg(e).put(s)}return Um.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[id(t),""],!1,!0);return gg(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(_m(r.parent))}return n})}}function gg(e){return Km(e,Rm.store)}const yg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class _g{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new _g(e,_g.DEFAULT_COLLECTION_PERCENTILE,_g.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function vg(e,t,n){const r=e.store(Tm.store),s=e.store(Im.store),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));i.push(l.next(()=>{zh(1===a)}));const u=[];for(const c of n.mutations){const e=Im.key(t,c.key.path,n.batchId);i.push(s.delete(e)),u.push(c.key)}return Um.waitFor(i).next(()=>u)}function wg(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Bh();t=e.noDocument}return JSON.stringify(t).length}_g.DEFAULT_COLLECTION_PERCENTILE=10,_g.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_g.DEFAULT=new _g(41943040,_g.DEFAULT_COLLECTION_PERCENTILE,_g.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_g.DISABLED=new _g(-1,0,0);class bg{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){zh(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new bg(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ig(e).Kt({index:Tm.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=Eg(e),i=Ig(e);return i.add({}).next(o=>{zh("number"==typeof o);const a=new Qm(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>Xf(e.Wt,t)),s=n.mutations.map(t=>Xf(e.Wt,t));return new Tm(t,n.batchId,n.localWriteTime.toMillis(),r,s)}(this.N,this.userId,a),u=[];let c=new mf((e,t)=>rd(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Im.key(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(i.put(l)),u.push(s.put(t,Im.PLACEHOLDER))}return c.forEach(t=>{u.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),Um.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return Ig(e).get(t).next(e=>e?(zh(e.userId===this.userId),og(this.N,e)):null)}Xt(e,t){return this.Jt[t]?Um.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Ig(e).Kt({index:Tm.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(zh(t.batchId>=n),s=og(this.N,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ig(e).Kt({index:Tm.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ig(e).Lt(Tm.userMutationsIndex,t).next(e=>e.map(e=>og(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Im.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return Eg(e).Kt({range:r},(n,r,i)=>{const[o,a,l]=n,u=_m(a);if(o===this.userId&&t.path.isEqual(u))return Ig(e).get(l).next(e=>{if(!e)throw Bh();zh(e.userId===this.userId),s.push(og(this.N,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mf(rd);const r=[];return t.forEach(t=>{const s=Im.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=Eg(e).Kt({range:i},(e,r,s)=>{const[i,o,a]=e,l=_m(o);i===this.userId&&t.path.isEqual(l)?n=n.add(a):s.done()});r.push(o)}),Um.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=Im.prefixForPath(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new mf(rd);return Eg(e).Kt({range:i},(e,t,s)=>{const[i,a,l]=e,u=_m(a);i===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):s.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Ig(e).get(t).next(e=>{if(null===e)throw Bh();zh(e.userId===this.userId),n.push(og(this.N,e))}))}),Um.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return vg(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Um.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Um.resolve();const n=IDBKeyRange.lowerBound(Im.prefixForUser(this.userId)),r=[];return Eg(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=_m(e[1]);r.push(t)}else n.done()}).next(()=>{zh(0===r.length)})})}containsKey(e,t){return Tg(e,this.userId,t)}ee(e){return Sg(e).get(this.userId).next(e=>e||new bm(this.userId,-1,""))}}function Tg(e,t,n){const r=Im.prefixForPath(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Eg(e).Kt({range:i,qt:!0},(e,n,r)=>{const[i,a,l]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function Ig(e){return Km(e,Tm.store)}function Eg(e){return Km(e,Im.store)}function Sg(e){return Km(e,bm.store)}class Cg{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Cg(0)}static ie(){return new Cg(-1)}}class kg{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new Cg(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>ad.fromTimestamp(new od(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ce(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xg(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(zh(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return xg(e).Kt((i,o)=>{const a=ag(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>Um.waitFor(s)).next(()=>r)}forEachTarget(e,t){return xg(e).Kt((e,n)=>{const r=ag(n);t(r)})}re(e){return Ag(e).get(Nm.key).next(e=>(zh(null!==e),e))}oe(e,t){return Ag(e).put(Nm.key,t)}ae(e,t){return xg(e).put(lg(this.N,t))}ce(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Zd(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return xg(e).Kt({range:r,index:xm.queryTargetsIndexName},(e,n,r)=>{const i=ag(n);Wd(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=Ng(e);return t.forEach(t=>{const i=mm(t.path);r.push(s.put(new Am(n,i))),r.push(this.referenceDelegate.addReference(e,n,t))}),Um.waitFor(r)}removeMatchingKeys(e,t,n){const r=Ng(e);return Um.forEach(t,t=>{const s=mm(t.path);return Um.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Ng(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ng(e);let s=Ef();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=_m(e[1]),i=new kd(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=mm(t.path),r=IDBKeyRange.bound([n],[id(n)],!1,!0);let s=0;return Ng(e).Kt({index:Am.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(s++,r.done())}).next(()=>s>0)}Et(e,t){return xg(e).get(t).next(e=>e?ag(e):null)}}function xg(e){return Km(e,xm.store)}function Ag(e){return Km(e,Nm.store)}function Ng(e){return Km(e,Am.store)}function Rg(e){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,Ia.Z)(function*(e){if(e.code!==$h.FAILED_PRECONDITION||e.message!==Fm)throw e;Uh("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Og([e,t],[n,r]){const s=rd(e,n);return 0===s?rd(t,r):s}class Dg{constructor(e){this.ue=e,this.buffer=new mf(Og),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Og(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lg{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const n=this.de?3e5:6e4;Uh("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Ia.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(e){zm(e)?Uh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield Rg(e)}yield t._e(e)}))}}class Fg{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Um.resolve(ed.T);const n=new Dg(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Uh("LruGarbageCollector","Garbage collection skipped; disabled"),Um.resolve(yg)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Uh("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yg):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,s,i,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Uh("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Mh()<=Ca.in.DEBUG&&Uh("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-u}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${s} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-u}ms`),Um.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}class Mg{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new Fg(e,t)}(this,t)}ge(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Te(e,(e,n)=>t(n))}addReference(e,t,n){return Ug(e,n)}removeReference(e,t,n){return Ug(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ug(e,t)}Ie(e,t){return function(e,t){let n=!1;return Sg(e).jt(r=>Tg(e,r,t).next(e=>(e&&(n=!0),Um.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Te(e,(i,o)=>{if(o<=t){const t=this.Ie(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i),Ng(e).delete([0,mm(i.path)])))});r.push(t)}}).next(()=>Um.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ug(e,t)}Te(e,t){const n=Ng(e);let r,s=ed.T;return n.Kt({index:Am.documentTargetsIndex},([e,n],{path:i,sequenceNumber:o})=>{0===e?(s!==ed.T&&t(new kd(_m(r)),s),s=o,r=i):s=ed.T}).next(()=>{s!==ed.T&&t(new kd(_m(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ug(e,t){return Ng(e).put(function(e,t){return new Am(0,mm(e.path),t)}(t,e.currentSequenceNumber))}class jg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){ud(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return cd(this.inner)}}class qg{constructor(){this.changes=new jg(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:ad.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Hd.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Um.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vg{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Hg(e).put($g(t),n)}removeEntry(e,t){const n=Hg(e),r=$g(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Hg(e).get($g(t)).next(e=>this.Re(t,e))}be(e,t){return Hg(e).get($g(t)).next(e=>({document:this.Re(t,e),size:wg(e)}))}getEntries(e,t){let n=_f();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=_f(),r=new df(kd.comparator);return this.Pe(e,t,(e,t)=>{const s=this.Re(e,t);n=n.insert(e,s),r=r.insert(e,wg(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return Um.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let i=s.getNext();return Hg(e).Kt({range:r},(e,t,r)=>{const o=kd.fromSegments(e);for(;i&&kd.comparator(i,o)<0;)n(i,null),i=s.getNext();i&&i.isEqual(o)&&(n(i,t),i=s.hasNext()?s.getNext():null),i?r.Mt(i.path.toArray()):r.done()}).next(()=>{for(;i;)n(i,null),i=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=_f();const s=t.path.length+1,i={};if(n.isEqual(ad.min())){const e=t.path.toArray();i.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=ng(n);i.range=IDBKeyRange.lowerBound([e,r],!0),i.index=Cm.collectionReadTimeIndex}return Hg(e).Kt(i,(e,n,i)=>{if(e.length!==s)return;const o=eg(this.N,n);t.path.isPrefixOf(o.key.path)?Sp(t,o)&&(r=r.insert(o.key,o)):i.done()}).next(()=>r)}newChangeBuffer(e){return new Bg(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return zg(e).get(km.key).next(e=>(zh(!!e),e))}Ae(e,t){return zg(e).put(km.key,t)}Re(e,t){if(t){const e=eg(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(ad.min()))return e}return Hd.newInvalidDocument(e)}}class Bg extends qg{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new jg(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new mf((e,t)=>rd(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.De.get(s);if(i.document.isValidDocument()){const a=tg(this.Se.N,i.document,this.getReadTime(s));r=r.add(s.path.popLast());const l=wg(a);n+=l-o,t.push(this.Se.addEntry(e,s,a))}else if(n-=o,this.trackRemovals){const n=tg(this.Se.N,Hd.newNoDocument(s,ad.min()),this.getReadTime(s));t.push(this.Se.addEntry(e,s,n))}else t.push(this.Se.removeEntry(e,s))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),Um.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function zg(e){return Km(e,km.store)}function Hg(e){return Km(e,Cm.store)}function $g(e){return e.path.toArray()}class Gg{constructor(e){this.N=e}Ct(e,t,n,r){zh(n<r&&n>=0&&r<=11);const s=new jm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(wm.store)}(e),function(e){e.createObjectStore(bm.store,{keyPath:bm.keyPath}),e.createObjectStore(Tm.store,{keyPath:Tm.keyPath,autoIncrement:!0}).createIndex(Tm.userMutationsIndex,Tm.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Im.store)}(e),Zg(e),function(e){e.createObjectStore(Cm.store)}(e));let i=Um.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Am.store),e.deleteObjectStore(xm.store),e.deleteObjectStore(Nm.store)}(e),Zg(e)),i=i.next(()=>function(e){const t=e.store(Nm.store),n=new Nm(0,0,ad.min().toTimestamp(),0);return t.put(Nm.key,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(Tm.store).Lt().next(n=>{e.deleteObjectStore(Tm.store),e.createObjectStore(Tm.store,{keyPath:Tm.keyPath,autoIncrement:!0}).createIndex(Tm.userMutationsIndex,Tm.userMutationsKeyPath,{unique:!0});const r=t.store(Tm.store),s=n.map(e=>r.put(e));return Um.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(Pm.store,{keyPath:Pm.keyPath})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.Ce(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(km.store)}(e),this.Ne(s)))),n<7&&r>=7&&(i=i.next(()=>this.xe(s))),n<8&&r>=8&&(i=i.next(()=>this.ke(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(Cm.store);t.createIndex(Cm.readTimeIndex,Cm.readTimeIndexPath,{unique:!1}),t.createIndex(Cm.collectionReadTimeIndex,Cm.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(i=i.next(()=>this.$e(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(Om.store,{keyPath:Om.keyPath})}(e),function(e){e.createObjectStore(Dm.store,{keyPath:Dm.keyPath})}(e)})),i}Ne(e){let t=0;return e.store(Cm.store).Kt((e,n)=>{t+=wg(n)}).next(()=>{const n=new km(t);return e.store(km.store).put(km.key,n)})}Ce(e){const t=e.store(bm.store),n=e.store(Tm.store);return t.Lt().next(t=>Um.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(Tm.userMutationsIndex,r).next(n=>Um.forEach(n,n=>{zh(n.userId===t.userId);const r=og(this.N,n);return vg(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(Am.store),n=e.store(Cm.store);return e.store(Nm.store).get(Nm.key).next(e=>{const r=[];return n.Kt((n,s)=>{const i=new dd(n),o=function(e){return[0,mm(e)]}(i);r.push(t.get(o).next(n=>n?Um.resolve():(n=>t.put(new Am(0,mm(n),e.highestListenSequenceNumber)))(i)))}).next(()=>Um.waitFor(r))})}ke(e,t){e.createObjectStore(Rm.store,{keyPath:Rm.keyPath});const n=t.store(Rm.store),r=new fg,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:mm(r)})}};return t.store(Cm.store).Kt({qt:!0},(e,t)=>{const n=new dd(e);return s(n.popLast())}).next(()=>t.store(Im.store).Kt({qt:!0},([e,t,n],r)=>{const i=_m(t);return s(i.popLast())}))}$e(e){const t=e.store(xm.store);return t.Kt((e,n)=>{const r=ag(n),s=lg(this.N,r);return t.put(s)})}}function Zg(e){e.createObjectStore(Am.store,{keyPath:Am.keyPath}).createIndex(Am.documentTargetsIndex,Am.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(xm.store,{keyPath:xm.keyPath}).createIndex(xm.queryTargetsIndexName,xm.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Nm.store)}const Wg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kg{constructor(e,t,n,r,s,i,o,a,l,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=s,this.window=i,this.document=o,this.Fe=l,this.Me=u,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Kg.bt())throw new Gh($h.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mg(this,r),this.We=t+"main",this.N=new Xm(a),this.Ge=new qm(this.We,11,new Gg(this.N)),this.ze=new kg(this.referenceDelegate,this.N),this.Ht=new mg,this.He=function(e,t){return new Vg(e,t)}(this.N,this.Ht),this.Je=new cg,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===u&&jh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Gh($h.FAILED_PRECONDITION,Wg);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ed(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var n=(0,Ia.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,Ia.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ia.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yg(e).put(new Pm(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(zm(e))return Uh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Uh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Qg(e).get(wm.key).next(e=>Um.resolve(this.cn(e)))}un(e){return Yg(e).delete(this.clientId)}hn(){var e=this;return(0,Ia.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Km(t,Pm.store);return n.Lt().next(t=>{const r=e.fn(t,18e5),s=t.filter(e=>-1===r.indexOf(e));return Um.forEach(s,e=>n.delete(e.clientId)).next(()=>s)})}).catch(()=>[]);if(e.Ye)for(const n of t)e.Ye.removeItem(e.dn(n.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Um.resolve(!0):Qg(e).get(wm.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.cn(t)&&this.networkEnabled)return!0;if(!this.cn(t)){if(!t.allowTabSynchronization)throw new Gh($h.FAILED_PRECONDITION,Wg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yg(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Uh("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Ia.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[wm.store,Pm.store],t=>{const n=new Wm(t,ed.T);return e.on(n).next(()=>e.un(n))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Yg(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return bg.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return Uh("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",Lm,s=>(r=new Wm(s,this.Le?this.Le.next():ed.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw jh(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Gh($h.FAILED_PRECONDITION,Fm);return n(r)}).next(e=>this.an(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return Qg(e).get(wm.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.cn(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Gh($h.FAILED_PRECONDITION,Wg)})}an(e){const t=new wm(this.clientId,this.allowTabSynchronization,Date.now());return Qg(e).put(wm.key,t)}static bt(){return qm.bt()}on(e){const t=Qg(e);return t.get(wm.key).next(e=>this.cn(e)?(Uh("IndexedDbPersistence","Releasing primary lease."),t.delete(wm.key)):Um.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(jh(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,ka.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Uh("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return jh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){jh("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qg(e){return Km(e,wm.store)}function Yg(e){return Km(e,Pm.store)}function Jg(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Xg{constructor(e,t){this.progress=e,this.Tn=t}}class ey{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return kd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):_p(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new kd(t)).next(e=>{let t=wf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let s=wf();return this.Ht.getCollectionParents(e,r).next(i=>Um.forEach(i,i=>{const o=function(e,t){return new hp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}Dn(e,t,n){let r,s;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(s=t,this.Cn(e,s,r).next(e=>{r=e;for(const t of s)for(const e of t.mutations){const n=e.key;let s=r.get(n);null==s&&(s=Hd.newInvalidDocument(n),r=r.insert(n,s)),Kp(e,s,t.localWriteTime),s.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Sp(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=Ef();for(const i of t)for(const e of i.mutations)e instanceof ef&&null===n.get(e.key)&&(r=r.add(e.key));let s=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(s=s.insert(e,t))}),s))}}class ty{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=Ef(),r=Ef();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ty(e,t.fromCache,n,r)}}class ny{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ad.min())?this.Fn(e,t):this.On.Pn(e,r).next(s=>{const i=this.Mn(t,s);return(fp(t)||mp(t))&&this.Ln(t.limitType,i,r,n)?this.Fn(e,t):(Mh()<=Ca.in.DEBUG&&Uh("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ep(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(i.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new mf(Cp(e));return t.forEach((t,r)=>{Sp(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Fn(e,t){return Mh()<=Ca.in.DEBUG&&Uh("QueryEngine","Using full collection scan to execute query:",Ep(t)),this.On.getDocumentsMatchingQuery(e,t,ad.min())}}class ry{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new df(rd),this.qn=new jg(e=>Zd(e),Wd),this.Kn=ad.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new ey(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function sy(e,t,n,r){return new ry(e,t,n,r)}function iy(e,t){return oy.apply(this,arguments)}function oy(){return(oy=(0,Ia.Z)(function*(e,t){const n=Hh(e);let r=n.In,s=n.Qn;const i=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.In.getAllMutationBatches(e).next(o=>(i=o,r=n.persistence.getMutationQueue(t),s=new ey(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=Ef();for(const e of i){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return s.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=s,n.Bn.$n(n.Qn),i})).apply(this,arguments)}function ay(e,t){const n=Hh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Um.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);zh(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}function ly(e){const t=Hh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function uy(e,t){const n=Hh(e),r=t.snapshotVersion;let s=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.jn.newChangeBuffer({trackRemovals:!0});s=n.Un;const o=[];t.targetChanges.forEach((t,i)=>{const a=s.get(i);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,i).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,i)));const l=t.resumeToken;if(l.approximateByteSize()>0){const u=a.withResumeToken(l,r).withSequenceNumber(e.currentSequenceNumber);s=s.insert(i,u),function(e,t,n){return zh(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,u,t)&&o.push(n.ze.updateTargetData(e,u))}});let a=_f();if(t.documentUpdates.forEach((r,s)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(cy(e,i,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(ad.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Um.waitFor(o).next(()=>i.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=s,e))}function cy(e,t,n,r,s){let i=Ef();return n.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=_f();return n.forEach((n,o)=>{const a=e.get(n),l=(null==s?void 0:s.get(n))||r;o.isNoDocument()&&o.version.isEqual(ad.min())?(t.removeEntry(n,l),i=i.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,l),i=i.insert(n,o)):Uh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),i})}function hy(e,t){const n=Hh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function dy(e,t){const n=Hh(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(s=>s?(r=s,Um.resolve(r)):n.ze.allocateTargetId(e).next(s=>(r=new Jm(t,s,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}function py(e,t,n){return fy.apply(this,arguments)}function fy(){return(fy=(0,Ia.Z)(function*(e,t,n){const r=Hh(e),s=r.Un.get(t),i=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!zm(e))throw e;Uh("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(s.target)})).apply(this,arguments)}function my(e,t,n){const r=Hh(e);let s=ad.min(),i=Ef();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Hh(e),s=r.qn.get(n);return void 0!==s?Um.resolve(r.Un.get(s)):r.ze.getTargetData(t,n)}(r,e,wp(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?s:ad.min(),n?i:Ef())).next(e=>({documents:e,Gn:i})))}function gy(e,t){const n=Hh(e),r=Hh(n.ze),s=n.Un.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function yy(e){const t=Hh(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Hh(e);let s=_f(),i=ng(n);const o=Hg(t),a=IDBKeyRange.lowerBound(i,!0);return o.Kt({index:Cm.readTimeIndex,range:a},(e,t)=>{const n=eg(r.N,t);s=s.insert(n.key,n),i=t.readTime}).next(()=>({Tn:s,readTime:rg(i)}))}(t.jn,e,t.Kn)).then(({Tn:e,readTime:n})=>(t.Kn=n,e))}function _y(){return(_y=(0,Ia.Z)(function*(e){const t=Hh(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Hg(e);let n=ad.min();return t.Kt({index:Cm.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=rg(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})})).apply(this,arguments)}function vy(){return(vy=(0,Ia.Z)(function*(e,t,n,r){const s=Hh(e);let i=Ef(),o=_f(),a=Tf();for(const c of n){const e=t.zn(c.metadata.name);c.document&&(i=i.add(e)),o=o.insert(e,t.Hn(c)),a=a.insert(e,t.Jn(c.metadata.readTime))}const l=s.jn.newChangeBuffer({trackRemovals:!0}),u=yield dy(s,function(e){return wp(pp(dd.fromString(`__bundle__/docs/${e}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",e=>cy(e,l,o,ad.min(),a).next(t=>(l.apply(e),t)).next(t=>s.ze.removeMatchingKeysForTargetId(e,u.targetId).next(()=>s.ze.addMatchingKeys(e,i,u.targetId)).next(()=>s.Qn.vn(e,t)).next(()=>t)))})).apply(this,arguments)}function wy(e,t){return by.apply(this,arguments)}function by(){return(by=(0,Ia.Z)(function*(e,t,n=Ef()){const r=yield dy(e,wp(ug(t.bundledQuery))),s=Hh(e);return s.persistence.runTransaction("Save named query","readwrite",e=>{const i=Bf(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Je.saveNamedQuery(e,t);const o=r.withResumeToken(gd.EMPTY_BYTE_STRING,i);return s.Un=s.Un.insert(o.targetId,o),s.ze.updateTargetData(e,o).next(()=>s.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>s.ze.addMatchingKeys(e,n,r.targetId)).next(()=>s.Je.saveNamedQuery(e,t))})})).apply(this,arguments)}class Ty{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Um.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:Bf(n.createTime)}),Um.resolve()}getNamedQuery(e,t){return Um.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:ug(e.bundledQuery),readTime:Bf(e.readTime)}}(t)),Um.resolve()}}class Iy{constructor(){this.Zn=new mf(Ey.ts),this.es=new mf(Ey.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new Ey(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new Ey(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new kd(new dd([])),n=new Ey(t,e),r=new Ey(t,e+1),s=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),s.push(e.key)}),s}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new kd(new dd([])),n=new Ey(t,e),r=new Ey(t,e+1);let s=Ef();return this.es.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Ey(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ey{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return kd.comparator(e.key,t.key)||rd(e.ls,t.ls)}static ns(e,t){return rd(e.ls,t.ls)||kd.comparator(e.key,t.key)}}class Sy{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new mf(Ey.ts)}checkEmpty(e){return Um.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const s=this.fs;this.fs++;const i=new Qm(s,t,n,r);this.In.push(i);for(const o of r)this.ds=this.ds.add(new Ey(o.key,s)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return Um.resolve(i)}lookupMutationBatch(e,t){return Um.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return Um.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Um.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Um.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ey(t,0),r=new Ey(t,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);s.push(t)}),Um.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mf(rd);return t.forEach(e=>{const t=new Ey(e,0),r=new Ey(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),Um.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;kd.isDocumentKey(s)||(s=s.child(""));const i=new Ey(new kd(s),0);let o=new mf(rd);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},i),Um.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){zh(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return Um.forEach(t.mutations,r=>{const s=new Ey(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new Ey(t,0),r=this.ds.firstAfterOrEqual(n);return Um.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Um.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class Cy{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new df(kd.comparator),this.size=0}addEntry(e,t,n){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-i,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Um.resolve(n?n.document.clone():Hd.newInvalidDocument(t))}getEntries(e,t){let n=_f();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Hd.newInvalidDocument(e))}),Um.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=_f();const s=new kd(t.path.child("")),i=this.docs.getIteratorFrom(s);for(;i.hasNext();){const{key:e,value:{document:s,readTime:o}}=i.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Sp(t,s)&&(r=r.insert(s.key,s.clone()))}return Um.resolve(r)}Es(e,t){return Um.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ky(this)}getSize(e){return Um.resolve(this.size)}}class ky extends qg{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),Um.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class xy{constructor(e){this.persistence=e,this.Ts=new jg(e=>Zd(e),Wd),this.lastRemoteSnapshotVersion=ad.min(),this.highestTargetId=0,this.Is=0,this.As=new Iy,this.targetCount=0,this.Rs=Cg.se()}forEachTarget(e,t){return this.Ts.forEach((e,n)=>t(n)),Um.resolve()}getLastRemoteSnapshotVersion(e){return Um.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Um.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Um.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Um.resolve()}ae(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Cg(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Um.resolve()}updateTargetData(e,t){return this.ae(t),Um.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Um.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.Ts.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Ts.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Um.waitFor(s).next(()=>r)}getTargetCount(e){return Um.resolve(this.targetCount)}getTargetData(e,t){const n=this.Ts.get(t)||null;return Um.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Um.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Um.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Um.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Um.resolve(n)}containsKey(e,t){return Um.resolve(this.As.containsKey(t))}}class Ay{constructor(e,t){this.bs={},this.Le=new ed(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new xy(this),this.Ht=new pg,this.He=function(e,t){return new Cy(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new Xm(t),this.Je=new Ty(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Sy(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){Uh("MemoryPersistence","Starting transaction:",e);const r=new Ny(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return Um.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class Ny extends Mm{constructor(e){super(),this.currentSequenceNumber=e}}class Ry{constructor(e){this.persistence=e,this.Ds=new Iy,this.Cs=null}static Ns(e){return new Ry(e)}get xs(){if(this.Cs)return this.Cs;throw Bh()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Um.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Um.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Um.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Um.forEach(this.xs,n=>{const r=kd.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Um.or([()=>Um.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function Py(e,t){return`firestore_clients_${e}_${t}`}function Oy(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Dy(e,t){return`firestore_targets_${e}_${t}`}class Ly{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new Gh(r.error.code,r.error.message))),i?new Ly(e,t,r.state,s):(jh("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fy{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new Gh(n.error.code,n.error.message))),s?new Fy(e,n.state,r):(jh("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class My{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=Cf();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=Cd(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new My(e,s):(jh("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Uy{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Uy(t.clientId,t.onlineState):(jh("SharedClientState",`Failed to parse online state: ${e}`),null)}}class jy{constructor(){this.activeTargetIds=Cf()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qy{constructor(e,t,n,r,s){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new df(rd),this.started=!1,this.Ks=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.js=Py(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new jy),this.Ws=new RegExp(`^firestore_clients_${i}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${i}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${i}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ia.Z)(function*(){const t=yield e.syncEngine.pn();for(const r of t){if(r===e.Ls)continue;const t=e.getItem(Py(e.persistenceKey,r));if(t){const n=My.$s(r,t);n&&(e.qs=e.qs.insert(n.clientId,n))}}e.Ys();const n=e.storage.getItem(e.Hs);if(n){const t=e.Xs(n);t&&e.Zs(t)}for(const r of e.Ks)e.Us(r);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Dy(this.persistenceKey,e));if(n){const r=Fy.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dy(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Uh("SharedClientState","READ",e,t),t}setItem(e,t){Uh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Uh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const n=e;if(n.storageArea===this.storage){if(Uh("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void jh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ia.Z)(function*(){if(t.started){if(null!==n.key)if(t.Ws.test(n.key)){if(null==n.newValue){const e=t.ai(n.key);return t.ci(e,null)}{const e=t.ui(n.key,n.newValue);if(e)return t.ci(e.clientId,e)}}else if(t.Gs.test(n.key)){if(null!==n.newValue){const e=t.hi(n.key,n.newValue);if(e)return t.li(e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.fi(n.key,n.newValue);if(e)return t.di(e)}}else if(n.key===t.Hs){if(null!==n.newValue){const e=t.Xs(n.newValue);if(e)return t.Zs(e)}}else if(n.key===t.Qs){const e=function(e){let t=ed.T;if(null!=e)try{const n=JSON.parse(e);zh("number"==typeof n),t=n}catch(e){jh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue);e!==ed.T&&t.sequenceNumberHandler(e)}else if(n.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(n)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new Ly(this.currentUser,e,t,n),s=Oy(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Os())}ni(e){const t=Oy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=Dy(this.persistenceKey,e),s=new Fy(e,t,n);this.setItem(r,s.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ai(e);return My.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return Ly.$s(new Dh(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return Fy.$s(r,t)}Xs(e){return Uy.$s(e)}li(e){var t=this;return(0,Ia.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Uh("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ci(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),s=this.ti(n),i=[],o=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||o.push(e)}),this.syncEngine.gi(i,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=Cf();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Vy{constructor(){this.yi=new jy,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new jy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class By{Ei(e){}shutdown(){}}class zy{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Uh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Uh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class $y{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Gy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const s=this.Bi(e,t);Uh("RestConnection","Sending: ",s,n);const i={};return this.Ui(i,r),this.qi(e,s,i,n).then(e=>(Uh("RestConnection","Received: ",e),e),t=>{throw qh("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Lh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${Hy[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((s,i)=>{const o=new Oh;o.listenOnce(xh.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case kh.NO_ERROR:const t=o.getResponseJson();Uh("Connection","XHR received:",JSON.stringify(t)),s(t);break;case kh.TIMEOUT:Uh("Connection",'RPC "'+e+'" timed out'),i(new Gh($h.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const n=o.getStatus();if(Uh("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($h).indexOf(t)>=0?t:$h.UNKNOWN}(e.status);i(new Gh(t,e.message))}else i(new Gh($h.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Gh($h.UNAVAILABLE,"Connection failed."));break;default:Bh()}}finally{Uh("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Sh(),s=Ch(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(i.xmlHttpFactory=new Rh({})),this.Ui(i.initMessageHeaders,t),(0,ka.uI)()||(0,ka.b$)()||(0,ka.d)()||(0,ka.w1)()||(0,ka.Mn)()||(0,ka.ru)()||(i.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");Uh("Connection","Creating WebChannel: "+o,i);const a=r.createWebChannel(o,i);let l=!1,u=!1;const c=new $y({vi:e=>{u?Uh("Connection","Not sending because WebChannel is closed:",e):(l||(Uh("Connection","Opening WebChannel transport."),a.open(),l=!0),Uh("Connection","WebChannel sending:",e),a.send(e))},Vi:()=>a.close()}),h=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return h(a,Ph.EventType.OPEN,()=>{u||Uh("Connection","WebChannel transport opened.")}),h(a,Ph.EventType.CLOSE,()=>{u||(u=!0,Uh("Connection","WebChannel transport closed"),c.$i())}),h(a,Ph.EventType.ERROR,e=>{u||(u=!0,qh("Connection","WebChannel transport errored:",e),c.$i(new Gh($h.UNAVAILABLE,"The operation could not be completed")))}),h(a,Ph.EventType.MESSAGE,e=>{var t;if(!u){const n=e.data[0];zh(!!n);const r=n,s=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(s){Uh("Connection","WebChannel received error:",s);const e=s.status;let t=function(e){const t=lf[e];if(void 0!==t)return hf(t)}(e),n=s.message;void 0===t&&(t=$h.INTERNAL,n="Unknown error status: "+e+" with message "+s.message),u=!0,c.$i(new Gh(t,n)),a.close()}else Uh("Connection","WebChannel received:",n),c.Oi(n)}}),h(s,Ah.STAT_EVENT,e=>{e.stat===Nh.PROXY?Uh("Connection","Detected buffering proxy"):e.stat===Nh.NOPROXY&&Uh("Connection","Detected no buffering proxy")}),setTimeout(()=>{c.ki()},0),c}}function Zy(){return"undefined"!=typeof window?window:null}function Wy(){return"undefined"!=typeof document?document:null}function Ky(e){return new Uf(e,!0)}class Qy{constructor(e,t,n=1e3,r=1.5,s=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=s,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&Uh("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Yy{constructor(e,t,n,r,s,i){this.Oe=e,this.er=n,this.nr=r,this.credentialsProvider=s,this.listener=i,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Qy(e,t)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var e=this;return(0,Ia.Z)(function*(){e.ar()&&(yield e.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(e){this._r(),this.stream.send(e)}dr(){var e=this;return(0,Ia.Z)(function*(){if(e.cr())return e.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(e,t){var n=this;return(0,Ia.Z)(function*(){n._r(),n.rr.cancel(),n.sr++,3!==e?n.rr.reset():t&&t.code===$h.RESOURCE_EXHAUSTED?(jh(t.toString()),jh("Using maximum backoff delay to prevent overloading the backend."),n.rr.Yi()):t&&t.code===$h.UNAUTHENTICATED&&n.credentialsProvider.invalidateToken(),null!==n.stream&&(n.mr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ci(t)})()}mr(){}auth(){this.state=1;const e=this.gr(this.sr),t=this.sr;this.credentialsProvider.getToken().then(e=>{this.sr===t&&this.yr(e)},t=>{e(()=>{const e=new Gh($h.UNKNOWN,"Fetching auth token failed: "+t.message);return this.pr(e)})})}yr(e){const t=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si(()=>{t(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.pr(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}ur(){var e=this;this.state=4,this.rr.Xi((0,Ia.Z)(function*(){e.state=0,e.start()}))}pr(e){return Uh("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(3,e)}gr(e){return t=>{this.Oe.enqueueAndForget(()=>this.sr===e?t():(Uh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jy extends Yy{constructor(e,t,n,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle",t,n,s),this.N=r}Er(e){return this.nr.ji("Listen",e)}onMessage(e){this.rr.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bh()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.D?(zh(void 0===t||"string"==typeof t),gd.fromBase64String(t||"")):(zh(void 0===t||t instanceof Uint8Array),gd.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?$h.UNKNOWN:hf(e.code);return new Gh(t,e.message||"")}(o);n=new Rf(r,s,i,a||null)}else if("documentChange"in t){const r=t.documentChange,s=Gf(e,r.document.name),i=Bf(r.document.updateTime),o=new Bd({mapValue:{fields:r.document.fields}}),a=Hd.newFoundDocument(s,i,o);n=new Af(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,s=Gf(e,r.document),i=r.readTime?Bf(r.readTime):ad.min(),o=Hd.newNoDocument(s,i);n=new Af([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,s=Gf(e,r.document);n=new Af([],r.removedTargetIds||[],s,null)}else{if(!("filter"in t))return Bh();{const e=t.filter,r=new af(e.count||0);n=new Nf(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return ad.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ad.min():t.readTime?Bf(t.readTime):ad.min()}(e);return this.listener.Tr(t,n)}Ir(e){const t={};t.database=Kf(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Kd(r)?{documents:tm(e,r)}:{query:nm(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=qf(e,t.resumeToken):t.snapshotVersion.compareTo(ad.min())>0&&(n.readTime=jf(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bh()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.wr(t)}Ar(e){const t={};t.database=Kf(this.N),t.removeTarget=e,this.wr(t)}}class Xy extends Yy{constructor(e,t,n,r,s){super(e,"write_stream_connection_backoff","write_stream_idle",t,n,s),this.N=r,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(e){return this.nr.ji("Write",e)}onMessage(e){if(zh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();const t=function(e,t){return e&&e.length>0?(zh(void 0!==t),e.map(e=>function(e,t){let n=Bf(e.updateTime?e.updateTime:t);return n.isEqual(ad.min())&&(n=Bf(t)),new Hp(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Bf(e.commitTime);return this.listener.vr(n,t)}return zh(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const e={};e.database=Kf(this.N),this.wr(e)}Pr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Xf(this.N,e))};this.wr(t)}}class e_ extends class{}{constructor(e,t,n){super(),this.credentials=e,this.nr=t,this.N=n,this.Dr=!1}Cr(){if(this.Dr)throw new Gh($h.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===$h.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Gh($h.UNKNOWN,e.toString())})}Ki(e,t,n){return this.Cr(),this.credentials.getToken().then(r=>this.nr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===$h.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Gh($h.UNKNOWN,e.toString())})}terminate(){this.Dr=!0}}class t_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Fr("Offline")))}set(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}Fr(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Mr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(jh(t),this.$r=!1):Uh("OnlineStateTracker",t)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class n_{constructor(e,t,n,r,s){var i=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=s,this.Qr.Ei(e=>{n.enqueueAndForget((0,Ia.Z)(function*(){var e;p_(i)&&(Uh("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Ia.Z)(function*(e){const t=Hh(e);t.Kr.add(4),yield i_(t),t.Wr.set("Unknown"),t.Kr.delete(4),yield r_(t)}),function(t){return e.apply(this,arguments)})(i))}))}),this.Wr=new t_(n,r)}}function r_(e){return s_.apply(this,arguments)}function s_(){return(s_=(0,Ia.Z)(function*(e){if(p_(e))for(const t of e.jr)yield t(!0)})).apply(this,arguments)}function i_(e){return o_.apply(this,arguments)}function o_(){return(o_=(0,Ia.Z)(function*(e){for(const t of e.jr)yield t(!1)})).apply(this,arguments)}function a_(e,t){const n=Hh(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),d_(n)?h_(n):q_(n).cr()&&u_(n,t))}function l_(e,t){const n=Hh(e),r=q_(n);n.qr.delete(t),r.cr()&&c_(n,t),0===n.qr.size&&(r.cr()?r.lr():p_(n)&&n.Wr.set("Unknown"))}function u_(e,t){e.Gr.Y(t.targetId),q_(e).Ir(t)}function c_(e,t){e.Gr.Y(t),q_(e).Ar(t)}function h_(e){e.Gr=new Of({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.qr.get(t)||null}),q_(e).start(),e.Wr.Or()}function d_(e){return p_(e)&&!q_(e).ar()&&e.qr.size>0}function p_(e){return 0===Hh(e).Kr.size}function f_(e){e.Gr=void 0}function m_(e){return g_.apply(this,arguments)}function g_(){return(g_=(0,Ia.Z)(function*(e){e.qr.forEach((t,n)=>{u_(e,t)})})).apply(this,arguments)}function y_(e,t){return __.apply(this,arguments)}function __(){return(__=(0,Ia.Z)(function*(e,t){f_(e),d_(e)?(e.Wr.Lr(t),h_(e)):e.Wr.set("Unknown")})).apply(this,arguments)}function v_(e,t,n){return w_.apply(this,arguments)}function w_(){return(w_=(0,Ia.Z)(function*(e,t,n){if(e.Wr.set("Online"),t instanceof Rf&&2===t.state&&t.cause)try{yield(r=(0,Ia.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.qr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.qr.delete(r),e.Gr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(n){Uh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield b_(e,n)}else if(t instanceof Af?e.Gr.rt(t):t instanceof Nf?e.Gr.ft(t):e.Gr.ct(t),!n.isEqual(ad.min()))try{const t=yield ly(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Gr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.qr.get(r);s&&e.qr.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.qr.get(t);if(!n)return;e.qr.set(t,n.withResumeToken(gd.EMPTY_BYTE_STRING,n.snapshotVersion)),c_(e,t);const r=new Jm(n.target,t,1,n.sequenceNumber);u_(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(t){Uh("RemoteStore","Failed to raise snapshot:",t),yield b_(e,t)}var r})).apply(this,arguments)}function b_(e,t,n){return T_.apply(this,arguments)}function T_(){return(T_=(0,Ia.Z)(function*(e,t,n){if(!zm(t))throw t;e.Kr.add(1),yield i_(e),e.Wr.set("Offline"),n||(n=()=>ly(e.localStore)),e.asyncQueue.enqueueRetryable((0,Ia.Z)(function*(){Uh("RemoteStore","Retrying IndexedDB access"),yield n(),e.Kr.delete(1),yield r_(e)}))})).apply(this,arguments)}function I_(e,t){return t().catch(n=>b_(e,n,t))}function E_(e){return S_.apply(this,arguments)}function S_(){return(S_=(0,Ia.Z)(function*(e){const t=Hh(e),n=V_(t);let r=t.Ur.length>0?t.Ur[t.Ur.length-1].batchId:-1;for(;C_(t);)try{const e=yield hy(t.localStore,r);if(null===e){0===t.Ur.length&&n.lr();break}r=e.batchId,k_(t,e)}catch(e){yield b_(t,e)}x_(t)&&A_(t)})).apply(this,arguments)}function C_(e){return p_(e)&&e.Ur.length<10}function k_(e,t){e.Ur.push(t);const n=V_(e);n.cr()&&n.br&&n.Pr(t.mutations)}function x_(e){return p_(e)&&!V_(e).ar()&&e.Ur.length>0}function A_(e){V_(e).start()}function N_(e){return R_.apply(this,arguments)}function R_(){return(R_=(0,Ia.Z)(function*(e){V_(e).Sr()})).apply(this,arguments)}function P_(e){return O_.apply(this,arguments)}function O_(){return(O_=(0,Ia.Z)(function*(e){const t=V_(e);for(const n of e.Ur)t.Pr(n.mutations)})).apply(this,arguments)}function D_(e,t,n){return L_.apply(this,arguments)}function L_(){return(L_=(0,Ia.Z)(function*(e,t,n){const r=e.Ur.shift(),s=Ym.from(r,t,n);yield I_(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),yield E_(e)})).apply(this,arguments)}function F_(e,t){return M_.apply(this,arguments)}function M_(){return(M_=(0,Ia.Z)(function*(e,t){var n;t&&V_(e).br&&(yield(n=(0,Ia.Z)(function*(e,t){if(cf(n=t.code)&&n!==$h.ABORTED){const n=e.Ur.shift();V_(e).hr(),yield I_(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield E_(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),x_(e)&&A_(e)})).apply(this,arguments)}function U_(e,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,Ia.Z)(function*(e,t){const n=Hh(e);t?(n.Kr.delete(2),yield r_(n)):t||(n.Kr.add(2),yield i_(n),n.Wr.set("Unknown"))})).apply(this,arguments)}function q_(e){return e.zr||(e.zr=function(e,t,n){const r=Hh(e);return r.Cr(),new Jy(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:m_.bind(null,e),Ci:y_.bind(null,e),Tr:v_.bind(null,e)}),e.jr.push(function(){var t=(0,Ia.Z)(function*(t){t?(e.zr.hr(),d_(e)?h_(e):e.Wr.set("Unknown")):(yield e.zr.stop(),f_(e))});return function(e){return t.apply(this,arguments)}}())),e.zr}function V_(e){return e.Hr||(e.Hr=function(e,t,n){const r=Hh(e);return r.Cr(),new Xy(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:N_.bind(null,e),Ci:F_.bind(null,e),Vr:P_.bind(null,e),vr:D_.bind(null,e)}),e.jr.push(function(){var t=(0,Ia.Z)(function*(t){t?(e.Hr.hr(),yield E_(e)):(yield e.Hr.stop(),e.Ur.length>0&&(Uh("RemoteStore",`Stopping write stream with ${e.Ur.length} pending writes`),e.Ur=[]))});return function(e){return t.apply(this,arguments)}}())),e.Hr}class B_{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Zh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new B_(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Gh($h.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z_(e,t){if(jh("AsyncQueue",`${t}: ${e}`),zm(e))return new Gh($h.UNAVAILABLE,`${t}: ${e}`);throw e}class H_{constructor(e){this.comparator=e?(t,n)=>e(t,n)||kd.comparator(t.key,n.key):(e,t)=>kd.comparator(e.key,t.key),this.keyedMap=wf(),this.sortedSet=new df(this.comparator)}static emptySet(e){return new H_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof H_))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new H_;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $_{constructor(){this.Jr=new df(kd.comparator)}track(e){const t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Bh():this.Jr=this.Jr.insert(t,e)}Yr(){const e=[];return this.Jr.inorderTraversal((t,n)=>{e.push(n)}),e}}class G_{constructor(e,t,n,r,s,i,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new G_(e,t,H_.emptySet(t),s,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Z_{constructor(){this.Xr=void 0,this.listeners=[]}}class W_{constructor(){this.queries=new jg(e=>Ip(e),Tp),this.onlineState="Unknown",this.Zr=new Set}}function K_(e,t){return Q_.apply(this,arguments)}function Q_(){return(Q_=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Z_),s)try{i.Xr=yield n.onListen(r)}catch(e){const n=z_(e,`Initialization of query '${Ep(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.eo(n.onlineState),i.Xr&&t.no(i.Xr)&&tv(n)})).apply(this,arguments)}function Y_(e,t){return J_.apply(this,arguments)}function J_(){return(J_=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function X_(e,t){const n=Hh(e);let r=!1;for(const s of t){const e=n.queries.get(s.query);if(e){for(const t of e.listeners)t.no(s)&&(r=!0);e.Xr=s}}r&&tv(n)}function ev(e,t,n){const r=Hh(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function tv(e){e.Zr.forEach(e=>{e.next()})}class nv{constructor(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}no(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new G_(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.io?this.oo(e)&&(this.so.next(e),t=!0):this.ao(e,this.onlineState)&&(this.co(e),t=!0),this.ro=e,t}onError(e){this.so.error(e)}eo(e){this.onlineState=e;let t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}ao(e,t){return!e.fromCache||!(this.options.uo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}oo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(e){e=G_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}class rv{constructor(e,t){this.payload=e,this.byteLength=t}ho(){return"metadata"in this.payload}}class sv{constructor(e){this.N=e}zn(e){return Gf(this.N,e)}Hn(e){return e.metadata.exists?Jf(this.N,e.document,!1):Hd.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Bf(e)}}class iv{constructor(e,t,n){this.lo=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=ov(e)}fo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}wo(e){const t=new Map,n=new sv(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ef()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,Ia.Z)(function*(){const t=yield function(e,t,n,r){return vy.apply(this,arguments)}(e.localStore,new sv(e.N),e.documents,e.lo.id),n=e.wo(e.documents);for(const r of e.queries)yield wy(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new Xg(Object.assign({},e.progress),t)})()}}function ov(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class av{constructor(e){this.key=e}}class lv{constructor(e){this.key=e}}class uv{constructor(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Ef(),this.mutatedKeys=Ef(),this.po=Cp(e),this.Eo=new H_(this.po)}get To(){return this._o}Io(e,t){const n=t?t.Ao:new $_,r=t?t.Eo:this.Eo;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a=fp(this.query)&&r.size===this.query.limit?r.last():null,l=mp(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=Sp(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),p=!0):this.Ro(u,c)||(n.track({type:2,doc:c}),p=!0,(a&&this.po(c,a)>0||l&&this.po(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(a||l)&&(o=!0)),p&&(c?(i=i.add(c),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),fp(this.query)||mp(this.query))for(;i.size>this.query.limit;){const e=fp(this.query)?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Eo:i,Ao:n,Ln:o,mutatedKeys:s}}Ro(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;const s=e.Ao.Yr();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bh()}};return n(e)-n(t)}(e.type,t.type)||this.po(e.doc,t.doc)),this.bo(n);const i=t?this.Po():[],o=0===this.yo.size&&this.current?1:0,a=o!==this.mo;return this.mo=o,0!==s.length||a?{snapshot:new G_(this.query,e.Eo,r,s,e.mutatedKeys,0===o,a,!1),vo:i}:{vo:i}}eo(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new $_,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}bo(e){e&&(e.addedDocuments.forEach(e=>this._o=this._o.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._o=this._o.delete(e)),this.current=e.current)}Po(){if(!this.current)return[];const e=this.yo;this.yo=Ef(),this.Eo.forEach(e=>{this.Vo(e.key)&&(this.yo=this.yo.add(e.key))});const t=[];return e.forEach(e=>{this.yo.has(e)||t.push(new lv(e))}),this.yo.forEach(n=>{e.has(n)||t.push(new av(n))}),t}So(e){this._o=e.Gn,this.yo=Ef();const t=this.Io(e.documents);return this.applyChanges(t,!0)}Do(){return G_.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class cv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class hv{constructor(e){this.key=e,this.Co=!1}}class dv{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.No={},this.xo=new jg(e=>Ip(e),Tp),this.ko=new Map,this.$o=new Set,this.Oo=new df(kd.comparator),this.Fo=new Map,this.Mo=new Iy,this.Lo={},this.Bo=new Map,this.Uo=Cg.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function pv(e,t){return fv.apply(this,arguments)}function fv(){return(fv=(0,Ia.Z)(function*(e,t){const n=rw(e);let r,s;const i=n.xo.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Do();else{const e=yield dy(n.localStore,wp(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=yield mv(n,t,r,"current"===i),n.isPrimaryClient&&a_(n.remoteStore,e)}return s})).apply(this,arguments)}function mv(e,t,n,r){return gv.apply(this,arguments)}function gv(){return(gv=(0,Ia.Z)(function*(e,t,n,r){e.Ko=(t,n,r)=>{return(s=(0,Ia.Z)(function*(e,t,n,r){let s=t.view.Io(n);s.Ln&&(s=yield my(e.localStore,t.query,!1).then(({documents:e})=>t.view.Io(e,s)));const i=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i);return Dv(e,t.targetId,o.vo),o.snapshot}),function(e,t,n,r){return s.apply(this,arguments)})(e,t,n,r);var s};const s=yield my(e.localStore,t,!0),i=new uv(t,s.Gn),o=i.Io(s.documents),a=xf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),l=i.applyChanges(o,e.isPrimaryClient,a);Dv(e,n,l.vo);const u=new cv(t,n,i);return e.xo.set(t,u),e.ko.has(n)?e.ko.get(n).push(t):e.ko.set(n,[t]),l.snapshot})).apply(this,arguments)}function yv(e,t){return _v.apply(this,arguments)}function _v(){return(_v=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=n.xo.get(t),s=n.ko.get(r.targetId);if(s.length>1)return n.ko.set(r.targetId,s.filter(e=>!Tp(e,t))),void n.xo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield py(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),l_(n.remoteStore,r.targetId),Pv(n,r.targetId)}).catch(Rg))):(Pv(n,r.targetId),yield py(n.localStore,r.targetId,!0))})).apply(this,arguments)}function vv(){return(vv=(0,Ia.Z)(function*(e,t,n){const r=sw(e);try{const e=yield function(e,t){const n=Hh(e),r=od.now(),s=t.reduce((e,t)=>e.add(t.key),Ef());let i;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,s).next(s=>{i=s;const o=[];for(const e of t){const t=Qp(e,i.get(e.key));null!=t&&o.push(new ef(e.key,t,zd(t.value.mapValue),$p.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(i),{batchId:e.batchId,changes:i}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Lo[e.currentUser.toKey()];r||(r=new df(rd)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,e.batchId,n),yield Mv(r,e.changes),yield E_(r.remoteStore)}catch(e){const t=z_(e,"Failed to persist write");n.reject(t)}})).apply(this,arguments)}function wv(e,t){return bv.apply(this,arguments)}function bv(){return(bv=(0,Ia.Z)(function*(e,t){const n=Hh(e);try{const e=yield uy(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Fo.get(t);r&&(zh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?zh(r.Co):e.removedDocuments.size>0&&(zh(r.Co),r.Co=!1))}),yield Mv(n,e,t)}catch(e){yield Rg(e)}})).apply(this,arguments)}function Tv(e,t,n){const r=Hh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xo.forEach((n,r)=>{const s=r.view.eo(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Hh(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.eo(t)&&(r=!0)}),r&&tv(n)}(r.eventManager,t),e.length&&r.No.Tr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Iv(e,t,n){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,Ia.Z)(function*(e,t,n){const r=Hh(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Fo.get(t),i=s&&s.key;if(i){let e=new df(kd.comparator);e=e.insert(i,Hd.newNoDocument(i,ad.min()));const n=Ef().add(i),s=new kf(ad.min(),new Map,new mf(rd),e,n);yield wv(r,s),r.Oo=r.Oo.remove(i),r.Fo.delete(t),Fv(r)}else yield py(r.localStore,t,!1).then(()=>Pv(r,t,n)).catch(Rg)})).apply(this,arguments)}function Sv(e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=t.batch.batchId;try{const e=yield ay(n.localStore,t);Rv(n,r,null),Nv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mv(n,e)}catch(e){yield Rg(e)}})).apply(this,arguments)}function kv(e,t,n){return xv.apply(this,arguments)}function xv(){return(xv=(0,Ia.Z)(function*(e,t,n){const r=Hh(e);try{const e=yield function(e,t){const n=Hh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(zh(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Rv(r,t,n),Nv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield Mv(r,e)}catch(n){yield Rg(n)}})).apply(this,arguments)}function Av(){return(Av=(0,Ia.Z)(function*(e,t){const n=Hh(e);p_(n.remoteStore)||Uh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Hh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Bo.get(e)||[];r.push(t),n.Bo.set(e,r)}catch(e){const n=z_(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}})).apply(this,arguments)}function Nv(e,t){(e.Bo.get(t)||[]).forEach(e=>{e.resolve()}),e.Bo.delete(t)}function Rv(e,t,n){const r=Hh(e);let s=r.Lo[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Lo[r.currentUser.toKey()]=s}}function Pv(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.ko.get(t))e.xo.delete(r),n&&e.No.jo(r,n);e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach(t=>{e.Mo.containsKey(t)||Ov(e,t)})}function Ov(e,t){e.$o.delete(t.path.canonicalString());const n=e.Oo.get(t);null!==n&&(l_(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),Fv(e))}function Dv(e,t,n){for(const r of n)r instanceof av?(e.Mo.addReference(r.key,t),Lv(e,r)):r instanceof lv?(Uh("SyncEngine","Document no longer in limbo: "+r.key),e.Mo.removeReference(r.key,t),e.Mo.containsKey(r.key)||Ov(e,r.key)):Bh()}function Lv(e,t){const n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(Uh("SyncEngine","New document in limbo: "+n),e.$o.add(r),Fv(e))}function Fv(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){const t=e.$o.values().next().value;e.$o.delete(t);const n=new kd(dd.fromString(t)),r=e.Uo.next();e.Fo.set(r,new hv(n)),e.Oo=e.Oo.insert(n,r),a_(e.remoteStore,new Jm(wp(pp(n.path)),r,2,ed.T))}}function Mv(e,t,n){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,Ia.Z)(function*(e,t,n){const r=Hh(e),s=[],i=[],o=[];var a;r.xo.isEmpty()||(r.xo.forEach((e,a)=>{o.push(r.Ko(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),s.push(e);const t=ty.kn(a.targetId,e);i.push(t)}}))}),yield Promise.all(o),r.No.Tr(s),yield(a=(0,Ia.Z)(function*(e,t){const n=Hh(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Um.forEach(t,t=>Um.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Um.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!zm(e))throw e;Uh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,i))})).apply(this,arguments)}function jv(e,t){return qv.apply(this,arguments)}function qv(){return(qv=(0,Ia.Z)(function*(e,t){const n=Hh(e);if(!n.currentUser.isEqual(t)){Uh("SyncEngine","User change. New user:",t.toKey());const e=yield iy(n.localStore,t);n.currentUser=t,function(e,t){e.Bo.forEach(e=>{e.forEach(e=>{e.reject(new Gh($h.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield Mv(n,e.Wn)}})).apply(this,arguments)}function Vv(e,t){const n=Hh(e),r=n.Fo.get(t);if(r&&r.Co)return Ef().add(r.key);{let e=Ef();const r=n.ko.get(t);if(!r)return e;for(const t of r){const r=n.xo.get(t);e=e.unionWith(r.view.To)}return e}}function Bv(e,t){return zv.apply(this,arguments)}function zv(){return(zv=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=yield my(n.localStore,t.query,!0),s=t.view.So(r);return n.isPrimaryClient&&Dv(n,t.targetId,s.vo),s})).apply(this,arguments)}function Hv(e){return $v.apply(this,arguments)}function $v(){return($v=(0,Ia.Z)(function*(e){const t=Hh(e);return yy(t.localStore).then(e=>Mv(t,e))})).apply(this,arguments)}function Gv(e,t,n,r){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,Ia.Z)(function*(e,t,n,r){const s=Hh(e),i=yield function(e,t){const n=Hh(e),r=Hh(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):Um.resolve(null)))}(s.localStore,t);null!==i?("pending"===n?yield E_(s.remoteStore):"acknowledged"===n||"rejected"===n?(Rv(s,t,r||null),Nv(s,t),function(e,t){Hh(Hh(e).In).te(t)}(s.localStore,t)):Bh(),yield Mv(s,i)):Uh("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Wv(){return(Wv=(0,Ia.Z)(function*(e,t){const n=Hh(e);if(rw(n),sw(n),!0===t&&!0!==n.qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield Kv(n,e.toArray());n.qo=!0,yield U_(n.remoteStore,!0);for(const r of t)a_(n.remoteStore,r)}else if(!1===t&&!1!==n.qo){const e=[];let t=Promise.resolve();n.ko.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(Pv(n,s),py(n.localStore,s,!0))),l_(n.remoteStore,s)}),yield t,yield Kv(n,e),function(e){const t=Hh(e);t.Fo.forEach((e,n)=>{l_(t.remoteStore,n)}),t.Mo.us(),t.Fo=new Map,t.Oo=new df(kd.comparator)}(n),n.qo=!1,yield U_(n.remoteStore,!1)}})).apply(this,arguments)}function Kv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,Ia.Z)(function*(e,t,n){const r=Hh(e),s=[],i=[];for(const o of t){let e;const t=r.ko.get(o);if(t&&0!==t.length){e=yield dy(r.localStore,wp(t[0]));for(const e of t){const t=r.xo.get(e),n=yield Bv(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=yield gy(r.localStore,o);e=yield dy(r.localStore,t),yield mv(r,Yv(t),o,!1)}s.push(e)}return r.No.Tr(i),s})).apply(this,arguments)}function Yv(e){return dp(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Jv(e){const t=Hh(e);return Hh(Hh(t.localStore).persistence).pn()}function Xv(e,t,n,r){return ew.apply(this,arguments)}function ew(){return(ew=(0,Ia.Z)(function*(e,t,n,r){const s=Hh(e);if(s.qo)Uh("SyncEngine","Ignoring unexpected query state notification.");else if(s.ko.has(t))switch(n){case"current":case"not-current":{const e=yield yy(s.localStore),r=kf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield Mv(s,e,r);break}case"rejected":yield py(s.localStore,t,!0),Pv(s,t,r);break;default:Bh()}})).apply(this,arguments)}function tw(e,t,n){return nw.apply(this,arguments)}function nw(){return(nw=(0,Ia.Z)(function*(e,t,n){const r=rw(e);if(r.qo){for(const e of t){if(r.ko.has(e)){Uh("SyncEngine","Adding an already active target "+e);continue}const t=yield gy(r.localStore,e),n=yield dy(r.localStore,t);yield mv(r,Yv(t),n.targetId,!1),a_(r.remoteStore,n)}for(const e of n)r.ko.has(e)&&(yield py(r.localStore,e,!1).then(()=>{l_(r.remoteStore,e),Pv(r,e)}).catch(Rg))}})).apply(this,arguments)}function rw(e){const t=Hh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Iv.bind(null,t),t.No.Tr=X_.bind(null,t.eventManager),t.No.jo=ev.bind(null,t.eventManager),t}function sw(e){const t=Hh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Sv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kv.bind(null,t),t}class iw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ia.Z)(function*(){t.N=Ky(e.databaseInfo.databaseId),t.sharedClientState=t.Wo(e),t.persistence=t.Go(e),yield t.persistence.start(),t.gcScheduler=t.zo(e),t.localStore=t.Ho(e)})()}zo(e){return null}Ho(e){return sy(this.persistence,new ny,e.initialUser,this.N)}Go(e){return new Ay(Ry.Ns,this.N)}Wo(e){return new Vy}terminate(){var e=this;return(0,Ia.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ow extends iw{constructor(e,t,n){super(),this.Jo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Ia.Z)(function*(){yield t().call(n,e),yield function(e){return _y.apply(this,arguments)}(n.localStore),yield n.Jo.initialize(n,e),yield sw(n.Jo.syncEngine),yield E_(n.Jo.remoteStore),yield n.persistence.nn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Ho(e){return sy(this.persistence,new ny,e.initialUser,this.N)}zo(e){return new Lg(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Go(e){const t=Jg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_g.withCacheSize(this.cacheSizeBytes):_g.DEFAULT;return new Kg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Zy(),Wy(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(e){return new Vy}}class aw extends ow{constructor(e,t){super(e,t,!1),this.Jo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Ia.Z)(function*(){yield t().call(n,e);const r=n.Jo.syncEngine;n.sharedClientState instanceof qy&&(n.sharedClientState.syncEngine={_i:Gv.bind(null,r),mi:Xv.bind(null,r),gi:tw.bind(null,r),pn:Jv.bind(null,r),wi:Hv.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.nn(function(){var e=(0,Ia.Z)(function*(e){yield function(e,t){return Wv.apply(this,arguments)}(n.Jo.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Wo(e){const t=Zy();if(!qy.bt(t))throw new Gh($h.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Jg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qy(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class lw{initialize(e,t){var n=this;return(0,Ia.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Tv(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=jv.bind(null,n.syncEngine),yield U_(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new W_}createDatastore(e){const t=Ky(e.databaseInfo.databaseId),n=new Gy(e.databaseInfo);return function(e,t,n){return new e_(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>Tv(this.syncEngine,e,0),i=zy.bt()?new zy:new By,new n_(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new dv(e,t,n,r,s,i);return o&&(a.qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ia.Z)(function*(e){const t=Hh(e);Uh("RemoteStore","RemoteStore shutting down."),t.Kr.add(5),yield i_(t),t.Qr.shutdown(),t.Wr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function uw(e,t=10240){let n=0;return{read:()=>(0,Ia.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,Ia.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Yo(this.observer.next,e)}error(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Xo(){this.muted=!0}Yo(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class hw{constructor(e,t){this.Zo=e,this.N=t,this.metadata=new Zh,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(e=>{e&&e.ho()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.Zo.cancel()}getMetadata(){var e=this;return(0,Ia.Z)(function*(){return e.metadata.promise})()}Qo(){var e=this;return(0,Ia.Z)(function*(){return yield e.getMetadata(),e.ea()})()}ea(){var e=this;return(0,Ia.Z)(function*(){const t=yield e.na();if(null===t)return null;const n=e.ta.decode(t),r=Number(n);isNaN(r)&&e.sa(`length string (${n}) is not valid number`);const s=yield e.ia(r);return new rv(JSON.parse(s),t.length+r)})()}ra(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}na(){var e=this;return(0,Ia.Z)(function*(){for(;e.ra()<0&&!(yield e.oa()););if(0===e.buffer.length)return null;const t=e.ra();t<0&&e.sa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ia(e){var t=this;return(0,Ia.Z)(function*(){for(;t.buffer.length<e;)(yield t.oa())&&t.sa("Reached the end of bundle when more is expected.");const n=t.ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}sa(e){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${e}`)}oa(){var e=this;return(0,Ia.Z)(function*(){const t=yield e.Zo.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class dw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ia.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Gh($h.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=Kf(n.N)+"/documents",s={documents:t.map(e=>$f(n.N,e))},i=yield n.Ki("BatchGetDocuments",r,s),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){zh(!!t.found);const n=Gf(e,t.found.name),r=Bf(t.found.updateTime),s=new Bd({mapValue:{fields:t.found.fields}});return Hd.newFoundDocument(n,r,s)}(e,t):"missing"in t?function(e,t){zh(!!t.missing),zh(!!t.readTime);const n=Gf(e,t.missing),r=Bf(t.readTime);return Hd.newNoDocument(n,r)}(e,t):Bh()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());zh(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new sf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ia.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=kd.fromPath(n);e.mutations.push(new of(r,e.precondition(r)))}),yield(n=(0,Ia.Z)(function*(e,t){const n=Hh(e),r=Kf(n.N)+"/documents",s={writes:t.map(e=>Xf(n.N,e))};yield n.Li("Commit",r,s)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bh();t=ad.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Gh($h.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$p.updateTime(t):$p.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ad.min()))throw new Gh($h.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $p.updateTime(t)}return $p.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pw{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.aa=5,this.rr=new Qy(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var e=this;this.rr.Xi((0,Ia.Z)(function*(){const t=new dw(e.datastore),n=e.ua(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.ha(t)}))}).catch(t=>{e.ha(t)})}))}ua(e){try{const t=this.updateFunction(e);return!Ed(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ha(e){this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(e)}la(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!cf(t)}return!1}}class fw{constructor(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=Dh.UNAUTHENTICATED,this.clientId=nd.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var e=(0,Ia.Z)(function*(e){Uh("FirestoreClient","Received user=",e.uid),yield r.credentialListener(e),r.user=e});return function(t){return e.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,Ia.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Gh($h.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Zh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ia.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(n){const e=z_(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function mw(e,t){return gw.apply(this,arguments)}function gw(){return(gw=(0,Ia.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),Uh("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Ia.Z)(function*(e){r.isEqual(e)||(yield iy(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function yw(e,t){return _w.apply(this,arguments)}function _w(){return(_w=(0,Ia.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield vw(e);Uh("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,Ia.Z)(function*(e,t){const n=Hh(e);n.asyncQueue.verifyOperationInProgress(),Uh("RemoteStore","RemoteStore received new credentials");const r=p_(n);n.Kr.add(3),yield i_(n),r&&n.Wr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Kr.delete(3),yield r_(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function vw(e){return ww.apply(this,arguments)}function ww(){return(ww=(0,Ia.Z)(function*(e){return e.offlineComponents||(Uh("FirestoreClient","Using default OfflineComponentProvider"),yield mw(e,new iw)),e.offlineComponents})).apply(this,arguments)}function bw(e){return Tw.apply(this,arguments)}function Tw(){return(Tw=(0,Ia.Z)(function*(e){return e.onlineComponents||(Uh("FirestoreClient","Using default OnlineComponentProvider"),yield yw(e,new lw)),e.onlineComponents})).apply(this,arguments)}function Iw(e){return vw(e).then(e=>e.persistence)}function Ew(e){return vw(e).then(e=>e.localStore)}function Sw(e){return bw(e).then(e=>e.remoteStore)}function Cw(e){return bw(e).then(e=>e.syncEngine)}function kw(e){return xw.apply(this,arguments)}function xw(){return(xw=(0,Ia.Z)(function*(e){const t=yield bw(e),n=t.eventManager;return n.onListen=pv.bind(null,t.syncEngine),n.onUnlisten=yv.bind(null,t.syncEngine),n})).apply(this,arguments)}function Aw(e,t,n={}){const r=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t,n,r,s){const i=new cw({next:i=>{t.enqueueAndForget(()=>Y_(e,o));const a=i.docs.has(n);!a&&i.fromCache?s.reject(new Gh($h.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?s.reject(new Gh($h.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:e=>s.reject(e)}),o=new nv(pp(n.path),i,{includeMetadataChanges:!0,uo:!0});return K_(e,o)}(yield kw(e),e.asyncQueue,t,n,r)})),r.promise}function Nw(e,t,n={}){const r=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t,n,r,s){const i=new cw({next:n=>{t.enqueueAndForget(()=>Y_(e,o)),n.fromCache&&"server"===r.source?s.reject(new Gh($h.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new nv(n,i,{includeMetadataChanges:!0,uo:!0});return K_(e,o)}(yield kw(e),e.asyncQueue,t,n,r)})),r.promise}class Rw{constructor(e,t,n,r,s,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Pw{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Pw&&e.projectId===this.projectId&&e.database===this.database}}const Ow=new Map;function Dw(e,t,n){if(!n)throw new Gh($h.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Lw(e,t,n,r){if(!0===t&&!0===r)throw new Gh($h.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Fw(e){if(!kd.isDocumentKey(e))throw new Gh($h.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Mw(e){if(kd.isDocumentKey(e))throw new Gh($h.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Uw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Bh()}function jw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Gh($h.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uw(e);throw new Gh($h.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function qw(e,t){if(t<=0)throw new Gh($h.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Vw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Gh($h.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Gh($h.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Lw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bw{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vw({}),this._settingsFrozen=!1,e instanceof Pw?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Gh($h.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pw(e.options.projectId)}(e))}get app(){if(!this._app)throw new Gh($h.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Gh($h.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vw(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Kh;switch(e.type){case"gapi":const t=e.client;return zh(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Xh(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Gh($h.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ow.get(e);t&&(Uh("ComponentProvider","Removing Datastore"),Ow.delete(e),t.terminate())}(this),Promise.resolve()}}class zw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $w(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zw(this.firestore,e,this._key)}}class Hw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hw(this.firestore,e,this._query)}}class $w extends Hw{constructor(e,t,n){super(e,t,pp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zw(this.firestore,null,new kd(e))}withConverter(e){return new $w(this.firestore,e,this._path)}}function Gw(e,t,...n){if(e=(0,ka.m9)(e),Dw("collection","path",t),e instanceof Bw){const r=dd.fromString(t,...n);return Mw(r),new $w(e,null,r)}{if(!(e instanceof zw||e instanceof $w))throw new Gh($h.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dd.fromString(t,...n));return Mw(r),new $w(e.firestore,null,r)}}function Zw(e,t,...n){if(e=(0,ka.m9)(e),1===arguments.length&&(t=nd.I()),Dw("doc","path",t),e instanceof Bw){const r=dd.fromString(t,...n);return Fw(r),new zw(e,null,new kd(r))}{if(!(e instanceof zw||e instanceof $w))throw new Gh($h.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(dd.fromString(t,...n));return Fw(r),new zw(e.firestore,e instanceof $w?e.converter:null,new kd(r))}}function Ww(e,t){return e=(0,ka.m9)(e),t=(0,ka.m9)(t),(e instanceof zw||e instanceof $w)&&(t instanceof zw||t instanceof $w)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Kw(e,t){return e=(0,ka.m9)(e),t=(0,ka.m9)(t),e instanceof Hw&&t instanceof Hw&&e.firestore===t.firestore&&Tp(e._query,t._query)&&e.converter===t.converter}class Qw{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Qy(this,"async_queue_retry"),this.Ea=()=>{const e=Wy();e&&Uh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.rr.tr()};const e=Wy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ta(),this.Ia(e)}enterRestrictedMode(e){if(!this.wa){this.wa=!0,this.ya=e||!1;const t=Wy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}enqueue(e){if(this.Ta(),this.wa)return new Promise(()=>{});const t=new Zh;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.da.push(e),this.Aa()))}Aa(){var e=this;return(0,Ia.Z)(function*(){if(0!==e.da.length){try{yield e.da[0](),e.da.shift(),e.rr.reset()}catch(t){if(!zm(t))throw t;Uh("AsyncQueue","Operation failed with retryable error: "+t)}e.da.length>0&&e.rr.Xi(()=>e.Aa())}})()}Ia(e){const t=this.fa.then(()=>(this.ga=!0,e().catch(e=>{throw this.ma=e,this.ga=!1,jh("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.ga=!1,e))));return this.fa=t,t}enqueueAfterDelay(e,t,n){this.Ta(),this.pa.indexOf(e)>-1&&(t=0);const r=B_.createAndSchedule(this,e,t,n,e=>this.Ra(e));return this._a.push(r),r}Ta(){this.ma&&Bh()}verifyOperationInProgress(){}ba(){var e=this;return(0,Ia.Z)(function*(){let t;do{t=e.fa,yield t}while(t!==e.fa)})()}Pa(e){for(const t of this._a)if(t.timerId===e)return!0;return!1}va(e){return this.ba().then(()=>{this._a.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this._a)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ba()})}Va(e){this.pa.push(e)}Ra(e){const t=this._a.indexOf(e);this._a.splice(t,1)}}function Yw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Jw{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Xw extends Bw{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Qw,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tb(this),this._firestoreClient.terminate()}}function eb(e){return e._firestoreClient||tb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tb(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Rw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new fw(e._credentials,e._queue,r)}function nb(e,t,n){const r=new Zh;return e.asyncQueue.enqueue((0,Ia.Z)(function*(){try{yield mw(e,n),yield yw(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===$h.FAILED_PRECONDITION||e.code===$h.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}})).then(()=>r.promise)}function rb(e){if(e._initialized||e._terminated)throw new Gh($h.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sb{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Gh($h.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fd(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ib{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ib(gd.fromBase64String(e))}catch(e){throw new Gh($h.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ib(gd.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ob{constructor(e){this._methodName=e}}class ab{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Gh($h.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Gh($h.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rd(this._lat,e._lat)||rd(this._long,e._long)}}const lb=/^__.*__$/;class ub{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ef(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xp(e,this.data,t,this.fieldTransforms)}}class cb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ef(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hb(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bh()}}class db{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Sa(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(e){return new db(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}$a(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}Oa(e){return this.Ca({path:void 0,xa:!0})}Fa(e){return Pb(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Sa(){if(this.path)for(let e=0;e<this.path.length;e++)this.ka(this.path.get(e))}ka(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(hb(this.Da)&&lb.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}class pb{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Ky(e)}Ba(e,t,n,r=!1){return new db({Da:e,methodName:t,La:n,path:fd.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function fb(e){const t=e._freezeSettings(),n=Ky(e._databaseId);return new pb(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mb(e,t,n,r,s,i={}){const o=e.Ba(i.merge||i.mergeFields?2:0,t,n,s);xb("Data must be an object, but it was:",o,r);const a=Cb(r,o);let l,u;if(i.merge)l=new md(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Ab(t,r,n);if(!o.contains(s))throw new Gh($h.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Ob(e,s)||e.push(s)}l=new md(e),u=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=o.fieldTransforms;return new ub(new Bd(a),l,u)}class gb extends ob{_toFieldTransform(e){if(2!==e.Da)throw e.Fa(1===e.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gb}}function yb(e,t,n){return new db({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class _b extends ob{_toFieldTransform(e){return new zp(e.path,new Lp)}isEqual(e){return e instanceof _b}}class vb extends ob{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=yb(this,e,!0),n=this.Ua.map(e=>Sb(e,t)),r=new Fp(n);return new zp(e.path,r)}isEqual(e){return this===e}}class wb extends ob{constructor(e,t){super(e),this.Ua=t}_toFieldTransform(e){const t=yb(this,e,!0),n=this.Ua.map(e=>Sb(e,t)),r=new Up(n);return new zp(e.path,r)}isEqual(e){return this===e}}class bb extends ob{constructor(e,t){super(e),this.qa=t}_toFieldTransform(e){const t=new qp(e.N,Np(e.N,this.qa));return new zp(e.path,t)}isEqual(e){return this===e}}function Tb(e,t,n,r){const s=e.Ba(1,t,n);xb("Data must be an object, but it was:",s,r);const i=[],o=Bd.empty();ud(r,(e,r)=>{const a=Rb(t,e,n);r=(0,ka.m9)(r);const l=s.$a(a);if(r instanceof gb)i.push(a);else{const e=Sb(r,l);null!=e&&(i.push(a),o.set(a,e))}});const a=new md(i);return new cb(o,a,s.fieldTransforms)}function Ib(e,t,n,r,s,i){const o=e.Ba(1,t,n),a=[Ab(t,r,n)],l=[s];if(i.length%2!=0)throw new Gh($h.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<i.length;d+=2)a.push(Ab(t,i[d])),l.push(i[d+1]);const u=[],c=Bd.empty();for(let d=a.length-1;d>=0;--d)if(!Ob(u,a[d])){const e=a[d];let t=l[d];t=(0,ka.m9)(t);const n=o.$a(e);if(t instanceof gb)u.push(e);else{const r=Sb(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new md(u);return new cb(c,h,o.fieldTransforms)}function Eb(e,t,n,r=!1){return Sb(n,e.Ba(r?4:3,t))}function Sb(e,t){if(kb(e=(0,ka.m9)(e)))return xb("Unsupported field value:",t,e),Cb(e,t);if(e instanceof ob)return function(e,t){if(!hb(t.Da))throw t.Fa(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Fa(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Sb(s,t.Oa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,ka.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Np(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=od.fromDate(e);return{timestampValue:jf(t.N,n)}}if(e instanceof od){const n=new od(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jf(t.N,n)}}if(e instanceof ab)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ib)return{bytesValue:qf(t.N,e._byteString)};if(e instanceof zw){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Fa(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa(`Unsupported field value: ${Uw(e)}`)}(e,t)}function Cb(e,t){const n={};return cd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ud(e,(e,r)=>{const s=Sb(r,t.Na(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function kb(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof od||e instanceof ab||e instanceof ib||e instanceof zw||e instanceof ob)}function xb(e,t,n){if(!kb(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Uw(n);throw t.Fa("an object"===r?e+" a custom object":e+" "+r)}}function Ab(e,t,n){if((t=(0,ka.m9)(t))instanceof sb)return t._internalPath;if("string"==typeof t)return Rb(e,t);throw Pb("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Nb=new RegExp("[~\\*/\\[\\]]");function Rb(e,t,n){if(t.search(Nb)>=0)throw Pb(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new sb(...t.split("."))._internalPath}catch(r){throw Pb(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pb(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Gh($h.INVALID_ARGUMENT,a+e+l)}function Ob(e,t){return e.some(e=>e.isEqual(t))}class Db{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lb extends Db{data(){return super.data()}}function Fb(e,t){return"string"==typeof t?Rb(e,t):t instanceof sb?t._internalPath:t._delegate._internalPath}class Mb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ub extends Db{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Fb("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class jb extends Ub{data(e={}){return super.data(e)}}class qb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Mb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new jb(this._firestore,this._userDataWriter,n.key,n,new Mb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Gh($h.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new jb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Mb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new jb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Mb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:Vb(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bh()}}function Bb(e,t){return e instanceof Ub&&t instanceof Ub?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qb&&t instanceof qb&&e._firestore===t._firestore&&Kw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function zb(e){if(mp(e)&&0===e.explicitOrderBy.length)throw new Gh($h.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hb{}function $b(e,...t){for(const n of t)e=n._apply(e);return e}class Gb extends Hb{constructor(e,t,n){super(),this.Ka=e,this.ja=t,this.Qa=n,this.type="where"}_apply(e){const t=fb(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Gh($h.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on FieldPath.documentId().`);if("in"===i||"not-in"===i){Xb(o,i);const t=[];for(const n of o)t.push(Jb(r,e,n));a={arrayValue:{values:t}}}else a=Jb(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Xb(o,i),a=Eb(n,"where",o,"in"===i||"not-in"===i);const l=Qd.create(s,i,a);return function(e,t){if(t.v()){const n=yp(e);if(null!==n&&!n.isEqual(t.field))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=gp(e);null!==r&&eT(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Gh($h.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,l),l}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Hw(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new hp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class Zb extends Hb{constructor(e,t){super(),this.Ka=e,this.Wa=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Gh($h.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Gh($h.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new ap(t,n);return function(e,t){if(null===gp(e)){const n=yp(e);null!==n&&eT(0,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new Hw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Wb extends Hb{constructor(e,t,n){super(),this.type=e,this.Ga=t,this.za=n}_apply(e){return new Hw(e.firestore,e.converter,bp(e._query,this.Ga,this.za))}}class Kb extends Hb{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Yb(e,this.type,this.Ha,this.Ja);return new Hw(e.firestore,e.converter,function(e,t){return new hp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Qb extends Hb{constructor(e,t,n){super(),this.type=e,this.Ha=t,this.Ja=n}_apply(e){const t=Yb(e,this.type,this.Ha,this.Ja);return new Hw(e.firestore,e.converter,function(e,t){return new hp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Yb(e,t,n,r){if(n[0]=(0,ka.m9)(n[0]),n[0]instanceof Db)return function(e,t,n,r,s){if(!r)throw new Gh($h.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const i=[];for(const o of vp(e))if(o.field.isKeyField())i.push(Ld(t,r.key));else{const e=r.data.field(o.field);if(bd(e))throw new Gh($h.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Gh($h.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}i.push(e)}return new ip(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=fb(e.firestore);return function(e,t,n,r,s,i){const o=e.explicitOrderBy;if(s.length>o.length)throw new Gh($h.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<s.length;l++){const i=s[l];if(o[l].field.isKeyField()){if("string"!=typeof i)throw new Gh($h.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof i}`);if(!_p(e)&&-1!==i.indexOf("/"))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${i}' contains a slash.`);const n=e.path.child(dd.fromString(i));if(!kd.isDocumentKey(n))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new kd(n);a.push(Ld(t,s))}else{const e=Eb(n,r,i);a.push(e)}}return new ip(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Jb(e,t,n){if("string"==typeof(n=(0,ka.m9)(n))){if(""===n)throw new Gh($h.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!_p(t)&&-1!==n.indexOf("/"))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(dd.fromString(n));if(!kd.isDocumentKey(r))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ld(e,new kd(r))}if(n instanceof zw)return Ld(e,n._key);throw new Gh($h.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uw(n)}.`)}function Xb(e,t){if(!Array.isArray(e)||0===e.length)throw new Gh($h.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Gh($h.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function eT(e,t,n){if(!n.isEqual(t))throw new Gh($h.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class tT{convertValue(e,t="none"){switch(xd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bh()}}convertObject(e,t){const n={};return ud(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new ab(vd(e.latitude),vd(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Td(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Id(e));default:return null}}convertTimestamp(e){const t=_d(e);return new od(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dd.fromString(e);zh(fm(n));const r=new Pw(n.get(1),n.get(3)),s=new kd(n.popFirst(5));return r.isEqual(t)||jh(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function nT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class rT extends tT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ib(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zw(this.firestore,null,t)}}class sT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fb(e)}set(e,t,n){this._verifyNotCommitted();const r=iT(e,this._firestore),s=nT(r.converter,t,n),i=mb(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,$p.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const s=iT(e,this._firestore);let i;return i="string"==typeof(t=(0,ka.m9)(t))||t instanceof sb?Ib(this._dataReader,"WriteBatch.update",s._key,t,n,r):Tb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(i.toMutation(s._key,$p.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=iT(e,this._firestore);return this._mutations=this._mutations.concat(new sf(t._key,$p.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Gh($h.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iT(e,t){if((e=(0,ka.m9)(e)).firestore!==t)throw new Gh($h.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class oT extends tT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ib(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zw(this.firestore,null,t)}}function aT(e,t,n){e=jw(e,zw);const r=jw(e.firestore,Xw),s=nT(e.converter,t,n);return cT(r,[mb(fb(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,$p.none())])}function lT(e,t,n,...r){e=jw(e,zw);const s=jw(e.firestore,Xw),i=fb(s);let o;return o="string"==typeof(t=(0,ka.m9)(t))||t instanceof sb?Ib(i,"updateDoc",e._key,t,n,r):Tb(i,"updateDoc",e._key,t),cT(s,[o.toMutation(e._key,$p.exists(!0))])}function uT(e,...t){var n,r,s;e=(0,ka.m9)(e);let i={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Yw(t[o])||(i=t[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Yw(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,u,c;if(e instanceof zw)u=jw(e.firestore,Xw),c=pp(e._key.path),l={next:n=>{t[o]&&t[o](hT(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=jw(e,Hw);u=jw(n.firestore,Xw),c=n._query;const r=new oT(u);l={next:e=>{t[o]&&t[o](new qb(u,r,n,e))},error:t[o+1],complete:t[o+2]},zb(e._query)}return function(e,t,n,r){const s=new cw(r),i=new nv(t,s,n);return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return K_(yield kw(e),i)})),()=>{s.Xo(),e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return Y_(yield kw(e),i)}))}}(eb(u),c,a,l)}function cT(e,t){return function(e,t){const n=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t,n){return vv.apply(this,arguments)}(yield Cw(e),t,n)})),n.promise}(eb(e),t)}function hT(e,t,n){const r=n.docs.get(t._key),s=new oT(e);return new Ub(e,s,t._key,r,new Mb(n.hasPendingWrites,n.fromCache),t.converter)}class dT extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=fb(e)}get(e){const t=iT(e,this._firestore),n=new rT(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Bh();const r=e[0];if(r.isFoundDocument())return new Db(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Db(this._firestore,n,t._key,null,t.converter);throw Bh()})}set(e,t,n){const r=iT(e,this._firestore),s=nT(r.converter,t,n),i=mb(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n,...r){const s=iT(e,this._firestore);let i;return i="string"==typeof(t=(0,ka.m9)(t))||t instanceof sb?Ib(this._dataReader,"Transaction.update",s._key,t,n,r):Tb(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){const t=iT(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=iT(e,this._firestore),n=new oT(this._firestore);return super.get(e).then(e=>new Ub(this._firestore,n,t._key,e._document,new Mb(!1,!1),t.converter))}}function pT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Gh("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function fT(){if("undefined"==typeof Uint8Array)throw new Gh("unimplemented","Uint8Arrays are not available in this environment.")}function mT(){if("undefined"==typeof atob)throw new Gh("unimplemented","Blobs are unavailable in Firestore in this environment.")}Lh=Ea.SDK_VERSION,(0,Ea._registerComponent)(new Sa.wA("firestore",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=new Xw(n,new Yh(e.getProvider("auth-internal")));return t=Object.assign({useFetchStreams:!0},t),r._setSettings(t),r},"PUBLIC")),(0,Ea.registerVersion)("@firebase/firestore","3.1.0",void 0);class gT{constructor(e){this._delegate=e}static fromBase64String(e){return mT(),new gT(ib.fromBase64String(e))}static fromUint8Array(e){return fT(),new gT(ib.fromUint8Array(e))}toBase64(){return mT(),this._delegate.toBase64()}toUint8Array(){return fT(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class _T{enableIndexedDbPersistence(e,t){return function(e,t){rb(e=jw(e,Xw));const n=eb(e),r=e._freezeSettings(),s=new lw;return nb(n,s,new ow(s,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){rb(e=jw(e,Xw));const t=eb(e),n=e._freezeSettings(),r=new lw;return nb(t,r,new aw(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Gh($h.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Zh;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Ia.Z)(function*(){try{yield(n=(0,Ia.Z)(function*(e){if(!qm.bt())return Promise.resolve();const t=e+"main";yield qm.delete(t)}),function(e){return n.apply(this,arguments)})(Jg(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var n})),t.promise}(e._delegate)}}class vT{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Pw||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||qh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var s;const i=(e=jw(e,Bw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&qh("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dh.MOCK_USER;else{t=(0,ka.Sg)(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Gh($h.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dh(i)}e._credentials=new Qh(new Wh(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return e.asyncQueue.enqueue((0,Ia.Z)(function*(){const t=yield Iw(e),n=yield Sw(e);return t.setNetworkEnabled(!0),function(e){const t=Hh(e);return t.Kr.delete(0),r_(t)}(n)}))}(eb(jw(this._delegate,Xw)))}disableNetwork(){return function(e){return e.asyncQueue.enqueue((0,Ia.Z)(function*(){const t=yield Iw(e),n=yield Sw(e);return t.setNetworkEnabled(!1),(r=(0,Ia.Z)(function*(e){const t=Hh(e);t.Kr.add(0),yield i_(t),t.Wr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(eb(jw(this._delegate,Xw)))}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Lw("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){const t=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t){return Av.apply(this,arguments)}(yield Cw(e),t)})),t.promise}(eb(jw(this._delegate,Xw)))}onSnapshotsInSync(e){return t=e,function(e,t){const n=new cw(t);return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t){Hh(e).Zr.add(t),t.next()}(yield kw(e),n)})),()=>{n.Xo(),e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return function(e,t){Hh(e).Zr.delete(t)}(yield kw(e),n)}))}}(eb(jw(this._delegate,Xw)),Yw(t)?t:{next:t});var t}get app(){if(!this._appCompat)throw new Gh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new OT(this,Gw(this._delegate,e))}catch(t){throw ST(t,"collection()","Firestore.collection()")}}doc(e){try{return new ET(this,Zw(this._delegate,e))}catch(t){throw ST(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new NT(this,function(e,t){if(e=jw(e,Bw),Dw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Gh($h.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hw(e,null,function(e){return new hp(dd.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ST(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return n=t=>e(new bT(this,t)),function(e,t){const n=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){const r=yield function(e){return bw(e).then(e=>e.datastore)}(e);new pw(e.asyncQueue,r,t,n).run()})),n.promise}(eb(t=this._delegate),e=>n(new dT(t,e)));var t,n}batch(){return eb(this._delegate),new TT(new sT(this._delegate,e=>cT(this._delegate,e)))}loadBundle(e){return function(e,t){const n=eb(e=jw(e,Xw)),r=new Jw;return function(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new hw(e,t)}(function(e,t){if(e instanceof Uint8Array)return uw(e,t);if(e instanceof ArrayBuffer)return uw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ky(t));e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){!function(e,t,n){const r=Hh(e);var s;(s=(0,Ia.Z)(function*(e,t,n){try{const r=yield t.getMetadata();if(yield function(e,t){const n=Hh(e),r=Bf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return yield t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(ov(r));const s=new iv(r,e.localStore,t.N);let i=yield t.Qo();for(;i;){const e=yield s.fo(i);e&&n._updateProgress(e),i=yield t.Qo()}const o=yield s.complete();yield Mv(e,o.Tn,void 0),yield function(e,t){const n=Hh(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){qh("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}}),function(e,t,n){return s.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Cw(e),s,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return(t=this._delegate,n=e,function(e,t){return e.asyncQueue.enqueue((0,Ia.Z)(function*(){return function(e,t){const n=Hh(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(yield Ew(e),t)}))}(eb(t=jw(t,Xw)),n).then(e=>e?new Hw(t,null,e.query):null)).then(e=>e?new NT(this,e):null);var t,n}}class wT extends tT{constructor(e){super(),this.firestore=e}convertBytes(e){return new gT(new ib(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ET.forKey(t,this.firestore,null)}}class bT{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}get(e){const t=DT(e);return this._delegate.get(t).then(e=>new xT(this._firestore,new Ub(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=DT(e);return n?(pT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const s=DT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...r),this}delete(e){const t=DT(e);return this._delegate.delete(t),this}}class TT{constructor(e){this._delegate=e}set(e,t,n){const r=DT(e);return n?(pT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const s=DT(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...r),this}delete(e){const t=DT(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}let IT=(()=>{class e{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new jb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AT(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(t,n){const r=e.INSTANCES;let s=r.get(t);s||(s=new WeakMap,r.set(t,s));let i=s.get(n);return i||(i=new e(t,new wT(t),n),s.set(n,i)),i}}return e.INSTANCES=new WeakMap,e})();class ET{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Gh("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ET(t,new zw(t._delegate,n,new kd(e)))}static forKey(e,t,n){return new ET(t,new zw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new OT(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new OT(this.firestore,Gw(this._delegate,e))}catch(t){throw ST(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ka.m9)(e))instanceof zw&&Ww(this._delegate,e)}set(e,t){t=pT("DocumentReference.set",t);try{return t?aT(this._delegate,e,t):aT(this._delegate,e)}catch(n){throw ST(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?lT(this._delegate,e):lT(this._delegate,e,t,...n)}catch(r){throw ST(r,"updateDoc()","DocumentReference.update()")}}delete(){return cT(jw((e=this._delegate).firestore,Xw),[new sf(e._key,$p.none())]);var e}onSnapshot(...e){const t=CT(e),n=kT(e,e=>new xT(this.firestore,new Ub(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return uT(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=jw(e,zw);const t=jw(e.firestore,Xw),n=eb(t),r=new oT(t);return function(e,t){const n=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return(r=(0,Ia.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Hh(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Gh($h.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=z_(e,`Failed to get document '${t} from cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Ew(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Ub(t,r,e._key,n,new Mb(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=jw(e,zw);const t=jw(e.firestore,Xw);return Aw(eb(t),e._key,{source:"server"}).then(n=>hT(t,e,n))}(this._delegate):function(e){e=jw(e,zw);const t=jw(e.firestore,Xw);return Aw(eb(t),e._key).then(n=>hT(t,e,n))}(this._delegate),t.then(e=>new xT(this.firestore,new Ub(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new ET(this.firestore,this._delegate.withConverter(e?IT.getInstance(this.firestore,e):null))}}function ST(e,t,n){return e.message=e.message.replace(t,n),e}function CT(e){for(const t of e)if("object"==typeof t&&!yT(t))return t;return{}}function kT(e,t){var n,r;let s;return s=yT(e[0])?e[0]:yT(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{s.next&&s.next(t(e))},error:null===(n=s.error)||void 0===n?void 0:n.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class xT{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ET(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Bb(this._delegate,e._delegate)}}class AT extends xT{data(e){const t=this._delegate.data(e);return void 0!==t||Bh(),t}}class NT{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new wT(e)}where(e,t,n){try{return new NT(this.firestore,$b(this._delegate,function(e,t,n){const r=t,s=Fb("where",e);return new Gb(s,r,n)}(e,t,n)))}catch(r){throw ST(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new NT(this.firestore,$b(this._delegate,function(e,t="asc"){const n=t,r=Fb("orderBy",e);return new Zb(r,n)}(e,t)))}catch(n){throw ST(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new NT(this.firestore,$b(this._delegate,(qw("limit",t=e),new Wb("limit",t,"F"))))}catch(n){throw ST(n,"limit()","Query.limit()")}var t}limitToLast(e){try{return new NT(this.firestore,$b(this._delegate,(qw("limitToLast",t=e),new Wb("limitToLast",t,"L"))))}catch(n){throw ST(n,"limitToLast()","Query.limitToLast()")}var t}startAt(...e){try{return new NT(this.firestore,$b(this._delegate,function(...e){return new Kb("startAt",e,!0)}(...e)))}catch(t){throw ST(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new NT(this.firestore,$b(this._delegate,function(...e){return new Kb("startAfter",e,!1)}(...e)))}catch(t){throw ST(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new NT(this.firestore,$b(this._delegate,function(...e){return new Qb("endBefore",e,!0)}(...e)))}catch(t){throw ST(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new NT(this.firestore,$b(this._delegate,function(...e){return new Qb("endAt",e,!1)}(...e)))}catch(t){throw ST(t,"endAt()","Query.endAt()")}}isEqual(e){return Kw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=jw(e,Hw);const t=jw(e.firestore,Xw),n=eb(t),r=new oT(t);return function(e,t){const n=new Zh;return e.asyncQueue.enqueueAndForget((0,Ia.Z)(function*(){return(r=(0,Ia.Z)(function*(e,t,n){try{const r=yield my(e,t,!0),s=new uv(t,r.Gn),i=s.Io(r.documents),o=s.applyChanges(i,!1);n.resolve(o.snapshot)}catch(e){const r=z_(e,`Failed to execute query '${t} against cache`);n.reject(r)}}),function(e,t,n){return r.apply(this,arguments)})(yield Ew(e),t,n);var r})),n.promise}(n,e._query).then(n=>new qb(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=jw(e,Hw);const t=jw(e.firestore,Xw),n=eb(t),r=new oT(t);return Nw(n,e._query,{source:"server"}).then(n=>new qb(t,r,e,n))}(this._delegate):function(e){e=jw(e,Hw);const t=jw(e.firestore,Xw),n=eb(t),r=new oT(t);return zb(e._query),Nw(n,e._query).then(n=>new qb(t,r,e,n))}(this._delegate),t.then(e=>new PT(this.firestore,new qb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=CT(e),n=kT(e,e=>new PT(this.firestore,new qb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return uT(this._delegate,t,n)}withConverter(e){return new NT(this.firestore,this._delegate.withConverter(e?IT.getInstance(this.firestore,e):null))}}class RT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new NT(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AT(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new RT(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new AT(this._firestore,n))})}isEqual(e){return Bb(this._delegate,e._delegate)}}class OT extends NT{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ET(this.firestore,e):null}doc(e){try{return new ET(this.firestore,void 0===e?Zw(this._delegate):Zw(this._delegate,e))}catch(t){throw ST(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=jw(e.firestore,Xw),r=Zw(e),s=nT(e.converter,t);return cT(n,[mb(fb(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,$p.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new ET(this.firestore,e))}isEqual(e){return Ww(this._delegate,e._delegate)}withConverter(e){return new OT(this.firestore,this._delegate.withConverter(e?IT.getInstance(this.firestore,e):null))}}function DT(e){return jw(e,zw)}class LT{constructor(...e){this._delegate=new sb(...e)}static documentId(){return new LT(fd.keyField().canonicalString())}isEqual(e){return(e=(0,ka.m9)(e))instanceof sb&&this._delegate._internalPath.isEqual(e._internalPath)}}class FT{constructor(e){this._delegate=e}static serverTimestamp(){const e=new _b("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new FT(e)}static delete(){const e=new gb("deleteField");return e._methodName="FieldValue.delete",new FT(e)}static arrayUnion(...e){const t=function(...e){return new vb("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new FT(t)}static arrayRemove(...e){const t=function(...e){return new wb("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new FT(t)}static increment(e){const t=new bb("increment",e);return t._methodName="FieldValue.increment",new FT(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const MT={Firestore:vT,GeoPoint:ab,Timestamp:od,Blob:gT,Transaction:bT,WriteBatch:TT,DocumentReference:ET,DocumentSnapshot:xT,Query:NT,QueryDocumentSnapshot:AT,QuerySnapshot:PT,CollectionReference:OT,FieldPath:LT,FieldValue:FT,setLogLevel:function(e){Fh.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};var UT,jT;jT=(e,t)=>new vT(e,t,new _T),(UT=Ta.Z).INTERNAL.registerComponent(new Sa.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return jT(t,n)},"PUBLIC").setServiceProps(Object.assign({},MT))),UT.registerVersion("@firebase/firestore-compat","0.1.3");var qT=n(1906),VT=n(9098),BT=n(8489),zT=n(9291);class HT extends ar.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new $T(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,s=n.length;let i;if(this.closed)throw new lr.N;if(this.isStopped||this.hasError?i=us.w.EMPTY:(this.observers.push(e),i=new zT.W(this,e)),r&&e.add(e=new VT.ht(e,r)),t)for(let o=0;o<s&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<s&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),i}_getNow(){return(this.scheduler||BT.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,s=r.length;let i=0;for(;i<s&&!(e-r[i].time<n);)i++;return s>t&&(i=Math.max(i,s-t)),i>0&&r.splice(0,i),r}}class $T{constructor(e,t){this.time=e,this.value=t}}function GT(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let s,i,o=0,a=!1,l=!1;return function(u){let c;o++,!s||a?(a=!1,s=new HT(e,t,r),c=s.subscribe(this),i=u.subscribe({next(e){s.next(e)},error(e){a=!0,s.error(e)},complete(){l=!0,i=void 0,s.complete()}}),l&&(i=void 0)):c=s.subscribe(this),this.add(()=>{o--,c.unsubscribe(),c=void 0,i&&!l&&n&&0===o&&(i.unsubscribe(),i=void 0,s=void 0)})}}(r))}function ZT(e,t){return t?Nr(()=>e,t):Nr(()=>e)}var WT=n(4187),KT=n(9001);const QT=new r.OlP("angularfire2.auth.use-emulator"),YT=new r.OlP("angularfire2.auth.settings"),JT=new r.OlP("angularfire2.auth.tenant-id"),XT=new r.OlP("angularfire2.auth.langugage-code"),eI=new r.OlP("angularfire2.auth.use-device-language"),tI=new r.OlP("angularfire.auth.persistence"),nI=(e,t,n,r,s,i,o,a)=>(0,pa.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),r&&(l.tenantId=r),l.languageCode=s,i&&l.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))l.settings[e]=t;return a&&l.setPersistence(a),l},[n,r,s,i,o,a]);let rI=(()=>{class e{constructor(e,t,r,s,i,o,a,l,u,c,h){const d=new ar.xQ,p=(0,or.of)(void 0).pipe((0,VT.QV)(i.outsideAngular),Nr(()=>s.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,3678)))),(0,xr.U)(()=>(0,ba.on)(e,s,t)),(0,xr.U)(e=>nI(e,s,o,l,u,c,a,h)),GT({bufferSize:1,refCount:!1}));if(L(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,or.of)(null);else{p.pipe(os()).subscribe();const e=p.pipe(Nr(e=>e.getRedirectResult().then(e=>e,()=>null)),pa.iC,GT({bufferSize:1,refCount:!1})),t=p.pipe(Nr(e=>new gr.y(t=>({unsubscribe:s.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(Nr(e=>new gr.y(t=>({unsubscribe:s.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(ZT(t),(0,WT.R)(i.outsideAngular),(0,VT.QV)(i.insideAngular)),this.user=e.pipe(ZT(n),(0,WT.R)(i.outsideAngular),(0,VT.QV)(i.insideAngular)),this.idToken=this.user.pipe(Nr(e=>e?(0,ir.D)(e.getIdToken()):(0,or.of)(null))),this.idTokenResult=this.user.pipe(Nr(e=>e?(0,ir.D)(e.getIdTokenResult()):(0,or.of)(null))),this.credential=(0,qT.T)(e,d,this.authState.pipe(Vr(e=>!e))).pipe((0,xr.U)(e=>(null==e?void 0:e.user)?e:null),(0,WT.R)(i.outsideAngular),(0,VT.QV)(i.insideAngular))}return(0,ba.pX)(this,p,s,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>d.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ba.Dh),r.LFG(ba.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pa.HU),r.LFG(QT,8),r.LFG(YT,8),r.LFG(JT,8),r.LFG(XT,8),r.LFG(eI,8),r.LFG(tI,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();function sI(e,t){return function(e,t=da.z){return new gr.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function iI(e,t){return sI(e,t).pipe((0,xr.U)(e=>({payload:e,type:"query"})))}function oI(e,t){return iI(e,t).pipe(Mr(void 0),fa(),(0,xr.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,s)=>{const i=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));i&&JSON.stringify(i.doc.metadata)===JSON.stringify(t.metadata)||!i&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:s,newIndex:s,type:"modified",doc:t}})}),r}))}function aI(e,t,n){return oI(e,n).pipe(Ur((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return lI(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return lI(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return lI(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),ya(),(0,xr.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function lI(e,t,n,...r){const s=e.slice();return s.splice(t,n,...r),s}function uI(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}(0,ba.GT)(rI,[{name:null,config:null,emulatorConfig:null,app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class cI{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=oI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,xr.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(Mr(void 0),fa(),Vr(([e,t])=>t.length>0||!e),(0,xr.U)(([e,t])=>t),pa.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ur((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=uI(e);return aI(this.query,t,this.afs.schedulers.outsideAngular).pipe(pa.iC)}valueChanges(e={}){return iI(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),pa.iC)}get(e){return(0,ir.D)(this.query.get(e)).pipe(pa.iC)}add(e){return this.ref.add(e)}doc(e){return new hI(this.ref.doc(e),this.afs)}}class hI{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:s}=yI(n,t);return new cI(r,s,this.afs)}snapshotChanges(){return function(e,t){return sI(e,t).pipe(Mr(void 0),fa(),(0,xr.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(pa.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,xr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ir.D)(this.ref.get(e)).pipe(pa.iC)}}class dI{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?oI(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Vr(e=>e.length>0),pa.iC):oI(this.query,this.afs.schedulers.outsideAngular).pipe(pa.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ur((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=uI(e);return aI(this.query,t,this.afs.schedulers.outsideAngular).pipe(pa.iC)}valueChanges(e={}){return iI(this.query,this.afs.schedulers.outsideAngular).pipe((0,xr.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),pa.iC)}get(e){return(0,ir.D)(this.query.get(e)).pipe(pa.iC)}}const pI=new r.OlP("angularfire2.enableFirestorePersistence"),fI=new r.OlP("angularfire2.firestore.persistenceSettings"),mI=new r.OlP("angularfire2.firestore.settings"),gI=new r.OlP("angularfire2.firestore.use-emulator");function yI(e,t=(e=>e)){return{query:t(e),ref:e}}let _I=(()=>{class e{constructor(e,t,n,r,s,i,o,a,l,u,c,h,d,p,f,m){this.schedulers=o;const g=(0,ba.on)(e,i,t),y=l;u&&nI(g,i,c,d,p,f,h,m),[this.firestore,this.persistenceEnabled$]=(0,pa.cc)(`${g.name}.firestore`,"AngularFirestore",g.name,()=>{const e=i.runOutsideAngular(()=>g.firestore());if(r&&e.settings(r),y&&e.useEmulator(...y),n&&!L(s)){const t=()=>{try{return(0,ir.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,or.of)(!1)}};return[e,i.runOutsideAngular(t)]}return[e,(0,or.of)(!1)]},[r,y,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:s}=yI(n,t),i=this.schedulers.ngZone.run(()=>r);return new cI(i,s,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new dI(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new hI(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ba.Dh),r.LFG(ba.xv,8),r.LFG(pI,8),r.LFG(mI,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pa.HU),r.LFG(fI,8),r.LFG(gI,8),r.LFG(rI,8),r.LFG(QT,8),r.LFG(YT,8),r.LFG(JT,8),r.LFG(XT,8),r.LFG(eI,8),r.LFG(tI,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),vI=(()=>{class e{constructor(){KT.Z.registerVersion("angularfire",pa.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:pI,useValue:!0},{provide:fI,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[_I]}),e})();var wI=n(1055);class bI{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new TI(e,this.observables,this.project))}}class TI extends pr{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let s=0;s<r;s++)this.toRespond.push(s);for(let s=0;s<r;s++)this.add(yr(this,t[s],void 0,s))}notifyNext(e,t,n){this.values[n]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class II{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new EI(e,this.predicate))}}class EI extends dr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}let SI="";function CI(e){SI=e}class kI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ka.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ka.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ka.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const AI=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new kI(t)}}catch(t){}return new xI},NI=AI("localStorage"),RI=AI("sessionStorage"),PI=new Ca.Yd("@firebase/database"),OI=function(){let e=1;return function(){return e++}}(),DI=function(e){const t=(0,ka.dS)(e),n=new ka.gQ;n.update(t);const r=n.digest();return ka.US.encodeByteArray(r)},LI=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=LI.apply(null,r):t+="object"==typeof r?(0,ka.Pz)(r):r,t+=" "}return t};let FI=null,MI=!0;const UI=function(e,t){(0,ka.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(PI.logLevel=Ca.in.VERBOSE,FI=PI.log.bind(PI),t&&RI.set("logging_enabled",!0)):"function"==typeof e?FI=e:(FI=null,RI.remove("logging_enabled"))},jI=function(...e){if(!0===MI&&(MI=!1,null===FI&&!0===RI.get("logging_enabled")&&UI(!0)),FI){const t=LI.apply(null,e);FI(t)}},qI=function(e){return function(...t){jI(e,...t)}},VI=function(...e){const t="FIREBASE INTERNAL ERROR: "+LI(...e);PI.error(t)},BI=function(...e){const t=`FIREBASE FATAL ERROR: ${LI(...e)}`;throw PI.error(t),new Error(t)},zI=function(...e){const t="FIREBASE WARNING: "+LI(...e);PI.warn(t)},HI=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},$I="[MIN_NAME]",GI="[MAX_NAME]",ZI=function(e,t){if(e===t)return 0;if(e===$I||t===GI)return-1;if(t===$I||e===GI)return 1;{const n=tE(e),r=tE(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},WI=function(e,t){return e===t?0:e<t?-1:1},KI=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,ka.Pz)(t))},QI=function(e){if("object"!=typeof e||null===e)return(0,ka.Pz)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,ka.Pz)(t[r]),n+=":",n+=QI(e[t[r]]);return n+="}",n},YI=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let s=0;s<n;s+=t)r.push(e.substring(s,s+t>n?n:s+t));return r};function JI(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const XI=function(e){let t,n,r,s,i;(0,ka.hu)(!HI(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=s+1023,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const o=[];for(i=52;i;i-=1)o.push(r%2?1:0),r=Math.floor(r/2);for(i=11;i;i-=1)o.push(n%2?1:0),n=Math.floor(n/2);o.push(t?1:0),o.reverse();const a=o.join("");let l="";for(i=0;i<64;i+=8){let e=parseInt(a.substr(i,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},eE=new RegExp("^-?(0*)\\d{1,10}$"),tE=function(e){if(eE.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},nE=function(e){try{e()}catch(t){setTimeout(()=>{throw zI("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},rE=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class sE{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){zI(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class iE{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(jI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',zI(e)}}let oE=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const aE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lE="websocket",uE="long_polling";class cE{constructor(e,t,n,r,s=!1,i="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=NI.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&NI.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function hE(e,t,n){let r;if((0,ka.hu)("string"==typeof t,"typeof type must == string"),(0,ka.hu)("object"==typeof n,"typeof params must == object"),t===lE)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==uE)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const s=[];return JI(n,(e,t)=>{s.push(e+"="+t)}),r+s.join("&")}class dE{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ka.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ka.p$)(this.counters_)}}const pE={},fE={};function mE(e){const t=e.toString();return pE[t]||(pE[t]=new dE),pE[t]}class gE{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&nE(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yE{constructor(e,t,n,r,s,i,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=i,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=qI(e),this.stats_=mE(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),hE(t,uE,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,ka.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _E((...e)=>{const[t,n,r,s,i]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&aE.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yE.forceAllow_=!0}static forceDisallow(){yE.forceDisallow_=!0}static isAvailable(){return!((0,ka.Yr)()||!yE.forceAllow_&&(yE.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ka.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,ka.h$)(t),r=YI(n,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ka.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ka.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class _E{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ka.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=OI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=_E.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(s){jI("frame writing exception"),s.stack&&jI(s.stack),jI(s)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jI("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,ka.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{jI("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let vE=null;"undefined"!=typeof MozWebSocket?vE=MozWebSocket:"undefined"!=typeof WebSocket&&(vE=WebSocket);let wE=(()=>{class e{constructor(t,n,r,s,i,o,a){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=qI(this.connId),this.stats_=mE(n),this.connURL=e.connectionURL_(n,o,a,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r){const s={v:"5"};return!(0,ka.Yr)()&&"undefined"!=typeof location&&location.hostname&&aE.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s.ac=r),hE(e,lE,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,NI.set("previous_websocket_failure",!0);try{if((0,ka.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${SI}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new vE(this.connURL,[],e)}else this.mySock=new vE(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==vE&&!e.forceDisallow_}static previouslyFailed(){return NI.isInMemoryStorage||!0===NI.get("previous_websocket_failure")}markConnectionHealthy(){NI.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,ka.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,ka.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,ka.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=YI(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class bE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[yE,wE]}initTransports_(e){const t=wE&&wE.isAvailable();let n=t&&!wE.previouslyFailed();if(e.webSocketOnly&&(t||zI("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[wE];else{const e=this.transports_=[];for(const t of bE.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class TE{constructor(e,t,n,r,s,i,o,a,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=i,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=qI("c:"+this.id+":"),this.transportManager_=new bE(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=rE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=KI("t",e),n=KI("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=KI("t",e),n=KI("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=KI("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?VI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):VI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&zI("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),rE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(NI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class IE{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class EE{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ka.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!n||n===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,ka.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class SE extends EE{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,ka.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new SE}getInitialEvent(e){return(0,ka.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class CE{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function kE(){return new CE("")}function xE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function AE(e){return e.pieces_.length-e.pieceNum_}function NE(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new CE(e.pieces_,t)}function RE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function PE(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function OE(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new CE(t,0)}function DE(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof CE)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new CE(n,0)}function LE(e){return e.pieceNum_>=e.pieces_.length}function FE(e,t){const n=xE(e),r=xE(t);if(null===n)return t;if(n===r)return FE(NE(e),NE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ME(e,t){const n=PE(e,0),r=PE(t,0);for(let s=0;s<n.length&&s<r.length;s++){const e=ZI(n[s],r[s]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function UE(e,t){if(AE(e)!==AE(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function jE(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(AE(e)>AE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class qE{constructor(e,t){this.errorPrefix_=t,this.parts_=PE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,ka.ug)(this.parts_[n]);VE(this)}}function VE(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+BE(e))}function BE(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class zE extends EE{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new zE}getInitialEvent(e){return(0,ka.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const HE=1e3;let $E,GE=(()=>{class e extends IE{constructor(t,n,r,s,i,o,a,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=qI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=HE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,ka.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&SE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,s={r:r,a:e,b:t};this.log_((0,ka.Pz)(s)),(0,ka.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new ka.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[s];void 0!==e&&r===e&&(delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),t.promise}listen(e,t,n,r){this.initConnection_();const s=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+s),this.listens.has(i)||this.listens.set(i,new Map),(0,ka.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ka.hu)(!this.listens.get(i).has(s),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(i).set(s,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r};t.tag&&(i.q=n._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest("q",i,i=>{const o=i.d,a=i.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(r,s),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,ka.r3)(e,"w")){const n=(0,ka.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();zI(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,ka.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,ka.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,ka.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const s={p:e};r&&(s.q=n,s.t=r),this.sendRequest("n",s)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const s={p:t,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,s){this.initConnection_();const i={p:t,d:n};void 0!==s&&(i.h=s),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,ka.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):VI("Unrecognized action received from server: "+(0,ka.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,ka.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=HE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ia.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const n=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),i=t.id+":"+e.nextConnectionId_++,o=t.lastSessionId;let a=!1,l=null;const u=function(){l?l.close():(a=!0,s())};t.realtime_={close:u,sendRequest:function(e){(0,ka.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};const c=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[e,u]=yield Promise.all([t.authTokenProvider_.getToken(c),t.appCheckTokenProvider_.getToken(c)]);a?jI("getToken() completed but was canceled"):(jI("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,t.appCheckToken_=u&&u.token,l=new TE(i,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,n,r,s,e=>{zI(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},o))}catch(VI){t.log_("Failed to get token: "+VI),a||(t.repoInfo_.nodeAdmin&&zI(VI),u())}}})()}interrupt(e){jI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){jI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,ka.xb)(this.interruptReasons_)&&(this.reconnectDelay_=HE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>QI(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new CE(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){jI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){jI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,ka.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+SI.replace(/\./g,"-")]=1,(0,ka.uI)()?e["framework.cordova"]=1:(0,ka.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=SE.getInstance().currentlyOnline();return(0,ka.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class ZE{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ZE(e,t)}}class WE{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new ZE($I,e),r=new ZE($I,t);return 0!==this.compare(n,r)}minPost(){return ZE.MIN}}class KE extends WE{static get __EMPTY_NODE(){return $E}static set __EMPTY_NODE(e){$E=e}compare(e,t){return ZI(e.name,t.name)}isDefinedOn(e){throw(0,ka.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ZE.MIN}maxPost(){return new ZE(GI,$E)}makePost(e,t){return(0,ka.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new ZE(e,$E)}toString(){return".key"}}const QE=new KE;class YE{constructor(e,t,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let i=1;for(;!e.isEmpty();)if(e=e,i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse_?e.left:e.right;else{if(0===i){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let JE=(()=>{class e{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=s?s:tS.EMPTY_NODE,this.right=null!=i?i:tS.EMPTY_NODE}copy(t,n,r,s,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return tS.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return tS.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class XE{copy(e,t,n,r,s){return this}insert(e,t,n){return new JE(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let eS,tS=(()=>{class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,JE.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,JE.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new YE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new YE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new YE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new YE(this.root_,null,this.comparator_,!0,e)}}return e.EMPTY_NODE=new XE,e})();function nS(e,t){return ZI(e.name,t.name)}function rS(e,t){return ZI(e,t)}const sS=function(e){return"number"==typeof e?"number:"+XI(e):"string:"+e},iS=function(e){if(e.isLeafNode()){const t=e.val();(0,ka.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,ka.r3)(t,".sv"),"Priority must be a string or number.")}else(0,ka.hu)(e===eS||e.isEmpty(),"priority of unexpected type.");(0,ka.hu)(e===eS||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oS,aS,lS,uS=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,ka.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),iS(this.priorityNode_)}static set __childrenNodeConstructor(e){oS=e}static get __childrenNodeConstructor(){return oS}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return LE(t)?this:".priority"===xE(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=xE(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,ka.hu)(".priority"!==r||1===AE(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(NE(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sS(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?XI(this.value_):this.value_,this.lazyHash_=DI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,ka.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,s=e.VALUE_TYPE_ORDER.indexOf(n),i=e.VALUE_TYPE_ORDER.indexOf(r);return(0,ka.hu)(s>=0,"Unknown leaf type: "+n),(0,ka.hu)(i>=0,"Unknown leaf type: "+r),s===i?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const cS=new class extends WE{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),s=n.compareTo(r);return 0===s?ZI(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ZE.MIN}maxPost(){return new ZE(GI,new uS("[PRIORITY-POST]",lS))}makePost(e,t){const n=aS(e);return new ZE(t,new uS("[PRIORITY-POST]",n))}toString(){return".priority"}},hS=Math.log(2);class dS{constructor(e){this.count=parseInt(Math.log(e+1)/hS,10),this.current_=this.count-1;const t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pS=function(e,t,n,r){e.sort(t);const s=function(t,r){const i=r-t;let o,a;if(0===i)return null;if(1===i)return o=e[t],a=n?n(o):o,new JE(a,o.node,JE.BLACK,null,null);{const l=parseInt(i/2,10)+t,u=s(t,l),c=s(l+1,r);return o=e[l],a=n?n(o):o,new JE(a,o.node,JE.BLACK,u,c)}},i=function(t){let r=null,i=null,o=e.length;const a=function(t,r){const i=o-t,a=o;o-=t;const u=s(i+1,a),c=e[i],h=n?n(c):c;l(new JE(h,c.node,r,null,u))},l=function(e){r?(r.left=e,r=e):(i=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,JE.BLACK):(a(r,JE.BLACK),a(r,JE.RED))}return i}(new dS(e.length));return new tS(r||t,i)};let fS;const mS={};class gS{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ka.hu)(mS&&cS,"ChildrenNode.ts has not been loaded"),fS=fS||new gS({".priority":mS},{".priority":cS}),fS}get(e){const t=(0,ka.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof tS?t:null}hasIndex(e){return(0,ka.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ka.hu)(e!==QE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const s=t.getIterator(ZE.Wrap);let i,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=s.getNext();i=r?pS(n,e.getCompare()):mS;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const u=Object.assign({},this.indexes_);return u[a]=i,new gS(u,l)}addToIndexes(e,t){const n=(0,ka.UI)(this.indexes_,(n,r)=>{const s=(0,ka.DV)(this.indexSet_,r);if((0,ka.hu)(s,"Missing index implementation for "+r),n===mS){if(s.isDefinedOn(e.node)){const n=[],r=t.getIterator(ZE.Wrap);let i=r.getNext();for(;i;)i.name!==e.name&&n.push(i),i=r.getNext();return n.push(e),pS(n,s.getCompare())}return mS}{const r=t.get(e.name);let s=n;return r&&(s=s.remove(new ZE(e.name,r))),s.insert(e,e.node)}});return new gS(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,ka.UI)(this.indexes_,n=>{if(n===mS)return n;{const r=t.get(e.name);return r?n.remove(new ZE(e.name,r)):n}});return new gS(n,this.indexSet_)}}let yS,_S=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&iS(this.priorityNode_),this.children_.isEmpty()&&(0,ka.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yS||(yS=new e(new tS(rS),null,gS.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yS}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?yS:t}}getChild(e){const t=xE(e);return null===t?this:this.getImmediateChild(t).getChild(NE(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,ka.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const r=new ZE(t,n);let s,i;n.isEmpty()?(s=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?yS:this.priorityNode_;return new e(s,o,i)}}updateChild(e,t){const n=xE(e);if(null===n)return t;{(0,ka.hu)(".priority"!==xE(e)||1===AE(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(NE(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(cS,(o,a)=>{n[o]=a.val(t),r++,i&&e.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!t&&i&&s<2*r){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+sS(this.getPriority().val())+":"),this.forEachChild(cS,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":DI(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new ZE(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ZE(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ZE(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,ZE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,ZE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===vS?-1:0}withIndex(t){if(t===QE||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===QE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(cS),n=t.getIterator(cS);let r=e.getNext(),s=n.getNext();for(;r&&s;){if(r.name!==s.name||!r.node.equals(s.node))return!1;r=e.getNext(),s=n.getNext()}return null===r&&null===s}return!1}return!1}}resolveIndex_(e){return e===QE?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const vS=new class extends _S{constructor(){super(new tS(rS),_S.EMPTY_NODE,gS.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _S.EMPTY_NODE}isEmpty(){return!1}};function wS(e,t=null){if(null===e)return _S.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,ka.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new uS(e,wS(t));if(e instanceof Array){let n=_S.EMPTY_NODE;return JI(e,(t,r)=>{if((0,ka.r3)(e,t)&&"."!==t.substring(0,1)){const e=wS(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(wS(t))}{const n=[];let r=!1;if(JI(e,(e,t)=>{if("."!==e.substring(0,1)){const s=wS(t);s.isEmpty()||(r=r||!s.getPriority().isEmpty(),n.push(new ZE(e,s)))}}),0===n.length)return _S.EMPTY_NODE;const s=pS(n,nS,e=>e.name,rS);if(r){const e=pS(n,cS.getCompare());return new _S(s,wS(t),new gS({".priority":e},{".priority":cS}))}return new _S(s,wS(t),gS.Default)}}Object.defineProperties(ZE,{MIN:{value:new ZE($I,_S.EMPTY_NODE)},MAX:{value:new ZE(GI,vS)}}),KE.__EMPTY_NODE=_S.EMPTY_NODE,uS.__childrenNodeConstructor=_S,eS=vS,lS=vS,aS=wS;class bS extends WE{constructor(e){super(),this.indexPath_=e,(0,ka.hu)(!LE(e)&&".priority"!==xE(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),s=n.compareTo(r);return 0===s?ZI(e.name,t.name):s}makePost(e,t){const n=wS(e),r=_S.EMPTY_NODE.updateChild(this.indexPath_,n);return new ZE(t,r)}maxPost(){const e=_S.EMPTY_NODE.updateChild(this.indexPath_,vS);return new ZE(GI,e)}toString(){return PE(this.indexPath_,0).join("/")}}const TS=new class extends WE{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?ZI(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ZE.MIN}maxPost(){return ZE.MAX}makePost(e,t){const n=wS(e);return new ZE(t,n)}toString(){return".value"}},IS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ES=function(){let e=0;const t=[];return function(n){const r=n===e;let s;e=n;const i=new Array(8);for(s=7;s>=0;s--)i[s]=IS.charAt(n%64),n=Math.floor(n/64);(0,ka.hu)(0===n,"Cannot push at time == 0");let o=i.join("");if(r){for(s=11;s>=0&&63===t[s];s--)t[s]=0;t[s]++}else for(s=0;s<12;s++)t[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)o+=IS.charAt(t[s]);return(0,ka.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),SS=function(e){if("2147483647"===e)return"-";const t=tE(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charAt(i);if(n.length<786)return n.push("-"),n.join("");let r=n.length-1;for(;r>=0&&"z"===n[r];)r--;if(-1===r)return GI;const s=IS.charAt(IS.indexOf(n[r])+1);return n[r]=s,n.slice(0,r+1).join("")},CS=function(e){if("-2147483648"===e)return $I;const t=tE(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=IS.charAt(IS.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function kS(e){return{type:"value",snapshotNode:e}}function xS(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function AS(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function NS(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class RS{constructor(e){this.index_=e}updateChild(e,t,n,r,s,i){(0,ka.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=i&&(n.isEmpty()?e.hasChild(t)?i.trackChildChange(AS(t,o)):(0,ka.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?i.trackChildChange(xS(t,n)):i.trackChildChange(NS(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(cS,(e,r)=>{t.hasChild(e)||n.trackChildChange(AS(e,r))}),t.isLeafNode()||t.forEachChild(cS,(t,r)=>{if(e.hasChild(t)){const s=e.getImmediateChild(t);s.equals(r)||n.trackChildChange(NS(t,r,s))}else n.trackChildChange(xS(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?_S.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class PS{constructor(e){this.indexedFilter_=new RS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=PS.getStartPost_(e),this.endPost_=PS.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,s,i){return this.matches(new ZE(t,n))||(n=_S.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,s,i)}updateFullNode(e,t,n){t.isLeafNode()&&(t=_S.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(_S.EMPTY_NODE);const s=this;return t.forEachChild(cS,(e,t)=>{s.matches(new ZE(e,t))||(r=r.updateImmediateChild(e,_S.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class OS{constructor(e){this.rangedFilter_=new PS(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,s,i){return this.rangedFilter_.matches(new ZE(t,n))||(n=_S.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,s,i):this.fullLimitUpdateChild_(e,t,n,s,i)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=_S.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=_S.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let s;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,s,i;if(r=t.withIndex(this.index_),r=r.updatePriority(_S.EMPTY_NODE),this.reverse_){i=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();s=(e,n)=>t(n,e)}else i=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),s=this.index_.getCompare();let o=0,a=!1;for(;i.hasNext();){const t=i.getNext();!a&&s(e,t)<=0&&(a=!0),a&&o<this.limit_&&s(t,n)<=0?o++:r=r.updateImmediateChild(t.name,_S.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,s){let i;if(this.reverse_){const e=this.index_.getCompare();i=(t,n)=>e(n,t)}else i=this.index_.getCompare();const o=e;(0,ka.hu)(o.numChildren()===this.limit_,"");const a=new ZE(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),u=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let c=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=c&&(c.name===t||o.hasChild(c.name));)c=r.getChildAfterChild(this.index_,c,this.reverse_);const h=null==c?1:i(c,a);if(u&&!n.isEmpty()&&h>=0)return null!=s&&s.trackChildChange(NS(t,n,e)),o.updateImmediateChild(t,n);{null!=s&&s.trackChildChange(AS(t,e));const n=o.updateImmediateChild(t,_S.EMPTY_NODE);return null!=c&&this.rangedFilter_.matches(c)?(null!=s&&s.trackChildChange(xS(c.name,c.node)),n.updateImmediateChild(c.name,c.node)):n}}return n.isEmpty()?e:u&&i(l,a)>=0?(null!=s&&(s.trackChildChange(AS(l.name,l.node)),s.trackChildChange(xS(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,_S.EMPTY_NODE)):e}}class DS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cS}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ka.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ka.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$I}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ka.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ka.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:GI}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ka.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cS}copy(){const e=new DS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function LS(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function FS(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function MS(e,t){const n=e.copy();return n.index_=t,n}function US(e){const t={};if(e.isDefault())return t;let n;return e.index_===cS?n="$priority":e.index_===TS?n="$value":e.index_===QE?n="$key":((0,ka.hu)(e.index_ instanceof bS,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,ka.Pz)(n),e.startSet_&&(t.startAt=(0,ka.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,ka.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,ka.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,ka.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function jS(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cS&&(t.i=e.index_.toString()),t}class qS extends IE{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=qI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ka.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const i=qS.getListenId_(e,n),o={};this.listens_[i]=o;const a=US(e._queryParams);this.restRequest_(s+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(s,a,!1,n),(0,ka.DV)(this.listens_,i)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=qS.getListenId_(e,t);delete this.listens_[n]}get(e){const t=US(e._queryParams),n=e._path.toString(),r=new ka.BH;return this.restRequest_(n+".json",t,(e,t)=>{let s=t;404===e&&(s=null,e=null),null===e?(this.onDataUpdate_(n,s,!1,null),r.resolve(s)):r.reject(new Error(s))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const i=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ka.xO)(t);this.log_("Sending REST request for "+i);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+i+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,ka.cI)(o.responseText)}catch(e){zI("Failed to parse JSON response for "+i+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&zI("Got unsuccessful REST response for "+i+" Status: "+o.status),n(o.status);n=null}},o.open("GET",i,!0),o.send()})}}class VS{constructor(){this.rootNode_=_S.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function BS(){return{value:null,children:new Map}}function zS(e,t,n){if(LE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=xE(t);e.children.has(r)||e.children.set(r,BS()),zS(e.children.get(r),t=NE(t),n)}}function HS(e,t){if(LE(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(cS,(t,n)=>{zS(e,new CE(t),n)}),HS(e,t)}}if(e.children.size>0){const n=xE(t);return t=NE(t),e.children.has(n)&&HS(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function $S(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{$S(r,new CE(t.toString()+"/"+e),n)})}class GS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&JI(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class ZS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new GS(e);const n=1e4+2e4*Math.random();rE(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;JI(e,(e,r)=>{r>0&&(0,ka.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),rE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var WS=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}({});function KS(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class QS{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=WS.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(LE(this.path)){if(null!=this.affectedTree.value)return(0,ka.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new CE(e));return new QS(kE(),t,this.revert)}}return(0,ka.hu)(xE(this.path)===e,"operationForChild called for unrelated child."),new QS(NE(this.path),this.affectedTree,this.revert)}}class YS{constructor(e,t){this.source=e,this.path=t,this.type=WS.LISTEN_COMPLETE}operationForChild(e){return LE(this.path)?new YS(this.source,kE()):new YS(this.source,NE(this.path))}}class JS{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=WS.OVERWRITE}operationForChild(e){return LE(this.path)?new JS(this.source,kE(),this.snap.getImmediateChild(e)):new JS(this.source,NE(this.path),this.snap)}}class XS{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=WS.MERGE}operationForChild(e){if(LE(this.path)){const t=this.children.subtree(new CE(e));return t.isEmpty()?null:t.value?new JS(this.source,kE(),t.value):new XS(this.source,kE(),t)}return(0,ka.hu)(xE(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new XS(this.source,NE(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class eC{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(LE(e))return this.isFullyInitialized()&&!this.filtered_;const t=xE(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class tC{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function nC(e,t,n,r,s,i){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,ka.g5)("Should only compare child_ events.");const r=new ZE(t.childName,t.snapshotNode),s=new ZE(n.childName,n.snapshotNode);return e.index_.compare(r,s)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,i);s.forEach(s=>{s.respondsTo(n.type)&&t.push(s.createEvent(r,e.query_))})})}function rC(e,t){return{eventCache:e,serverCache:t}}function sC(e,t,n,r){return rC(new eC(t,n,r),e.serverCache)}function iC(e,t,n,r){return rC(e.eventCache,new eC(t,n,r))}function oC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function aC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let lC;class uC{constructor(e,t=(()=>(lC||(lC=new tS(WI)),lC))()){this.value=e,this.children=t}static fromObject(e){let t=new uC(null);return JI(e,(e,n)=>{t=t.set(new CE(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:kE(),value:this.value};if(LE(e))return null;{const n=xE(e),r=this.children.get(n);if(null!==r){const s=r.findRootMostMatchingPathAndValue(NE(e),t);return null!=s?{path:DE(new CE(n),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(LE(e))return this;{const t=xE(e),n=this.children.get(t);return null!==n?n.subtree(NE(e)):new uC(null)}}set(e,t){if(LE(e))return new uC(t,this.children);{const n=xE(e),r=(this.children.get(n)||new uC(null)).set(NE(e),t),s=this.children.insert(n,r);return new uC(this.value,s)}}remove(e){if(LE(e))return this.children.isEmpty()?new uC(null):new uC(null,this.children);{const t=xE(e),n=this.children.get(t);if(n){const r=n.remove(NE(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new uC(null):new uC(this.value,s)}return this}}get(e){if(LE(e))return this.value;{const t=xE(e),n=this.children.get(t);return n?n.get(NE(e)):null}}setTree(e,t){if(LE(e))return t;{const n=xE(e),r=(this.children.get(n)||new uC(null)).setTree(NE(e),t);let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new uC(this.value,s)}}fold(e){return this.fold_(kE(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(DE(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,kE(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(LE(e))return null;{const r=xE(e),s=this.children.get(r);return s?s.findOnPath_(NE(e),DE(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,kE(),t)}foreachOnPath_(e,t,n){if(LE(e))return this;{this.value&&n(t,this.value);const r=xE(e),s=this.children.get(r);return s?s.foreachOnPath_(NE(e),DE(t,r),n):new uC(null)}}foreach(e){this.foreach_(kE(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(DE(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class cC{constructor(e){this.writeTree_=e}static empty(){return new cC(new uC(null))}}function hC(e,t,n){if(LE(t))return new cC(new uC(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const s=r.path;let i=r.value;const o=FE(s,t);return i=i.updateChild(o,n),new cC(e.writeTree_.set(s,i))}{const r=new uC(n),s=e.writeTree_.setTree(t,r);return new cC(s)}}}function dC(e,t,n){let r=e;return JI(n,(e,n)=>{r=hC(r,DE(t,e),n)}),r}function pC(e,t){if(LE(t))return cC.empty();{const n=e.writeTree_.setTree(t,new uC(null));return new cC(n)}}function fC(e,t){return null!=mC(e,t)}function mC(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(FE(n.path,t)):null}function gC(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cS,(e,n)=>{t.push(new ZE(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new ZE(e,n.value))}),t}function yC(e,t){if(LE(t))return e;{const n=mC(e,t);return new cC(null!=n?new uC(n):e.writeTree_.subtree(t))}}function _C(e){return e.writeTree_.isEmpty()}function vC(e,t){return wC(kE(),e.writeTree_,t)}function wC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,s)=>{".priority"===t?((0,ka.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=wC(DE(e,t),s,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(DE(e,".priority"),r)),n}}function bC(e,t){return PC(t,e)}function TC(e,t){if(e.snap)return jE(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&jE(DE(e.path,n),t))return!0;return!1}function IC(e){return e.visible}function EC(e,t,n){let r=cC.empty();for(let s=0;s<e.length;++s){const i=e[s];if(t(i)){const e=i.path;let t;if(i.snap)jE(n,e)?(t=FE(n,e),r=hC(r,t,i.snap)):jE(e,n)&&(t=FE(e,n),r=hC(r,kE(),i.snap.getChild(t)));else{if(!i.children)throw(0,ka.g5)("WriteRecord should have .snap or .children");if(jE(n,e))t=FE(n,e),r=dC(r,t,i.children);else if(jE(e,n))if(t=FE(e,n),LE(t))r=dC(r,kE(),i.children);else{const e=(0,ka.DV)(i.children,xE(t));if(e){const n=e.getChild(NE(t));r=hC(r,kE(),n)}}}}}return r}function SC(e,t,n,r,s){if(r||s){const i=yC(e.visibleWrites,t);return!s&&_C(i)?n:s||null!=n||fC(i,kE())?vC(EC(e.allWrites,function(e){return(e.visible||s)&&(!r||!~r.indexOf(e.writeId))&&(jE(e.path,t)||jE(t,e.path))},t),n||_S.EMPTY_NODE):null}{const r=mC(e.visibleWrites,t);if(null!=r)return r;{const r=yC(e.visibleWrites,t);return _C(r)?n:null!=n||fC(r,kE())?vC(r,n||_S.EMPTY_NODE):null}}}function CC(e,t,n,r){return SC(e.writeTree,e.treePath,t,n,r)}function kC(e,t){return function(e,t,n){let r=_S.EMPTY_NODE;const s=mC(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(cS,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const s=yC(e.visibleWrites,t);return n.forEachChild(cS,(e,t)=>{const n=vC(yC(s,new CE(e)),t);r=r.updateImmediateChild(e,n)}),gC(s).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return gC(yC(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function xC(e,t,n,r){return function(e,t,n,r,s){(0,ka.hu)(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=DE(t,n);if(fC(e.visibleWrites,i))return null;{const t=yC(e.visibleWrites,i);return _C(t)?s.getChild(n):vC(t,s.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function AC(e,t){return function(e,t){return mC(e.visibleWrites,t)}(e.writeTree,DE(e.treePath,t))}function NC(e,t,n){return function(e,t,n,r){const s=DE(t,n),i=mC(e.visibleWrites,s);return null!=i?i:r.isCompleteForChild(n)?vC(yC(e.visibleWrites,s),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function RC(e,t){return PC(DE(e.treePath,t),e.writeTree)}function PC(e,t){return{treePath:e,writeTree:t}}class OC{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,ka.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ka.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(n,NS(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(n,AS(n,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(n,xS(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,ka.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,NS(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const DC=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class LC{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new eC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return NC(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:aC(this.viewCache_),s=function(e,t,n,r,s,i){return function(e,t,n,r,s,i,o){let a;const l=yC(e.visibleWrites,t),u=mC(l,kE());if(null!=u)a=u;else{if(null==n)return[];a=vC(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let s=n.getNext();for(;s&&e.length<1;)0!==t(s,r)&&e.push(s),s=n.getNext();return e}}(e.writeTree,e.treePath,t,n,0,s,i)}(this.writes_,r,t,0,n,e);return 0===s.length?null:s[0]}}function FC(e,t,n,r,s,i){const o=t.eventCache;if(null!=AC(r,n))return t;{let a,l;if(LE(n))if((0,ka.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=aC(t),s=kC(r,n instanceof _S?n:_S.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),s,i)}else{const n=CC(r,aC(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,i)}else{const u=xE(n);if(".priority"===u){(0,ka.hu)(1===AE(n),"Can't have a priority with additional path components");const s=o.getNode();l=t.serverCache.getNode();const i=xC(r,n,s,l);a=null!=i?e.filter.updatePriority(s,i):o.getNode()}else{const c=NE(n);let h;if(o.isCompleteForChild(u)){l=t.serverCache.getNode();const e=xC(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(u).updateChild(c,e):o.getNode().getImmediateChild(u)}else h=NC(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,c,s,i):o.getNode()}}return sC(t,a,o.isFullyInitialized()||LE(n),e.filter.filtersNodes())}}function MC(e,t,n,r,s,i,o,a){const l=t.serverCache;let u;const c=o?e.filter:e.filter.getIndexedFilter();if(LE(n))u=c.updateFullNode(l.getNode(),r,null);else if(c.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);u=c.updateFullNode(l.getNode(),e,null)}else{const e=xE(n);if(!l.isCompleteForPath(n)&&AE(n)>1)return t;const s=NE(n),i=l.getNode().getImmediateChild(e).updateChild(s,r);u=".priority"===e?c.updatePriority(l.getNode(),i):c.updateChild(l.getNode(),e,i,s,DC,null)}const h=iC(t,u,l.isFullyInitialized()||LE(n),c.filtersNodes());return FC(e,h,n,s,new LC(s,h,i),a)}function UC(e,t,n,r,s,i,o){const a=t.eventCache;let l,u;const c=new LC(s,t,i);if(LE(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=sC(t,u,!0,e.filter.filtersNodes());else{const s=xE(n);if(".priority"===s)u=e.filter.updatePriority(t.eventCache.getNode(),r),l=sC(t,u,a.isFullyInitialized(),a.isFiltered());else{const i=NE(n),u=a.getNode().getImmediateChild(s);let h;if(LE(i))h=r;else{const e=c.getCompleteChild(s);h=null!=e?".priority"===RE(i)&&e.getChild(OE(i)).isEmpty()?e:e.updateChild(i,r):_S.EMPTY_NODE}l=u.equals(h)?t:sC(t,e.filter.updateChild(a.getNode(),s,h,i,c,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return l}function jC(e,t){return e.eventCache.isCompleteForChild(t)}function qC(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function VC(e,t,n,r,s,i,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,u=t;l=LE(n)?r:new uC(null).setTree(n,r);const c=t.serverCache.getNode();return l.children.inorderTraversal((n,r)=>{if(c.hasChild(n)){const l=qC(0,t.serverCache.getNode().getImmediateChild(n),r);u=MC(e,u,new CE(n),l,s,i,o,a)}}),l.children.inorderTraversal((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!c.hasChild(n)&&!l){const l=qC(0,t.serverCache.getNode().getImmediateChild(n),r);u=MC(e,u,new CE(n),l,s,i,o,a)}}),u}class BC{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new RS(n.getIndex()),s=(i=n).loadsAllData()?new RS(i.getIndex()):i.hasLimit()?new OS(i):new PS(i);var i;this.processor_=function(e){return{filter:e}}(s);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(_S.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(_S.EMPTY_NODE,a.getNode(),null),c=new eC(l,o.isFullyInitialized(),r.filtersNodes()),h=new eC(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=rC(h,c),this.eventGenerator_=new tC(this.query_)}get query(){return this.query_}}function zC(e,t){const n=aC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!LE(t)&&!n.getImmediateChild(xE(t)).isEmpty())?n.getChild(t):null}function HC(e){return 0===e.eventRegistrations_.length}function $C(e,t,n){const r=[];if(n){(0,ka.hu)(null==t,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,s);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const s=e.eventRegistrations_[r];if(s.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(s)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function GC(e,t,n,r){t.type===WS.MERGE&&null!==t.source.queryId&&((0,ka.hu)(aC(e.viewCache_),"We should always have a full cache before handling merges"),(0,ka.hu)(oC(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,i=function(e,t,n,r,s){const i=new OC;let o,a;if(n.type===WS.OVERWRITE){const l=n;l.source.fromUser?o=UC(e,t,l.path,l.snap,r,s,i):((0,ka.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!LE(l.path),o=MC(e,t,l.path,l.snap,r,s,a,i))}else if(n.type===WS.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,s,i,o){let a=t;return r.foreach((r,l)=>{const u=DE(n,r);jC(t,xE(u))&&(a=UC(e,a,u,l,s,i,o))}),r.foreach((r,l)=>{const u=DE(n,r);jC(t,xE(u))||(a=UC(e,a,u,l,s,i,o))}),a}(e,t,l.path,l.children,r,s,i):((0,ka.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=VC(e,t,l.path,l.children,r,s,a,i))}else if(n.type===WS.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,s,i){let o;if(null!=AC(r,n))return t;{const a=new LC(r,t,s),l=t.eventCache.getNode();let u;if(LE(n)||".priority"===xE(n)){let n;if(t.serverCache.isFullyInitialized())n=CC(r,aC(t));else{const e=t.serverCache.getNode();(0,ka.hu)(e instanceof _S,"serverChildren would be complete if leaf node"),n=kC(r,e)}n=n,u=e.filter.updateFullNode(l,n,i)}else{const s=xE(n);let c=NC(r,s,t.serverCache);null==c&&t.serverCache.isCompleteForChild(s)&&(c=l.getImmediateChild(s)),u=null!=c?e.filter.updateChild(l,s,c,NE(n),a,i):t.eventCache.getNode().hasChild(s)?e.filter.updateChild(l,s,_S.EMPTY_NODE,NE(n),a,i):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=CC(r,aC(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,i)))}return o=t.serverCache.isFullyInitialized()||null!=AC(r,kE()),sC(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,s,i):function(e,t,n,r,s,i,o){if(null!=AC(s,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(LE(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return MC(e,t,n,l.getNode().getChild(n),s,i,a,o);if(LE(n)){let r=new uC(null);return l.getNode().forEachChild(QE,(e,t)=>{r=r.set(new CE(e),t)}),VC(e,t,n,r,s,i,a,o)}return t}{let u=new uC(null);return r.foreach((e,t)=>{const r=DE(n,e);l.isCompleteForPath(r)&&(u=u.set(e,l.getNode().getChild(r)))}),VC(e,t,n,u,s,i,a,o)}}(e,t,a.path,a.affectedTree,r,s,i)}else{if(n.type!==WS.LISTEN_COMPLETE)throw(0,ka.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,s){const i=t.serverCache;return FC(e,iC(t,i.getNode(),i.isFullyInitialized()||LE(n),i.isFiltered()),n,r,DC,s)}(e,t,n.path,r,i)}const l=i.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=oC(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(kS(oC(t)))}}(t,o,l),{viewCache:o,changes:l}}(e.processor_,s,t,n,r);var o,a;return o=e.processor_,(0,ka.hu)((a=i.viewCache).eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),(0,ka.hu)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),(0,ka.hu)(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,ZC(e,i.changes,i.viewCache.eventCache.getNode(),null)}function ZC(e,t,n,r){return function(e,t,n,r){const s=[],i=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),nC(e,s,"child_removed",t,r,n),nC(e,s,"child_added",t,r,n),nC(e,s,"child_moved",i,r,n),nC(e,s,"child_changed",t,r,n),nC(e,s,"value",t,r,n),s}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let WC,KC;class QC{constructor(){this.views=new Map}}function YC(e,t,n,r){const s=t.source.queryId;if(null!==s){const i=e.views.get(s);return(0,ka.hu)(null!=i,"SyncTree gave us an op for an invalid query."),GC(i,t,n,r)}{let s=[];for(const i of e.views.values())s=s.concat(GC(i,t,n,r));return s}}function JC(e,t,n,r,s){const i=e.views.get(t._queryIdentifier);if(!i){let e=CC(n,s?r:null),i=!1;e?i=!0:r instanceof _S?(e=kC(n,r),i=!1):(e=_S.EMPTY_NODE,i=!1);const o=rC(new eC(e,i,!1),new eC(r,s,!1));return new BC(t,o)}return i}function XC(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ek(e,t){let n=null;for(const r of e.views.values())n=n||zC(r,t);return n}function tk(e,t){return t._queryParams.loadsAllData()?sk(e):e.views.get(t._queryIdentifier)}function nk(e,t){return null!=tk(e,t)}function rk(e){return null!=sk(e)}function sk(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let ik=1;class ok{constructor(e){this.listenProvider_=e,this.syncPointTree_=new uC(null),this.pendingWriteTree_={visibleWrites:cC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ak(e,t,n,r,s){return function(e,t,n,r,s){(0,ka.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:s}),s&&(e.visibleWrites=hC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,s),s?pk(e,new JS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function lk(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,ka.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let s=r.visible,i=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&TC(t,r.path)?s=!1:jE(r.path,t.path)&&(i=!0)),o--}return!!s&&(i?(function(e){e.visibleWrites=EC(e.allWrites,IC,kE()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=pC(e.visibleWrites,r.path):JI(r.children,t=>{e.visibleWrites=pC(e.visibleWrites,DE(r.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new uC(null);return null!=r.snap?t=t.set(kE(),!0):JI(r.children,e=>{t=t.set(new CE(e),!0)}),pk(e,new QS(r.path,t,n))}return[]}function uk(e,t,n){return pk(e,new JS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function ck(e,t,n,r){const s=t._path,i=e.syncPointTree_.get(s);let o=[];if(i&&("default"===t._queryIdentifier||nk(i,t))){const a=function(e,t,n,r){const s=t._queryIdentifier,i=[];let o=[];const a=rk(e);if("default"===s)for(const[l,u]of e.views.entries())o=o.concat($C(u,n,r)),HC(u)&&(e.views.delete(l),u.query._queryParams.loadsAllData()||i.push(u.query));else{const t=e.views.get(s);t&&(o=o.concat($C(t,n,r)),HC(t)&&(e.views.delete(s),t.query._queryParams.loadsAllData()||i.push(t.query)))}return a&&!rk(e)&&i.push(new((0,ka.hu)(WC,"Reference.ts has not been loaded"),WC)(t._repo,t._path)),{removed:i,events:o}}(i,t,n,r);0===i.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const l=a.removed;o=a.events;const u=-1!==l.findIndex(e=>e._queryParams.loadsAllData()),c=e.syncPointTree_.findOnPath(s,(e,t)=>rk(t));if(u&&!c){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&rk(t))return[sk(t)];{let e=[];return t&&(e=XC(t)),JI(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],s=r.query,i=gk(e,r);e.listenProvider_.startListening(Tk(s),yk(e,s),i.hashFn,i.onComplete)}}}if(!c&&l.length>0&&!r)if(u){const n=null;e.listenProvider_.stopListening(Tk(t),n)}else l.forEach(t=>{const n=e.queryToTagMap.get(_k(t));e.listenProvider_.stopListening(Tk(t),n)});!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=_k(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return o}function hk(e,t,n){const r=t._path;let s=null,i=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=FE(e,r);s=s||ek(t,n),i=i||rk(t)});let o,a=e.syncPointTree_.get(r);a?(i=i||rk(a),s=s||ek(a,kE())):(a=new QC,e.syncPointTree_=e.syncPointTree_.set(r,a)),null!=s?o=!0:(o=!1,s=_S.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=ek(t,kE());n&&(s=s.updateImmediateChild(e,n))}));const l=nk(a,t);if(!l&&!t._queryParams.loadsAllData()){const n=_k(t);(0,ka.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=ik++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=function(e,t,n,r,s,i){const o=JC(e,t,r,s,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(cS,(e,t)=>{r.push(xS(e,t))}),n.isFullyInitialized()&&r.push(kS(n.getNode())),ZC(e,r,n.getNode(),t)}(o,n)}(a,t,n,bC(e.pendingWriteTree_,r),s,o);if(!l&&!i){const n=tk(a,t);u=u.concat(function(e,t,n){const r=t._path,s=yk(e,t),i=gk(e,n),o=e.listenProvider_.startListening(Tk(t),s,i.hashFn,i.onComplete),a=e.syncPointTree_.subtree(r);if(s)(0,ka.hu)(!rk(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!LE(e)&&t&&rk(t))return[sk(t).query];{let e=[];return t&&(e=e.concat(XC(t).map(e=>e.query))),JI(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(Tk(r),yk(e,r))}}return o}(e,t,n))}return u}function dk(e,t,n){const r=e.pendingWriteTree_,s=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=ek(n,FE(e,t));if(r)return r});return SC(r,t,s,n,!0)}function pk(e,t){return fk(t,e.syncPointTree_,null,bC(e.pendingWriteTree_,kE()))}function fk(e,t,n,r){if(LE(e.path))return mk(e,t,n,r);{const s=t.get(kE());null==n&&null!=s&&(n=ek(s,kE()));let i=[];const o=xE(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=RC(r,o);i=i.concat(fk(a,l,e,t))}return s&&(i=i.concat(YC(s,e,r,n))),i}}function mk(e,t,n,r){const s=t.get(kE());null==n&&null!=s&&(n=ek(s,kE()));let i=[];return t.children.inorderTraversal((t,s)=>{const o=n?n.getImmediateChild(t):null,a=RC(r,t),l=e.operationForChild(t);l&&(i=i.concat(mk(l,s,o,a)))}),s&&(i=i.concat(YC(s,e,r,n))),i}function gk(e,t){const n=t.query,r=yk(e,n);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||_S.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=vk(e,n);if(r){const n=wk(r),s=n.path,i=n.queryId,o=FE(s,t);return bk(e,s,new YS(KS(i),o))}return[]}(e,n._path,r):function(e,t){return pk(e,new YS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return ck(e,n,null,r)}}}}function yk(e,t){const n=_k(t);return e.queryToTagMap.get(n)}function _k(e){return e._path.toString()+"$"+e._queryIdentifier}function vk(e,t){return e.tagToQueryMap.get(t)}function wk(e){const t=e.indexOf("$");return(0,ka.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new CE(e.substr(0,t))}}function bk(e,t,n){const r=e.syncPointTree_.get(t);return(0,ka.hu)(r,"Missing sync point for query tag that we're tracking"),YC(r,n,bC(e.pendingWriteTree_,t),null)}function Tk(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,ka.hu)(KC,"Reference.ts has not been loaded"),KC)(e._repo,e._path):e}class Ik{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ik(t)}node(){return this.node_}}class Ek{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=DE(this.path_,e);return new Ek(this.syncTree_,t)}node(){return dk(this.syncTree_,this.path_)}}const Sk=function(e,t,n){return e&&"object"==typeof e?((0,ka.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Ck(e[".sv"],t,n):"object"==typeof e[".sv"]?kk(e[".sv"],t):void(0,ka.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ck=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,ka.hu)(!1,"Unexpected server value: "+e)}},kk=function(e,t,n){e.hasOwnProperty("increment")||(0,ka.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,ka.hu)(!1,"Unexpected increment value: "+r);const s=t.node();if((0,ka.hu)(null!=s,"Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const i=s.getValue();return"number"!=typeof i?r:i+r},xk=function(e,t,n,r){return Nk(t,new Ek(n,e),r)},Ak=function(e,t,n){return Nk(e,new Ik(t),n)};function Nk(e,t,n){const r=e.getPriority().val(),s=Sk(r,t.getImmediateChild(".priority"),n);let i;if(e.isLeafNode()){const r=e,i=Sk(r.getValue(),t,n);return i!==r.getValue()||s!==r.getPriority().val()?new uS(i,wS(s)):e}{const r=e;return i=r,s!==r.getPriority().val()&&(i=i.updatePriority(new uS(s))),r.forEachChild(cS,(e,r)=>{const s=Nk(r,t.getImmediateChild(e),n);s!==r&&(i=i.updateImmediateChild(e,s))}),i}}class Rk{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function Pk(e,t){let n=t instanceof CE?t:new CE(t),r=e,s=xE(n);for(;null!==s;){const e=(0,ka.DV)(r.node.children,s)||{children:{},childCount:0};r=new Rk(s,r,e),n=NE(n),s=xE(n)}return r}function Ok(e){return e.node.value}function Dk(e,t){e.node.value=t,jk(e)}function Lk(e){return e.node.childCount>0}function Fk(e,t){JI(e.node.children,(n,r)=>{t(new Rk(n,e,r))})}function Mk(e,t,n,r){n&&!r&&t(e),Fk(e,e=>{Mk(e,t,!0,r)}),n&&r&&t(e)}function Uk(e){return new CE(null===e.parent?e.name:Uk(e.parent)+"/"+e.name)}function jk(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===Ok(e)&&!Lk(e)}(n),s=(0,ka.r3)(e.node.children,t);r&&s?(delete e.node.children[t],e.node.childCount--,jk(e)):r||s||(e.node.children[t]=n.node,e.node.childCount++,jk(e))}(e.parent,e.name,e)}const qk=/[\[\].#$\/\u0000-\u001F\u007F]/,Vk=/[\[\].#$\u0000-\u001F\u007F]/,Bk=10485760,zk=function(e){return"string"==typeof e&&0!==e.length&&!qk.test(e)},Hk=function(e){return"string"==typeof e&&0!==e.length&&!Vk.test(e)},$k=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!HI(e)||e&&"object"==typeof e&&(0,ka.r3)(e,".sv")},Gk=function(e,t,n,r){r&&void 0===t||Zk((0,ka.gK)(e,"value"),t,n)},Zk=function(e,t,n){const r=n instanceof CE?new qE(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+BE(r));if("function"==typeof t)throw new Error(e+"contains a function "+BE(r)+" with contents = "+t.toString());if(HI(t))throw new Error(e+"contains "+t.toString()+" "+BE(r));if("string"==typeof t&&t.length>Bk/3&&(0,ka.ug)(t)>Bk)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+BE(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,s=!1;if(JI(t,(t,i)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!zk(t)))throw new Error(e+" contains an invalid key ("+t+") "+BE(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,ka.ug)(t),VE(e)}(r,t),Zk(e,i,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,ka.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&s)throw new Error(e+' contains ".value" child '+BE(r)+" in addition to actual children.")}},Wk=function(e,t,n,r){if(r&&void 0===t)return;const s=(0,ka.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const i=[];JI(t,(e,t)=>{const r=new CE(e);if(Zk(s,t,DE(n,r)),".priority"===RE(r)&&!$k(t))throw new Error(s+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const s=PE(r);for(let t=0;t<s.length;t++)if(".priority"===s[t]&&t===s.length-1);else if(!zk(s[t]))throw new Error(e+"contains an invalid key ("+s[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(ME);let s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&jE(s,r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,i)},Kk=function(e,t,n){if(!n||void 0!==t){if(HI(t))throw new Error((0,ka.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$k(t))throw new Error((0,ka.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Qk=function(e,t,n,r){if(!(r&&void 0===n||zk(n)))throw new Error((0,ka.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yk=function(e,t,n,r){if(!(r&&void 0===n||Hk(n)))throw new Error((0,ka.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Jk=function(e,t){if(".info"===xE(t))throw new Error(e+" failed = Can't modify data under /.info/")},Xk=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!zk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Hk(e)}(n))throw new Error((0,ka.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ex{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tx(e,t){let n=null;for(let r=0;r<t.length;r++){const s=t[r],i=s.getPath();null===n||UE(i,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:i}),n.events.push(s)}n&&e.eventLists_.push(n)}function nx(e,t,n){tx(e,n),sx(e,e=>UE(e,t))}function rx(e,t,n){tx(e,n),sx(e,e=>jE(e,t)||jE(t,e))}function sx(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const s=e.eventLists_[r];s&&(t(s.path)?(ix(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function ix(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();FI&&jI("event: "+n.toString()),nE(r)}}}const ox="repo_interrupt";class ax{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ex,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=BS(),this.transactionQueueTree_=new Rk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lx(e){const t=e.infoData_.getNode(new CE(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function ux(e){return(t=(t={timestamp:lx(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function cx(e,t,n,r,s){e.dataUpdateCount++;const i=new CE(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(r){const t=(0,ka.UI)(n,e=>wS(e));o=function(e,t,n,r){const s=vk(e,r);if(s){const r=wk(s),i=r.path,o=r.queryId,a=FE(i,t),l=uC.fromObject(n);return bk(e,i,new XS(KS(o),a,l))}return[]}(e.serverSyncTree_,i,t,s)}else{const t=wS(n);o=function(e,t,n,r){const s=vk(e,r);if(null!=s){const r=wk(s),i=r.path,o=r.queryId,a=FE(i,t);return bk(e,i,new JS(KS(o),a,n))}return[]}(e.serverSyncTree_,i,t,s)}else if(r){const t=(0,ka.UI)(n,e=>wS(e));o=function(e,t,n){const r=uC.fromObject(n);return pk(e,new XS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,i,t)}else{const t=wS(n);o=uk(e.serverSyncTree_,i,t)}let a=i;o.length>0&&(a=Ix(e,i)),rx(e.eventQueue_,a,o)}function hx(e,t){dx(e,"connected",t),!1===t&&function(e){vx(e,"onDisconnectEvents");const t=ux(e),n=BS();$S(e.onDisconnect_,kE(),(r,s)=>{const i=xk(r,s,e.serverSyncTree_,t);zS(n,r,i)});let r=[];$S(n,kE(),(t,n)=>{r=r.concat(uk(e.serverSyncTree_,t,n));const s=xx(e,t);Ix(e,s)}),e.onDisconnect_=BS(),rx(e.eventQueue_,kE(),r)}(e)}function dx(e,t,n){const r=new CE("/.info/"+t),s=wS(n);e.infoData_.updateSnapshot(r,s);const i=uk(e.infoSyncTree_,r,s);rx(e.eventQueue_,r,i)}function px(e){return e.nextWriteId_++}function fx(e,t,n,r,s){vx(e,"set",{path:t.toString(),value:n,priority:r});const i=ux(e),o=wS(n,r),a=dk(e.serverSyncTree_,t),l=Ak(o,a,i),u=px(e),c=ak(e.serverSyncTree_,t,l,u,!0);tx(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const i="ok"===n;i||zI("set at "+t+" failed: "+n);const o=lk(e.serverSyncTree_,u,!i);rx(e.eventQueue_,t,o),wx(0,s,n,r)});const h=xx(e,t);Ix(e,h),rx(e.eventQueue_,h,[])}function mx(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,s)=>{"ok"===r&&HS(e.onDisconnect_,t),wx(0,n,r,s)})}function gx(e,t,n,r){const s=wS(n);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,i)=>{"ok"===n&&zS(e.onDisconnect_,t,s),wx(0,r,n,i)})}function yx(e,t,n){let r;r=".info"===xE(t._path)?ck(e.infoSyncTree_,t,n):ck(e.serverSyncTree_,t,n),nx(e.eventQueue_,t._path,r)}function _x(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ox)}function vx(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),jI(n,...t)}function wx(e,t,n,r){t&&nE(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let s=e;r&&(s+=": "+r);const i=new Error(s);i.code=e,t(i)}})}function bx(e,t,n){return dk(e.serverSyncTree_,t,n)||_S.EMPTY_NODE}function Tx(e,t=e.transactionQueueTree_){if(t||kx(e,t),Ok(t)){const n=Sx(e,t);(0,ka.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),s=bx(e,t,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,ka.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=FE(t,e.path);i=i.updateChild(r,e.currentOutputSnapshotRaw)}const a=i.val(!0),l=t;e.server_.put(l.toString(),a,r=>{vx(e,"transaction put response",{path:l.toString(),status:r});let s=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,s=s.concat(lk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();kx(e,Pk(e.transactionQueueTree_,t)),Tx(e,e.transactionQueueTree_),rx(e.eventQueue_,t,s);for(let e=0;e<r.length;e++)nE(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{zI("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Ix(e,t)}},o)}(e,Uk(t),n)}else Lk(t)&&Fk(t,t=>{Tx(e,t)})}function Ix(e,t){const n=Ex(e,t),r=Uk(n);return function(e,t,n){if(0===t.length)return;const r=[];let s=[];const i=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const a=t[o],l=FE(n,a.path);let u,c=!1;if((0,ka.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)c=!0,u=a.abortReason,s=s.concat(lk(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)c=!0,u="maxretry",s=s.concat(lk(e.serverSyncTree_,a.currentWriteId,!0));else{const n=bx(e,a.path,i);a.currentInputSnapshot=n;const r=t[o].update(n.val());if(void 0!==r){Zk("transaction failed: Data returned ",r,a.path);let t=wS(r);"object"==typeof r&&null!=r&&(0,ka.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,l=ux(e),u=Ak(t,n,l);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=u,a.currentWriteId=px(e),i.splice(i.indexOf(o),1),s=s.concat(ak(e.serverSyncTree_,a.path,u,a.currentWriteId,a.applyLocally)),s=s.concat(lk(e.serverSyncTree_,o,!0))}else c=!0,u="nodata",s=s.concat(lk(e.serverSyncTree_,a.currentWriteId,!0))}rx(e.eventQueue_,n,s),s=[],c&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&r.push("nodata"===u?()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot):()=>t[o].onComplete(new Error(u),!1,null)))}kx(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)nE(r[o]);Tx(e,e.transactionQueueTree_)}(e,Sx(e,n),r),r}function Ex(e,t){let n,r=e.transactionQueueTree_;for(n=xE(t);null!==n&&void 0===Ok(r);)r=Pk(r,n),n=xE(t=NE(t));return r}function Sx(e,t){const n=[];return Cx(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Cx(e,t,n){const r=Ok(t);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Fk(t,t=>{Cx(e,t,n)})}function kx(e,t){const n=Ok(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Dk(t,n.length>0?n:void 0)}Fk(t,t=>{kx(e,t)})}function xx(e,t){const n=Uk(Ex(e,t)),r=Pk(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{Ax(e,t)}),Ax(e,r),Mk(r,t=>{Ax(e,t)}),n}function Ax(e,t){const n=Ok(t);if(n){const r=[];let s=[],i=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,ka.hu)(i===t-1,"All SENT items should be at beginning of queue."),i=t,n[t].status=3,n[t].abortReason="set"):((0,ka.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),s=s.concat(lk(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===i?Dk(t,void 0):n.length=i+1,rx(e.eventQueue_,Uk(t),s);for(let e=0;e<r.length;e++)nE(r[e])}}const Nx=function(e,t){const n=Rx(e),r=n.namespace;return"firebase.com"===n.domain&&BI(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||BI("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&zI("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new cE(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new CE(n.pathString)}},Rx=function(e){let t="",n="",r="",s="",i="",o=!0,a="https",l=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let c=e.indexOf("/");-1===c&&(c=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(s=function(e){let t="";const n=e.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let e=n[s];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(c,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):zI(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(u+1),10)):u=t.length;const p=t.slice(0,u);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),i=r}"ns"in d&&(i=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};class Px{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ka.Pz)(this.snapshot.exportVal())}}class Ox{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Dx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,ka.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Lx{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new ka.BH;return mx(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Jk("OnDisconnect.remove",this._path);const e=new ka.BH;return gx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Jk("OnDisconnect.set",this._path),Gk("OnDisconnect.set",e,this._path,!1);const t=new ka.BH;return gx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Jk("OnDisconnect.setWithPriority",this._path),Gk("OnDisconnect.setWithPriority",e,this._path,!1),Kk("OnDisconnect.setWithPriority",t,!1);const n=new ka.BH;return function(e,t,n,r,s){const i=wS(n,r);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,r)=>{"ok"===n&&zS(e.onDisconnect_,t,i),wx(0,s,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){Jk("OnDisconnect.update",this._path),Wk("OnDisconnect.update",e,this._path,!1);const t=new ka.BH;return function(e,t,n,r){if((0,ka.xb)(n))return jI("onDisconnect().update() called with empty data.  Don't do anything."),void wx(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(s,i)=>{"ok"===s&&JI(n,(n,r)=>{const s=wS(r);zS(e.onDisconnect_,DE(t,n),s)}),wx(0,r,s,i)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Fx{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return LE(this._path)?null:RE(this._path)}get ref(){return new qx(this._repo,this._path)}get _queryIdentifier(){const e=jS(this._queryParams),t=QI(e);return"{}"===t?"default":t}get _queryObject(){return jS(this._queryParams)}isEqual(e){if(!((e=(0,ka.m9)(e))instanceof Fx))return!1;const t=this._repo===e._repo,n=UE(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function Mx(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ux(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===QE){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==$I)throw new Error(r);if("string"!=typeof t)throw new Error(s)}if(e.hasEnd()){if(e.getIndexEndName()!==GI)throw new Error(r);if("string"!=typeof n)throw new Error(s)}}else if(e.getIndex()===cS){if(null!=t&&!$k(t)||null!=n&&!$k(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ka.hu)(e.getIndex()instanceof bS||e.getIndex()===TS,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jx(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qx extends Fx{constructor(e,t){super(e,t,new DS,!1)}get parent(){const e=OE(this._path);return null===e?null:new qx(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Vx{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new CE(e),n=Hx(this.ref,e);return new Vx(this._node.getChild(t),n,cS)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new Vx(n,Hx(this.ref,t),cS)))}hasChild(e){const t=new CE(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Bx(e,t){return(e=(0,ka.m9)(e))._checkNotDeleted("ref"),void 0!==t?Hx(e._root,t):e._root}function zx(e,t){(e=(0,ka.m9)(e))._checkNotDeleted("refFromURL");const n=Nx(t,e._repo.repoInfo_.nodeAdmin);Xk("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||BI("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Bx(e,n.path.toString())}function Hx(e,t){var n;return null===xE((e=(0,ka.m9)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Yk("child","path",n,!1)):Yk("child","path",t,!1),new qx(e._repo,DE(e._path,t))}function $x(e,t){e=(0,ka.m9)(e),Jk("set",e._path),Gk("set",t,e._path,!1);const n=new ka.BH;return fx(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}class Gx{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new Px("value",this,new Vx(e.snapshotNode,new qx(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ox(this,e,t):null}matches(e){return e instanceof Gx&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Zx{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Ox(this,e,t):null}createEvent(e,t){(0,ka.hu)(null!=e.childName,"Child events should have a childName.");const n=Hx(new qx(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Px(e.type,this,new Vx(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Zx&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Wx(e,t,n,r,s){let i;if("object"==typeof r&&(i=void 0,s=r),"function"==typeof r&&(i=r),s&&s.onlyOnce){const t=n,r=(n,r)=>{yx(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new Dx(n,i||void 0),a="value"===t?new Gx(o):new Zx(t,o);return function(e,t,n){let r;r=".info"===xE(t._path)?hk(e.infoSyncTree_,t,n):hk(e.serverSyncTree_,t,n),nx(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>yx(e._repo,e,a)}function Kx(e,t,n,r){return Wx(e,"value",t,n,r)}function Qx(e,t,n,r){return Wx(e,"child_added",t,n,r)}function Yx(e,t,n,r){return Wx(e,"child_changed",t,n,r)}function Jx(e,t,n,r){return Wx(e,"child_moved",t,n,r)}function Xx(e,t,n,r){return Wx(e,"child_removed",t,n,r)}function eA(e,t,n){let r=null;const s=n?new Dx(n):null;"value"===t?r=new Gx(s):t&&(r=new Zx(t,s)),yx(e._repo,e,r)}class tA{}class nA extends tA{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gk("endAt",this._value,e._path,!0);const t=FS(e._queryParams,this._value,this._key);if(jx(t),Ux(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fx(e._repo,e._path,t,e._orderByCalled)}}class rA extends tA{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gk("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,s;return e.index_===QE?("string"==typeof t&&(t=CS(t)),s=FS(e,t,n)):(r=null==n?$I:CS(n),s=FS(e,t,r)),s.endBeforeSet_=!0,s}(e._queryParams,this._value,this._key);if(jx(t),Ux(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fx(e._repo,e._path,t,e._orderByCalled)}}class sA extends tA{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gk("startAt",this._value,e._path,!0);const t=LS(e._queryParams,this._value,this._key);if(jx(t),Ux(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fx(e._repo,e._path,t,e._orderByCalled)}}class iA extends tA{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gk("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===QE)"string"==typeof t&&(t=SS(t)),r=LS(e,t,n);else{let s;s=null==n?GI:SS(n),r=LS(e,t,s)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jx(t),Ux(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fx(e._repo,e._path,t,e._orderByCalled)}}class oA extends tA{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class aA extends tA{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fx(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class lA extends tA{constructor(e){super(),this._path=e}_apply(e){Mx(e,"orderByChild");const t=new CE(this._path);if(LE(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new bS(t),r=MS(e._queryParams,n);return Ux(r),new Fx(e._repo,e._path,r,!0)}}class uA extends tA{_apply(e){Mx(e,"orderByKey");const t=MS(e._queryParams,QE);return Ux(t),new Fx(e._repo,e._path,t,!0)}}class cA extends tA{_apply(e){Mx(e,"orderByPriority");const t=MS(e._queryParams,cS);return Ux(t),new Fx(e._repo,e._path,t,!0)}}class hA extends tA{_apply(e){Mx(e,"orderByValue");const t=MS(e._queryParams,TS);return Ux(t),new Fx(e._repo,e._path,t,!0)}}class dA extends tA{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Gk("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nA(this._value,this._key)._apply(new sA(this._value,this._key)._apply(e))}}function pA(e,...t){let n=(0,ka.m9)(e);for(const r of t)n=r._apply(n);return n}!function(e){(0,ka.hu)(!WC,"__referenceConstructor has already been defined"),WC=e}(qx),function(e){(0,ka.hu)(!KC,"__referenceConstructor has already been defined"),KC=e}(qx);const fA={};function mA(e,t,n,r,s){let i=r||e.options.databaseURL;void 0===i&&(e.options.projectId||BI("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jI("Using default host for project ",e.options.projectId),i=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,l=Nx(i,s),u=l.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,i=`http://${a}?ns=${u.namespace}`,l=Nx(i,s),u=l.repoInfo):o=!l.repoInfo.secure;const c=s&&o?new oE(oE.OWNER):new iE(e.name,e.options,t);Xk("Invalid Firebase Database URL",l),LE(l.path)||BI("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let s=fA[t.name];s||(s={},fA[t.name]=s);let i=s[e.toURLString()];return i&&BI("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ax(e,!1,n,r),s[e.toURLString()]=i,i}(u,e,c,new sE(e.name,n));return new gA(h,e)}class gA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=mE(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new qS(e.repoInfo_,(t,n,r,s)=>{cx(e,t,n,r,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>hx(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ka.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new GE(e.repoInfo_,t,(t,n,r,s)=>{cx(e,t,n,r,s)},t=>{hx(e,t)},t=>{!function(e,t){JI(t,(t,n)=>{dx(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t,n){const r=t.toString();return fE[r]||(fE[r]=new ZS(e.stats_,e.server_)),fE[r]}(e.repoInfo_),e.infoData_=new VS,e.infoSyncTree_=new ok({startListening:(t,n,r,s)=>{let i=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(i=uk(e.infoSyncTree_,t._path,o),setTimeout(()=>{s("ok")},0)),i},stopListening:()=>{}}),dx(e,"connected",!1),e.serverSyncTree_=new ok({startListening:(t,n,r,s)=>(e.server_.listen(t,r,n,(n,r)=>{const i=s(n,r);rx(e.eventQueue_,t._path,i)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qx(this._repo,kE())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=fA[t];n&&n[e.key]===e||BI(`Database ${t}(${e.repoInfo_}) has already been deleted.`),_x(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&BI("Cannot call "+e+" on a deleted database.")}}function yA(e,t){UI(e,t)}const _A={".sv":"timestamp"};class vA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}GE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},GE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},CI(Ea.SDK_VERSION),(0,Ea._registerComponent)(new Sa.wA("database",(e,{instanceIdentifier:t})=>mA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ea.registerVersion)("@firebase/database","0.12.1",void 0);const wA=new Ca.Yd("@firebase/database-compat"),bA=function(e){wA.warn("FIREBASE WARNING: "+e)};class TA{constructor(e){this._delegate=e}cancel(e){(0,ka.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ka.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,ka.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ka.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,ka.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ka.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,ka.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ka.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then(()=>n(null),e=>n(e)),r}update(e,t){if((0,ka.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,bA("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ka.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class IA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,ka.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class EA{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,ka.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ka.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ka.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ka.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,ka.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Yk("DataSnapshot.child","path",e,!1),new EA(this._database,this._delegate.child(e))}hasChild(e){return(0,ka.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Yk("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,ka.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,ka.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ka.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new EA(this._database,t)))}hasChildren(){return(0,ka.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ka.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ka.Dv)("DataSnapshot.ref",0,0,arguments.length),new CA(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class SA{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var s;(0,ka.Dv)("Query.on",2,4,arguments.length),(0,ka.Wj)("Query.on","callback",t,!1);const i=SA.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(i.context,new EA(this.database,e),n)};o.userCallback=t,o.context=i.context;const a=null===(s=i.cancel)||void 0===s?void 0:s.bind(i.context);switch(e){case"value":return Kx(this._delegate,o,a),t;case"child_added":return Qx(this._delegate,o,a),t;case"child_removed":return Xx(this._delegate,o,a),t;case"child_changed":return Yx(this._delegate,o,a),t;case"child_moved":return Jx(this._delegate,o,a),t;default:throw new Error((0,ka.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,ka.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ka.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,ka.Wj)("Query.off","callback",t,!0),(0,ka.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,eA(this._delegate,e,r)}else eA(this._delegate,e)}get(){return(e=this._delegate,function(e,t){const n=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const s=FE(e,n);r=r||ek(t,s)});let s=e.syncPointTree_.get(n);s?r=r||ek(s,kE()):(s=new QC,e.syncPointTree_=e.syncPointTree_.set(n,s));const i=null!=r,o=i?new eC(r,!0,!1):null;return oC(JC(s,t,bC(e.pendingWriteTree_,t._path),i?o.getNode():_S.EMPTY_NODE,i).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(n=>{const r=wS(n).withIndex(t._queryParams.getIndex()),s=uk(e.serverSyncTree_,t._path,r);return nx(e.eventQueue_,t._path,s),Promise.resolve(r)},n=>(vx(e,"get for query "+(0,ka.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))))}((e=(0,ka.m9)(e))._repo,e).then(t=>new Vx(t,new qx(e._repo,e._path),e._queryParams.getIndex()))).then(e=>new EA(this.database,e));var e}once(e,t,n,r){(0,ka.Dv)("Query.once",1,4,arguments.length),(0,ka.Wj)("Query.once","callback",t,!0);const s=SA.getCancelAndContextArgs_("Query.once",n,r),i=new ka.BH,o=(e,n)=>{const r=new EA(this.database,e);t&&t.call(s.context,r,n),i.resolve(r)};o.userCallback=t,o.context=s.context;const a=e=>{s.cancel&&s.cancel.call(s.context,e),i.reject(e)};switch(e){case"value":Kx(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":Qx(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":Xx(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":Yx(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":Jx(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,ka.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return i.promise}limitToFirst(e){return(0,ka.Dv)("Query.limitToFirst",1,1,arguments.length),new SA(this.database,pA(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oA(e)}(e)))}limitToLast(e){return(0,ka.Dv)("Query.limitToLast",1,1,arguments.length),new SA(this.database,pA(this._delegate,function(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aA(e)}(e)))}orderByChild(e){return(0,ka.Dv)("Query.orderByChild",1,1,arguments.length),new SA(this.database,pA(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yk("orderByChild","path",e,!1),new lA(e)}(e)))}orderByKey(){return(0,ka.Dv)("Query.orderByKey",0,0,arguments.length),new SA(this.database,pA(this._delegate,new uA))}orderByPriority(){return(0,ka.Dv)("Query.orderByPriority",0,0,arguments.length),new SA(this.database,pA(this._delegate,new cA))}orderByValue(){return(0,ka.Dv)("Query.orderByValue",0,0,arguments.length),new SA(this.database,pA(this._delegate,new hA))}startAt(e=null,t){return(0,ka.Dv)("Query.startAt",0,2,arguments.length),new SA(this.database,pA(this._delegate,function(e=null,t){return Qk("startAt","key",t,!0),new sA(e,t)}(e,t)))}startAfter(e=null,t){return(0,ka.Dv)("Query.startAfter",0,2,arguments.length),new SA(this.database,pA(this._delegate,function(e,t){return Qk("startAfter","key",t,!0),new iA(e,t)}(e,t)))}endAt(e=null,t){return(0,ka.Dv)("Query.endAt",0,2,arguments.length),new SA(this.database,pA(this._delegate,function(e,t){return Qk("endAt","key",t,!0),new nA(e,t)}(e,t)))}endBefore(e=null,t){return(0,ka.Dv)("Query.endBefore",0,2,arguments.length),new SA(this.database,pA(this._delegate,function(e,t){return Qk("endBefore","key",t,!0),new rA(e,t)}(e,t)))}equalTo(e,t){return(0,ka.Dv)("Query.equalTo",1,2,arguments.length),new SA(this.database,pA(this._delegate,function(e,t){return Qk("equalTo","key",t,!0),new dA(e,t)}(e,t)))}toString(){return(0,ka.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ka.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,ka.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof SA))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,ka.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,ka.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,ka.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new CA(this.database,new qx(this._delegate._repo,this._delegate._path))}}class CA extends SA{constructor(e,t){super(e,new Fx(t._repo,t._path,new DS,!1)),this.database=e,this._delegate=t}getKey(){return(0,ka.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,ka.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new CA(this.database,Hx(this._delegate,e))}getParent(){(0,ka.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new CA(this.database,e):null}getRoot(){return(0,ka.Dv)("Reference.root",0,0,arguments.length),new CA(this.database,this._delegate.root)}set(e,t){(0,ka.Dv)("Reference.set",1,2,arguments.length),(0,ka.Wj)("Reference.set","onComplete",t,!0);const n=$x(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,ka.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,bA("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Jk("Reference.update",this._delegate._path),(0,ka.Wj)("Reference.update","onComplete",t,!0);const n=function(e,t){Wk("update",t,e._path,!1);const n=new ka.BH;return function(e,t,n,r){vx(e,"update",{path:t.toString(),value:n});let s=!0;const i=ux(e),o={};if(JI(n,(n,r)=>{s=!1,o[n]=xk(DE(t,n),wS(r),e.serverSyncTree_,i)}),s)jI("update() called with empty data.  Don't do anything."),wx(0,r,"ok",void 0);else{const s=px(e),i=function(e,t,n,r){!function(e,t,n,r){(0,ka.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=dC(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const s=uC.fromObject(n);return pk(e,new XS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,s))}(e.serverSyncTree_,t,o,s);tx(e.eventQueue_,i),e.server_.merge(t.toString(),n,(n,i)=>{const o="ok"===n;o||zI("update at "+t+" failed: "+n);const a=lk(e.serverSyncTree_,s,!o),l=a.length>0?Ix(e,t):t;rx(e.eventQueue_,l,a),wx(0,r,n,i)}),JI(n,n=>{const r=xx(e,DE(t,n));Ix(e,r)}),rx(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,ka.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ka.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(Jk("setWithPriority",e._path),Gk("setWithPriority",t,e._path,!1),Kk("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new ka.BH;return fx(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return n&&r.then(()=>n(null),e=>n(e)),r}remove(e){(0,ka.Dv)("Reference.remove",0,1,arguments.length),(0,ka.Wj)("Reference.remove","onComplete",e,!0);const t=function(e){return Jk("remove",e._path),$x(e,null)}(this._delegate);return e&&t.then(()=>e(null),t=>e(t)),t}transaction(e,t,n){(0,ka.Dv)("Reference.transaction",1,3,arguments.length),(0,ka.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,ka.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,ka.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=function(e,t,n){var r;if(e=(0,ka.m9)(e),Jk("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const s=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,i=new ka.BH,o=Kx(e,()=>{});return function(t,n,r,s,o,a){vx(t,"transaction on "+n);const l={path:n,update:r,onComplete:(t,n,r)=>{let s=null;t?i.reject(t):(s=new Vx(r,new qx(e._repo,e._path),cS),i.resolve(new vA(n,s)))},status:null,order:OI(),applyLocally:a,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=bx(t,n,void 0);l.currentInputSnapshot=u;const c=l.update(u.val());if(void 0===c)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Zk("transaction failed: Data returned ",c,l.path),l.status=0;const e=Pk(t.transactionQueueTree_,n),r=Ok(e)||[];let s;r.push(l),Dk(e,r),"object"==typeof c&&null!==c&&(0,ka.r3)(c,".priority")?(s=(0,ka.DV)(c,".priority"),(0,ka.hu)($k(s),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):s=(dk(t.serverSyncTree_,n)||_S.EMPTY_NODE).getPriority().val();const i=ux(t),o=wS(c,s),a=Ak(o,u,i);l.currentOutputSnapshotRaw=o,l.currentOutputSnapshotResolved=a,l.currentWriteId=px(t);const h=ak(t.serverSyncTree_,n,a,l.currentWriteId,l.applyLocally);rx(t.eventQueue_,n,h),Tx(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,o,s),i.promise}(this._delegate,e,{applyLocally:n}).then(e=>new IA(e.committed,new EA(this.database,e.snapshot)));return t&&r.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),r}setPriority(e,t){(0,ka.Dv)("Reference.setPriority",1,2,arguments.length),(0,ka.Wj)("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=(0,ka.m9)(e),Jk("setPriority",e._path),Kk("setPriority",t,!1);const n=new ka.BH;return fx(e._repo,DE(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,ka.Dv)("Reference.push",0,2,arguments.length),(0,ka.Wj)("Reference.push","onComplete",t,!0);const n=function(e,t){e=(0,ka.m9)(e),Jk("push",e._path),Gk("push",t,e._path,!0);const n=lx(e._repo),r=ES(n),s=Hx(e,r),i=Hx(e,r);let o;return o=null!=t?$x(i,t).then(()=>i):Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}(this._delegate,e),r=n.then(e=>new CA(this.database,e));t&&r.then(()=>t(null),e=>t(e));const s=new CA(this.database,n);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Jk("Reference.onDisconnect",this._delegate._path),new TA(new Lx(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}let kA=(()=>{class e{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){!function(e,t,n,r={}){(e=(0,ka.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&BI("Cannot call useEmulator() after instance has already been initialized.");const s=e._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&BI('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new oE(oE.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:(0,ka.Sg)(r.mockUserToken,e.app.options.projectId);i=new oE(t)}!function(e,t,n,r){e.repoInfo_=new cE(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(s,t,n,i)}(this._delegate,e,t,n)}ref(e){if((0,ka.Dv)("database.ref",0,1,arguments.length),e instanceof CA){const t=zx(this._delegate,e.toString());return new CA(this,t)}{const t=Bx(this._delegate,e);return new CA(this,t)}}refFromURL(e){(0,ka.Dv)("database.refFromURL",1,1,arguments.length);const t=zx(this._delegate,e);return new CA(this,t)}goOffline(){return(0,ka.Dv)("database.goOffline",0,0,arguments.length),function(e){(e=(0,ka.m9)(e))._checkNotDeleted("goOffline"),_x(e._repo)}(this._delegate)}goOnline(){return(0,ka.Dv)("database.goOnline",0,0,arguments.length),function(e){var t;(e=(0,ka.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(ox)}(this._delegate)}}return e.ServerValue={TIMESTAMP:_A,increment:e=>function(e){return{".sv":{increment:e}}}(e)},e})();var xA=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:s,nodeAdmin:i=!1}){CI(n);const o=new Sa.zt("auth-internal",new Sa.H0("database-standalone"));return o.setComponent(new Sa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new kA(mA(e,o,void 0,t,i),e),namespace:s}}});const AA=kA.ServerValue;function NA(e){return null==e}function RA(e){return"function"==typeof e.set}function PA(e,t){return RA(t)?t:e.ref(t)}function OA(e,t){if("string"==typeof e)return t.stringCase();if(RA(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function DA(e,t,n="on",r=da.z){return new gr.y(s=>{let i=null;return i=e[n](t,(e,t)=>{r.schedule(()=>{s.next({snapshot:e,prevKey:t})}),"once"===n&&r.schedule(()=>s.complete())},e=>{r.schedule(()=>s.error(e))}),"on"===n?{unsubscribe(){null!=i&&e.off(t,i)}}:{unsubscribe(){}}}).pipe((0,xr.U)(e=>{const{snapshot:n,prevKey:r}=e;let s=null;return n.exists()&&(s=n.key),{type:t,payload:n,prevKey:r,key:s}}),(0,wI.B)())}function LA(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function FA(e,t){const{payload:n,prevKey:r,key:s}=t,i=LA(e,s),o=function(e,t){if(NA(t))return 0;{const n=LA(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case"child_added":if(i>-1){const s=e[i-1];(s&&s.key||null)!==r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(o,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===s?t:e);case"child_moved":if(i>-1){const t=e.splice(i,1)[0];return(e=e.slice()).splice(o,0,t),e}return e;default:return e}}function MA(e){return(NA(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function UA(e,t,n){return function(e,t,n){return DA(e,"value","once",n).pipe(Nr(r=>{const s=[(0,or.of)(r)];return t.forEach(t=>s.push(DA(e,t,"on",n))),(0,qT.T)(...s).pipe(Ur(FA,[]))}),ya())}(e,t=MA(t),n)}function jA(e,t,n){const r=(t=MA(t)).map(t=>DA(e,t,"on",n));return(0,qT.T)(...r)}function qA(e,t){return function(n,r){return OA(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function VA(e){return function(t){return t?OA(t,{stringCase:()=>e.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):e.remove()}}function BA(e,t){return function(){return DA(e,"value","on",t)}}!function(e){e.INTERNAL.registerComponent(new Sa.wA("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new kA(r,n)},"PUBLIC").setServiceProps({Reference:CA,Query:SA,Database:kA,DataSnapshot:EA,enableLogging:yA,INTERNAL:xA,ServerValue:AA}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.1")}(Ta.Z);const zA=new r.OlP("angularfire2.realtimeDatabaseURL"),HA=new r.OlP("angularfire2.database.use-emulator");let $A=(()=>{class e{constructor(e,t,n,r,s,i,o,a,l,u,c,h,d,p){this.schedulers=i;const f=o,m=(0,ba.on)(e,s,t);a&&nI(m,s,l,c,h,d,u,p),this.database=(0,pa.cc)(`${m.name}.database.${n}`,"AngularFireDatabase",m.name,()=>{const e=s.runOutsideAngular(()=>m.database(n||void 0));return f&&e.useEmulator(...f),e},[f])}list(e,t){const n=this.schedulers.ngZone.runOutsideAngular(()=>PA(this.database,e));let r=n;return t&&(r=t(n)),function(e,t){const n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:qA(r,"update"),set:qA(r,"set"),push:e=>r.push(e),remove:VA(r),snapshotChanges:t=>UA(e,t,n).pipe(pa.iC),stateChanges:t=>jA(e,t,n).pipe(pa.iC),auditTrail:t=>function(e,t,n){return function(e,t,n){return function(e,t){return DA(e,"value","on",t).pipe((0,xr.U)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e,n).pipe(function(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new bI(e,n))}}(t),(0,xr.U)(([e,t])=>{const n=e.lastKeyToLoad,r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(r=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new II(r))),(0,xr.U)(e=>e.actions));var r}(e,jA(e,t).pipe(Ur((e,t)=>[...e,t],[])),n)}(e,t,n).pipe(pa.iC),valueChanges:(t,r)=>UA(e,t,n).pipe((0,xr.U)(e=>e.map(e=>r&&r.idField?Object.assign(Object.assign({},e.payload.val()),{[r.idField]:e.key}):e.payload.val())),pa.iC)}}(r,this)}object(e){return t=this.schedulers.ngZone.runOutsideAngular(()=>PA(this.database,e)),n=this,{query:t,snapshotChanges:()=>BA(t,n.schedulers.outsideAngular)().pipe(pa.iC),update:e=>t.ref.update(e),set:e=>t.ref.set(e),remove:()=>t.ref.remove(),valueChanges:()=>BA(t,n.schedulers.outsideAngular)().pipe(pa.iC,(0,xr.U)(e=>e.payload.exists()?e.payload.val():null))};var t,n}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ba.Dh),r.LFG(ba.xv,8),r.LFG(zA,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pa.HU),r.LFG(HA,8),r.LFG(rI,8),r.LFG(QT,8),r.LFG(YT,8),r.LFG(JT,8),r.LFG(XT,8),r.LFG(eI,8),r.LFG(tI,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),GA=(()=>{class e{constructor(){KT.Z.registerVersion("angularfire",pa.q4.full,"rtdb-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[$A]}),e})();class ZA{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new WA(e,this.dueTime,this.scheduler))}}class WA extends dr.L{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(KA,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function KA(e){e.debouncedNext()}var QA=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}({});const YA="firebasestorage.googleapis.com";class JA extends ka.ZR{constructor(e,t){super(XA(e),`Firebase Storage: ${t} (${XA(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,JA.prototype)}_codeEquals(e){return XA(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function XA(e){return"storage/"+e}function eN(){return new JA("unknown","An unknown error occurred, please check the error payload for server response.")}function tN(){return new JA("canceled","User canceled the upload/download.")}function nN(){return new JA("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rN(){return new JA("no-download-url","The given file does not have any download URLs.")}function sN(e){return new JA("invalid-argument",e)}function iN(){return new JA("app-deleted","The Firebase app was deleted.")}function oN(e){return new JA("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aN(e,t){return new JA("invalid-format","String does not match format '"+e+"': "+t)}function lN(e){throw new JA("internal-error","Internal error: "+e)}class uN{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=QA.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=QA.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=QA.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw lN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lN("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponseText(){if(!this.sent_)throw lN("cannot .getResponseText() before sending");return this.xhr_.responseText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class cN{createConnection(){return new uN}}class hN{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=hN.makeFromUrl(e,t)}catch(r){return new hN(e,"")}if(""===n.path)return n;throw new JA("invalid-default-bucket","Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===YA?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){let e=r[t.indices.path];e||(e=""),n=new hN(r[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new JA("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class dN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function pN(e){return"string"==typeof e||e instanceof String}function fN(e){return mN()&&e instanceof Blob}function mN(){return"undefined"!=typeof Blob}function gN(e,t,n,r){if(r<t)throw sN(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw sN(`Invalid value for '${e}'. Expected ${n} or less.`)}function yN(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function _N(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}class vN{constructor(e,t,n,r,s,i,o,a,l,u,c){this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=o,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=l,this.pool_=c,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=this;function t(t,n){const r=e.resolve_,s=e.reject_,i=n.connection;if(n.wasSuccessCode)try{const t=e.callback_(i,i.getResponseText());void 0===t?r():r(t)}catch(o){s(o)}else if(null!==i){const t=eN();t.serverResponse=i.getResponseText(),s(e.errorCallback_?e.errorCallback_(i,t):t)}else s(n.canceled?e.appDelete_?iN():tN():new JA("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new wN(!1,null,!0)):this.backoffId_=function(t,n,r){let s=1,i=null,o=!1,a=0;function l(){return 2===a}let u=!1;function c(...e){u||(u=!0,n.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,function(t,n){if(n)return void t(!1,new wN(!1,null,!0));const r=e.pool_.createConnection();function s(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)}e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(s),r.send(e.url_,e.method_,e.body_,e.headers_).then(()=>{null!==e.progressCallback_&&r.removeUploadProgressListener(s),e.pendingConnection_=null;const n=r.getErrorCode()===QA.NO_ERROR,i=r.getStatus();if(!n||e.isRetryStatusCode_(i)){const e=r.getErrorCode()===QA.ABORT;return void t(!1,new wN(!1,null,e))}const o=-1!==e.successCodes_.indexOf(i);t(!0,new wN(o,r))})}(d,l())},t)}function d(e,...t){if(u)return;if(e)return void c.call(null,e,...t);if(l()||o)return void c.call(null,e,...t);let n;s<64&&(s*=2),1===a?(a=2,n=0):n=1e3*(s+Math.random()),h(n)}let p=!1;function f(e){p||(p=!0,u||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),setTimeout(()=>{o=!0,f(!0)},r),f}(0,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class wN{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function bN(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function TN(...e){const t=bN();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(mN())return new Blob(e);throw new JA("unsupported-environment","This browser doesn't seem to support creating Blobs")}const IN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class EN{constructor(e,t){this.data=e,this.contentType=t||null}}function SN(e,t){switch(e){case IN.RAW:return new EN(CN(t));case IN.BASE64:case IN.BASE64URL:return new EN(kN(e,t));case IN.DATA_URL:return new EN(function(e){const t=new xN(e);return t.base64?kN(IN.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw aN(IN.DATA_URL,"Malformed data URL.")}return CN(t)}(t.rest)}(t),new xN(t).contentType)}throw eN()}function CN(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function kN(e,t){switch(e){case IN.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw aN(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case IN.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw aN(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=atob(t)}catch(s){throw aN(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw aN(IN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;var r,s;null!=n&&(this.base64=(r=n).length>=(s=";base64").length&&r.substring(r.length-s.length)===s,this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}}class AN{constructor(e,t){let n=0,r="";fN(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(fN(this.data_)){const i=(r=e,s=t,(n=this.data_).webkitSlice?n.webkitSlice(r,s):n.mozSlice?n.mozSlice(r,s):n.slice?n.slice(r,s):null);return null===i?null:new AN(i)}var n,r,s;{const n=new Uint8Array(this.data_.buffer,e,t-e);return new AN(n,!0)}}static getBlob(...e){if(mN()){const t=e.map(e=>e instanceof AN?e.data_:e);return new AN(TN.apply(null,t))}{const t=e.map(e=>pN(e)?SN(IN.RAW,e).data:e.data_);let n=0;t.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let s=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)r[s++]=e[t]}),new AN(r,!0)}}uploadData(){return this.data_}}function NN(e){let t;try{t=JSON.parse(e)}catch(r){return null}return"object"!=typeof(n=t)||Array.isArray(n)?null:t;var n}function RN(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function PN(e,t){return t}class ON{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||PN}}let DN=null;function LN(){if(DN)return DN;const e=[];e.push(new ON("bucket")),e.push(new ON("generation")),e.push(new ON("metageneration")),e.push(new ON("name","fullPath",!0));const t=new ON("name");t.xform=function(e,t){return function(e){return!pN(e)||e.length<2?e:RN(e)}(t)},e.push(t);const n=new ON("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ON("timeCreated")),e.push(new ON("updated")),e.push(new ON("md5Hash",null,!0)),e.push(new ON("cacheControl",null,!0)),e.push(new ON("contentDisposition",null,!0)),e.push(new ON("contentEncoding",null,!0)),e.push(new ON("contentLanguage",null,!0)),e.push(new ON("contentType",null,!0)),e.push(new ON("metadata","customMetadata",!0)),DN=e,DN}function FN(e,t,n){const r=NN(t);return null===r?null:function(e,t,n){const r={type:"file"},s=n.length;for(let i=0;i<s;i++){const e=n[i];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=new hN(e.bucket,e.fullPath);return t._makeStorageReference(n)}})}(r,e),r}(e,r,n)}function MN(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const r=t[s];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class UN{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function jN(e){if(!e)throw eN()}function qN(e,t){return function(n,r){const s=FN(e,r,t);return jN(null!==s),s}}function VN(e){return function(t,n){let r;return r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new JA("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new JA("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?new JA("quota-exceeded","Quota for bucket '"+e.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===t.getStatus()?new JA("unauthorized","User does not have permission to access '"+e.path+"'."):n,r.serverResponse=n.serverResponse,r}}function BN(e){const t=VN(e);return function(n,r){let s=t(n,r);return 404===n.getStatus()&&(s=new JA("object-not-found","Object '"+e.path+"' does not exist.")),s.serverResponse=r.serverResponse,s}}function zN(e,t,n){const r=yN(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new UN(r,"GET",qN(e,n),s);return i.errorHandler=BN(t),i}function HN(e,t,n,r,s){const i={};i.prefix=t.isRoot?"":t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=yN(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new UN(o,"GET",function(e,t){return function(n,r){const s=function(e,t,n){const r=NN(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(const s of n.prefixes){const n=s.replace(/\/$/,""),i=e._makeStorageReference(new hN(t,n));r.prefixes.push(i)}if(n.items)for(const s of n.items){const n=e._makeStorageReference(new hN(t,s.name));r.items.push(n)}return r}(e,t,r)}(e,t,r);return jN(null!==s),s}}(e,t.bucket),a);return l.urlParams=i,l.errorHandler=VN(t),l}function $N(e,t,n){const r=yN(t.fullServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,i=new UN(r,"GET",function(e,t){return function(n,r){const s=FN(e,r,t);return jN(null!==s),function(e,t,n,r){const s=NN(t);if(null===s)return null;if(!pN(s.downloadTokens))return null;const i=s.downloadTokens;if(0===i.length)return null;const o=encodeURIComponent;return i.split(",").map(t=>{const s=e.fullPath;return yN("/b/"+o(e.bucket)+"/o/"+o(s),n,r)+_N({alt:"media",token:t})})[0]}(s,r,e.host,e._protocol)}}(e,n),s);return i.errorHandler=BN(t),i}function GN(e,t,n,r){const s=yN(t.fullServerUrl(),e.host,e._protocol),i=MN(n,r),o=e.maxOperationRetryTime,a=new UN(s,"PATCH",qN(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=i,a.errorHandler=BN(t),a}function ZN(e,t){const n=yN(t.fullServerUrl(),e.host,e._protocol),r=new UN(n,"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=BN(t),r}function WN(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return t&&t.type()||"application/octet-stream"}(0,t)),r}class KN{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function QN(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){jN(!1)}return jN(!!n&&-1!==(t||["active"]).indexOf(n)),n}const YN=262144,JN={STATE_CHANGED:"state_changed"},XN={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function eR(e){switch(e){case"running":case"pausing":case"canceling":return XN.RUNNING;case"paused":return XN.PAUSED;case"success":return XN.SUCCESS;case"canceled":return XN.CANCELED;case"error":default:return XN.ERROR}}class tR{constructor(e,t,n){if("function"==typeof e||null!=t||null!=n)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function nR(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class rR{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=LN(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{this._request=void 0,this._chunkMultiplier=1,e._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=e,this._transition("error"))},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals("canceled")?this.completeTransitions_():(this._error=e,this._transition("error"))},this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o=WN(t,r,s),a={name:o.fullPath},l=yN(i,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=MN(o,n),h=new UN(l,"POST",function(e){let t;QN(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){jN(!1)}return jN(pN(t)),t},e.maxUploadRetryTime);return h.urlParams=a,h.headers=u,h.body=c,h.errorHandler=VN(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,n)=>{const r=function(e,t,n,r){const s=new UN(n,"POST",function(e){const t=QN(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){jN(!1)}n||jN(!1);const s=Number(n);return jN(!isNaN(s)),new KN(s,r.size(),"final"===t)},e.maxUploadRetryTime);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=VN(t),s}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,t,n);this._request=s,s.getPromise().then(e=>{e=e,this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=YN*this._chunkMultiplier,t=new KN(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((r,s)=>{let i;try{i=function(e,t,n,r,s,i,o,a){const l=new KN(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new JA("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");const u=l.total-l.current;let c=u;s>0&&(c=Math.min(c,s));const h=l.current,d={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},p=r.slice(h,h+c);if(null===p)throw nN();const f=new UN(n,"POST",function(e,n){const s=QN(e,["active","final"]),o=l.current+c,a=r.size();let u;return u="final"===s?qN(t,i)(e,n):null,new KN(o,a,"final"===s,u)},t.maxUploadRetryTime);return f.headers=d,f.body=p.uploadData(),f.progressCallback=a||null,f.errorHandler=VN(e),f}(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(a){return this._error=a,void this._transition("error")}const o=this._ref.storage._makeRequest(i,r,s);this._request=o,o.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){YN*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const n=zN(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const n=function(e,t,n,r,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=WN(t,r,s),u=MN(l,n),c=AN.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===c)throw nN();const h={name:l.fullPath},d=yN(i,e.host,e._protocol),p=e.maxUploadRetryTime,f=new UN(d,"POST",qN(e,n),p);return f.urlParams=h,f.headers=o,f.body=c.uploadData(),f.errorHandler=VN(t),f}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,e,t);this._request=r,r.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tN(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=eR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const s=new tR(t||void 0,n||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(eR(this._state)){case XN.SUCCESS:nR(this._resolve.bind(null,this.snapshot))();break;case XN.CANCELED:case XN.ERROR:nR(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(eR(this._state)){case XN.RUNNING:case XN.PAUSED:e.next&&nR(e.next.bind(e,this.snapshot))();break;case XN.SUCCESS:e.complete&&nR(e.complete.bind(e))();break;case XN.CANCELED:case XN.ERROR:e.error&&nR(e.error.bind(e,this._error))();break;default:e.error&&nR(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class sR{constructor(e,t){this._service=e,this._location=t instanceof hN?t:hN.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new sR(e,t)}get root(){const e=new hN(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RN(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new hN(this._location.bucket,e);return new sR(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw oN(e)}}function iR(e,t,n){return oR.apply(this,arguments)}function oR(){return(oR=(0,Ia.Z)(function*(e,t,n){const r={pageToken:n},s=yield aR(e,r);t.prefixes.push(...s.prefixes),t.items.push(...s.items),null!=s.nextPageToken&&(yield iR(e,t,s.nextPageToken))})).apply(this,arguments)}function aR(e,t){return lR.apply(this,arguments)}function lR(){return(lR=(0,Ia.Z)(function*(e,t){null!=t&&"number"==typeof t.maxResults&&gN("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=HN(e.storage,e._location,"/",n.pageToken,n.maxResults);return(yield e.storage.makeRequestWithTokens(r)).getPromise()})).apply(this,arguments)}function uR(){return(uR=(0,Ia.Z)(function*(e){e._throwIfRoot("getMetadata");const t=zN(e.storage,e._location,LN());return(yield e.storage.makeRequestWithTokens(t)).getPromise()})).apply(this,arguments)}function cR(){return(cR=(0,Ia.Z)(function*(e,t){e._throwIfRoot("updateMetadata");const n=GN(e.storage,e._location,t,LN());return(yield e.storage.makeRequestWithTokens(n)).getPromise()})).apply(this,arguments)}function hR(){return(hR=(0,Ia.Z)(function*(e){e._throwIfRoot("getDownloadURL");const t=$N(e.storage,e._location,LN());return(yield e.storage.makeRequestWithTokens(t)).getPromise().then(e=>{if(null===e)throw rN();return e})})).apply(this,arguments)}function dR(){return(dR=(0,Ia.Z)(function*(e){e._throwIfRoot("deleteObject");const t=ZN(e.storage,e._location);return(yield e.storage.makeRequestWithTokens(t)).getPromise()})).apply(this,arguments)}function pR(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new hN(e._location.bucket,n);return new sR(e.storage,r)}function fR(e,t){if(e instanceof yR){const n=e;if(null==n._bucket)throw new JA("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");const r=new sR(n,n._bucket);return null!=t?fR(r,t):r}return void 0!==t?pR(e,t):e}function mR(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof yR)return new sR(e,t);throw sN("To use ref(service, url), the first argument must be a Storage instance.")}return fR(e,t)}function gR(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:hN.makeFromBucketSpec(n,e)}class yR{constructor(e,t,n,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=YA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=s?hN.makeFromBucketSpec(s,this._host):gR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?hN.makeFromBucketSpec(this._url,e):gR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ia.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ia.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sR(this,e)}_makeRequest(e,t,n){if(this._deleted)return new dN(iN());{const r=function(e,t,n,r,s,i){const o=_N(e.urlParams),a=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(l,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new vN(a,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then(()=>this._requests.delete(r),()=>this._requests.delete(r)),r}}makeRequestWithTokens(e){var t=this;return(0,Ia.Z)(function*(){const[n,r]=yield Promise.all([t._getAuthToken(),t._getAppCheckToken()]);return t._makeRequest(e,n,r)})()}}function _R(e,t){return mR(e=(0,ka.m9)(e),t)}(0,Ea._registerComponent)(new Sa.wA("storage",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new yR(n,r,s,new cN,t,Ea.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Ea.registerVersion)("@firebase/storage","0.8.3");class vR{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class wR{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new vR(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(t=>{if(e)return e(new vR(t,this,this._ref))},t)}on(e,t,n,r){let s;return t&&(s="function"==typeof t?e=>t(new vR(e,this,this._ref)):{next:t.next?e=>t.next(new vR(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,n||void 0,r||void 0)}}class bR{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new TR(e,this._service))}get items(){return this._delegate.items.map(e=>new TR(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class TR{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return pR(e,t)}(this._delegate,e);return new TR(t,this.storage)}get root(){return new TR(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new TR(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new wR(function(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new rR(e,new AN(t),n)}(e=(0,ka.m9)(e),t,n)}(this._delegate,e,t),this)}putString(e,t=IN.RAW,n){this._throwIfRoot("putString");const r=SN(t,e),s=Object.assign({},n);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new wR(new rR(this._delegate,new AN(r.data,!0),s),this)}listAll(){return function(e){return function(e){const t={prefixes:[],items:[]};return iR(e,t).then(()=>t)}(e=(0,ka.m9)(e))}(this._delegate).then(e=>new bR(e,this.storage))}list(e){return function(e,t){return aR(e=(0,ka.m9)(e),t)}(this._delegate,e||void 0).then(e=>new bR(e,this.storage))}getMetadata(){return function(e){return function(e){return uR.apply(this,arguments)}(e=(0,ka.m9)(e))}(this._delegate)}updateMetadata(e){return function(e,t){return function(e,t){return cR.apply(this,arguments)}(e=(0,ka.m9)(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return function(e){return hR.apply(this,arguments)}(e=(0,ka.m9)(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return function(e){return dR.apply(this,arguments)}(e=(0,ka.m9)(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw oN(e)}}class IR{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ER(e))throw sN("ref() expected a child path but got a URL, use refFromURL instead.");return new TR(_R(this._delegate,e),this)}refFromURL(e){if(!ER(e))throw sN("refFromURL() expected a full URL but got a child path, use ref() instead.");try{hN.makeFromUrl(e,this._delegate.host)}catch(t){throw sN("refFromUrl() expected a valid full URL but got an invalid one.")}return new TR(_R(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){!function(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"==typeof s?s:(0,ka.Sg)(s,e.app.options.projectId))}(e,t,n,r)}(this._delegate,e,t,n)}}function ER(e){return/^[A-Za-z]+:\/\//.test(e)}function SR(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:t});return new IR(n,r)}function CR(e){const t=function(e){return new gr.y(t=>{const n=e=>t.next(e);n(e.snapshot);const r=e.on("state_changed",n);return e.then(e=>{n(e),t.complete()},r=>{n(e.snapshot),(e=>{t.error(e)})(r)}),function(){r()}}).pipe(function(e,t=da.P){return n=>n.lift(new ZA(e,t))}(0))}(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,xr.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function kR(e){return{getDownloadURL:()=>(0,or.of)(void 0).pipe(pa.fc,Nr(()=>e.getDownloadURL()),pa.iC),getMetadata:()=>(0,or.of)(void 0).pipe(pa.fc,Nr(()=>e.getMetadata()),pa.iC),delete:()=>(0,ir.D)(e.delete()),child:t=>kR(e.child(t)),updateMetadata:t=>(0,ir.D)(e.updateMetadata(t)),put:(t,n)=>CR(e.put(t,n)),putString:(t,n,r)=>CR(e.putString(t,n,r)),listAll:()=>(0,ir.D)(e.listAll())}}!function(e){const t={TaskState:XN,TaskEvent:JN,StringFormat:IN,Storage:IR,Reference:TR};e.INTERNAL.registerComponent(new Sa.wA("storage-compat",SR,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.3")}(Ta.Z);const xR=new r.OlP("angularfire2.storageBucket"),AR=new r.OlP("angularfire2.storage.maxUploadRetryTime"),NR=new r.OlP("angularfire2.storage.maxOperationRetryTime"),RR=new r.OlP("angularfire2.storage.use-emulator");let PR=(()=>{class e{constructor(e,t,n,r,s,i,o,a,l){const u=(0,ba.on)(e,s,t);this.storage=(0,pa.cc)(`${u.name}.storage.${n}`,"AngularFireStorage",u.name,()=>{const e=s.runOutsideAngular(()=>u.storage(n||void 0)),t=l;return t&&e.useEmulator(...t),o&&e.setMaxUploadRetryTime(o),a&&e.setMaxOperationRetryTime(a),e},[o,a])}ref(e){return kR(this.storage.ref(e))}refFromURL(e){return kR(this.storage.refFromURL(e))}upload(e,t,n){return kR(this.storage.ref(e)).put(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ba.Dh),r.LFG(ba.xv,8),r.LFG(xR,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(pa.HU),r.LFG(AR,8),r.LFG(NR,8),r.LFG(RR,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),OR=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),DR=(()=>{class e{constructor(){KT.Z.registerVersion("angularfire",pa.q4.full,"gcs-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[PR],imports:[OR]}),e})();const LR=["toast-component",""];function FR(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(e),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function MR(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.hij("[",e.duplicatesCount+1,"]")}}function UR(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,MR,2,1,"ng-container",4),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.titleClass),r.uIk("aria-label",e.title),r.xp6(1),r.hij(" ",e.title," "),r.xp6(1),r.Q6J("ngIf",e.duplicatesCount)}}function jR(e,t){if(1&e&&r._UZ(0,"div",7),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.Q6J("innerHTML",e.message,r.oJD)}}function qR(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.uIk("aria-label",e.message),r.xp6(1),r.hij(" ",e.message," ")}}function VR(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Udp("width",e.width+"%")}}function BR(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",5),r.NdJ("click",function(){return r.CHM(e),r.oxw().remove()}),r.TgZ(1,"span",6),r._uU(2,"\xd7"),r.qZA(),r.qZA()}}function zR(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.hij("[",e.duplicatesCount+1,"]")}}function HR(e,t){if(1&e&&(r.TgZ(0,"div"),r._uU(1),r.YNc(2,zR,2,1,"ng-container",4),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.titleClass),r.uIk("aria-label",e.title),r.xp6(1),r.hij(" ",e.title," "),r.xp6(1),r.Q6J("ngIf",e.duplicatesCount)}}function $R(e,t){if(1&e&&r._UZ(0,"div",7),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.Q6J("innerHTML",e.message,r.oJD)}}function GR(e,t){if(1&e&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&e){const e=r.oxw();r.Tol(e.options.messageClass),r.uIk("aria-label",e.message),r.xp6(1),r.hij(" ",e.message," ")}}function ZR(e,t){if(1&e&&(r.TgZ(0,"div"),r._UZ(1,"div",9),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Udp("width",e.width+"%")}}class WR{constructor(e,t,n,r,s,i){this.toastId=e,this.config=t,this.message=n,this.title=r,this.toastType=s,this.toastRef=i,this._onTap=new ar.xQ,this._onAction=new ar.xQ,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const KR={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},QR=new r.OlP("ToastConfig");class YR{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class JR extends class{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,n){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=n}attachComponentPortal(e,t){const n=this._componentFactoryResolver.resolveComponentFactory(e.component);let r;return r=n.create(e.injector),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.detachView(r.hostView),r.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(r),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(r)),r}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let XR=(()=>{class e{constructor(e){this._document=e}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e=this._document.createElement("div");e.classList.add("overlay-container"),this._document.body.appendChild(e),this._containerElement=e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})();class eP{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let tP=(()=>{class e{constructor(e,t,n,r){this._overlayContainer=e,this._componentFactoryResolver=t,this._appRef=n,this._document=r,this._paneElements=new Map}create(e,t){return this._createOverlayRef(this.getPaneElement(e,t))}getPaneElement(e="",t){return this._paneElements.get(t)||this._paneElements.set(t,{}),this._paneElements.get(t)[e]||(this._paneElements.get(t)[e]=this._createPaneElement(e,t)),this._paneElements.get(t)[e]}_createPaneElement(e,t){const n=this._document.createElement("div");return n.id="toast-container",n.classList.add(e),n.classList.add("toast-container"),t?t.getContainerElement().appendChild(n):this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalHost(e){return new JR(e,this._componentFactoryResolver,this._appRef)}_createOverlayRef(e){return new eP(this._createPortalHost(e))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(XR),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(XR),r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(o))},token:e,providedIn:"root"}),e})();class nP{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new ar.xQ,this._activate=new ar.xQ,this._manualClose=new ar.xQ,this._resetTimeout=new ar.xQ,this._countDuplicate=new ar.xQ}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class rP{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,n){return e===WR?this._toastPackage:this._parentInjector.get(e,t,n)}}let sP=(()=>{class e{constructor(e,t,n,r,s){this.overlay=t,this._injector=n,this.sanitizer=r,this.ngZone=s,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},e.default),e.config),e.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},e.default.iconClasses),e.config.iconClasses))}show(e,t,n={},r=""){return this._preBuildNotification(r,e,t,this.applyConfig(n))}success(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",e,t,this.applyConfig(n))}error(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",e,t,this.applyConfig(n))}info(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",e,t,this.applyConfig(n))}warning(e,t,n={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",e,t,this.applyConfig(n))}clear(e){for(const t of this.toasts)if(void 0!==e){if(t.toastId===e)return void t.toastRef.manualClose()}else t.toastRef.manualClose()}remove(e){const t=this._findToast(e);if(!t)return!1;if(t.activeToast.toastRef.close(),this.toasts.splice(t.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length)return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const e=this.toasts[this.currentlyActive].toastRef;e.isInactive()||(this.currentlyActive=this.currentlyActive+1,e.activate())}return!0}findDuplicate(e="",t="",n,r){const{includeTitleDuplicates:s}=this.toastrConfig;for(const i of this.toasts){const o=s&&i.title===e;if((!s||o)&&i.message===t)return i.toastRef.onDuplicate(n,r),i}return null}applyConfig(e={}){return Object.assign(Object.assign({},this.toastrConfig),e)}_findToast(e){for(let t=0;t<this.toasts.length;t++)if(this.toasts[t].toastId===e)return{index:t,activeToast:this.toasts[t]};return null}_preBuildNotification(e,t,n,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(e,t,n,r)):this._buildNotification(e,t,n,r)}_buildNotification(e,t,n,s){if(!s.toastComponent)throw new Error("toastComponent required");const i=this.findDuplicate(n,t,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&n||t)&&this.toastrConfig.preventDuplicates&&null!==i)return i;this.previousToastMessage=t;let o=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(o=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const a=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=t;t&&s.enableHtml&&(l=this.sanitizer.sanitize(r.q3G.HTML,t));const u=new nP(a),c=new WR(this.index,s,l,n,e,u),h=new rP(c,this._injector),d=new YR(s.toastComponent,h),p=a.attach(d,this.toastrConfig.newestOnTop);u.componentInstance=p.instance;const f={toastId:this.index,title:n||"",message:t||"",toastRef:u,onShown:u.afterActivate(),onHidden:u.afterClosed(),onTap:c.onTap(),onAction:c.onAction(),portal:p};return o||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{f.toastRef.activate()})),this.toasts.push(f),f}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(QR),r.LFG(tP),r.LFG(r.zs3),r.LFG(de),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(QR),r.LFG(tP),r.LFG(r.gxx),r.LFG(de),r.LFG(r.R0b))},token:e,providedIn:"root"}),e})(),iP=(()=>{class e{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.ngZone=n,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state.value&&(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(e),t)):this.timeout=setTimeout(()=>e(),t)}outsideInterval(e,t){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(e),t)):this.intervalId=setInterval(()=>e(),t)}runInsideAngular(e){this.ngZone?this.ngZone.run(()=>e()):e()}}var t;return e.\u0275fac=function(t){return new(t||e)(r.Y36(sP),r.Y36(WR),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(r.d8E("@flyInOut",t.state),r.Tol(t.toastClasses),r.Udp("display",t.displayStyle))},attrs:LR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(r.YNc(0,FR,3,0,"button",0),r.YNc(1,UR,3,5,"div",1),r.YNc(2,jR,1,3,"div",2),r.YNc(3,qR,2,4,"div",3),r.YNc(4,VR,2,2,"div",4)),2&e&&(r.Q6J("ngIf",t.options.closeButton),r.xp6(1),r.Q6J("ngIf",t.title),r.xp6(1),r.Q6J("ngIf",t.message&&t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.message&&!t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.options.progressBar))},directives:[R],encapsulation:2,data:{animation:[(t=[Ie("inactive",Te({opacity:0})),Ie("active",Te({opacity:1})),Ie("removed",Te({opacity:0})),Ee("inactive => active",we("{{ easeTime }}ms {{ easing }}")),Ee("active => removed",we("{{ easeTime }}ms {{ easing }}"))],{type:7,name:"flyInOut",definitions:t,options:{}})]}}),e})();const oP=Object.assign(Object.assign({},KR),{toastComponent:iP});let aP=(()=>{class e{static forRoot(t={}){return{ngModule:e,providers:[{provide:QR,useValue:{default:oP,config:t}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[D]]}),e})(),lP=(()=>{class e{constructor(e,t,n){this.toastrService=e,this.toastPackage=t,this.appRef=n,this.width=-1,this.toastClasses="",this.state="inactive",this.message=t.message,this.title=t.title,this.options=t.config,this.originalTimeout=t.config.timeOut,this.toastClasses=`${t.toastType} ${t.config.toastClass}`,this.sub=t.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=t.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=t.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=t.toastRef.countDuplicate().subscribe(e=>{this.duplicatesCount=e})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const e=(new Date).getTime();this.width=(this.hideTime-e)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0!==this.options.disableTimeOut&&"extendedTimeOut"!==this.options.disableTimeOut&&0!==this.options.extendedTimeOut&&"removed"!==this.state&&(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(sP),r.Y36(WR),r.Y36(r.z2F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.tapToast()})("mouseenter",function(){return t.stickAround()})("mouseleave",function(){return t.delayedHideToast()}),2&e&&(r.Tol(t.toastClasses),r.Udp("display",t.displayStyle))},attrs:LR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(e,t){1&e&&(r.YNc(0,BR,3,0,"button",0),r.YNc(1,HR,3,5,"div",1),r.YNc(2,$R,1,3,"div",2),r.YNc(3,GR,2,4,"div",3),r.YNc(4,ZR,2,2,"div",4)),2&e&&(r.Q6J("ngIf",t.options.closeButton),r.xp6(1),r.Q6J("ngIf",t.title),r.xp6(1),r.Q6J("ngIf",t.message&&t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.message&&!t.options.enableHtml),r.xp6(1),r.Q6J("ngIf",t.options.progressBar))},directives:[R],encapsulation:2}),e})();Object.assign(Object.assign({},KR),{toastComponent:lP});let uP=(()=>{class e{constructor(e,t){this.store=e,this.storage=t}getFiles(){return this.store.collection("files").snapshotChanges()}deleteFileFromStore(e){return this.store.collection("files").doc(e).delete()}deleteFileFromStorage(e){return this.storage.ref(e).delete()}startUpload(e){var t=this;let n=e.name.replace(/([^a-z0-9.]+)/gi,""),r=Date.now();const s=r+"_"+n,i="uploads/"+s,o=this.storage.ref(i);return this.task=this.storage.upload(i,e),this.snapshot=this.task.snapshotChanges().pipe(cs((0,Ia.Z)(function*(){t.downloadURL=yield o.getDownloadURL().toPromise(),t.store.collection("files").doc(s).set({storagePath:i,downloadURL:t.downloadURL,originalName:e.name,timestamp:r})}))),this.snapshot}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(_I),r.LFG(PR))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function cP(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"label",12),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(),n=r.MAs(9);return t.uploadFile(n.files)}),r._uU(1,"Upload image"),r.qZA()}}function hP(e,t){1&e&&(r.TgZ(0,"p",13),r._uU(1,"No images"),r.qZA())}function dP(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16),r._UZ(1,"img",17),r.TgZ(2,"button",18),r.NdJ("click",function(){const t=r.CHM(e).$implicit;return r.oxw(2).deleteFile(t.id)}),r._uU(3,"delete"),r.qZA(),r.qZA()}if(2&e){const e=t.$implicit;r.xp6(1),r.Q6J("src",null==e?null:e.downloadURL,r.LSH)}}function pP(e,t){if(1&e&&(r.TgZ(0,"div",14),r.TgZ(1,"div"),r.YNc(2,dP,4,1,"div",15),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngForOf",e.filesRecoed)}}let fP=(()=>{class e{constructor(e,t){this.crudService=e,this.toast=t,this.filesRecoed=[],this.imageUploadFlag=!1}ngOnInit(){this.getFiles()}uploadFile(e){this.crudService.startUpload(e[0]).subscribe(e=>{this.getFiles(),this.imgURL=void 0,this.toast.success("Uploaded successfully")})}getFiles(){this.filesRecoed=[],this.crudService.getFiles().subscribe(e=>{this.filesRecoed=e.map(e=>Object.assign({id:e.payload.doc.id},e.payload.doc.data())),console.log(this.filesRecoed)})}deleteFile(e){this.crudService.deleteFileFromStore(e).then(e=>{},e=>{console.log(e)}),this.crudService.deleteFileFromStorage(`uploads/${e}`).subscribe(e=>{},e=>{console.log(e)})}preview(e){if(0===e.length)return;if(null==e[0].type.match(/image\/*/))return void(this.message="Only images are supported.");let t=new FileReader;this.imagePath=e,t.readAsDataURL(e[0]),t.onload=e=>{this.imgURL=t.result},this.imageUploadFlag=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(uP),r.Y36(sP))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-home"]],decls:13,vars:6,consts:[[1,"container"],[1,"row","justify-content-center","align-items-center"],[1,"row","ui-holder"],[1,"col-md-8","col-6","p-2",2,"border-right","1px solid #0000002e"],["for","photoUpload",1,"image-holder","text-center","d-flex","flex-column","justify-content-center","align-items-center",2,"margin-top","80px"],["alt","photo",1,"img-fluid",3,"src"],["class","btn btn-primary fw-light fs-5 mt-2",3,"click",4,"ngIf"],["type","file","name","photoUpload","accept","image/*","id","photoUpload",1,"d-none",3,"change"],["file",""],[1,"col-md-4","col-6","row",2,"overflow","hidden"],["class","fw-light fs-2 text-center",4,"ngIf"],["class","files",4,"ngIf"],[1,"btn","btn-primary","fw-light","fs-5","mt-2",3,"click"],[1,"fw-light","fs-2","text-center"],[1,"files"],["class","fileData mt-2",4,"ngFor","ngForOf"],[1,"fileData","mt-2"],["alt","photo",1,"img-fluid","h-100",3,"src"],[1,"btn","btn-danger","btn-sm","mt-2",3,"click"]],template:function(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"label",4),r.TgZ(5,"div"),r._UZ(6,"img",5),r.qZA(),r.YNc(7,cP,2,0,"label",6),r.TgZ(8,"input",7,8),r.NdJ("change",function(){r.CHM(e);const n=r.MAs(9);return t.preview(n.files)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"div",9),r.YNc(11,hP,2,0,"p",10),r.YNc(12,pP,3,1,"div",11),r.qZA(),r.qZA(),r.qZA(),r.qZA()}2&e&&(r.xp6(5),r.ekj("imgBx",t.imgURL),r.xp6(1),r.Q6J("src",t.imgURL?t.imgURL:"../../../assets/add-image.png",r.LSH),r.xp6(1),r.Q6J("ngIf",t.imgURL),r.xp6(4),r.Q6J("ngIf",t.filesRecoed.length<=0),r.xp6(1),r.Q6J("ngIf",t.filesRecoed.length>0))},directives:[R,A],styles:[".image-holder[_ngcontent-%COMP%]{cursor:pointer}.add-icon[_ngcontent-%COMP%]{font-size:4rem}.ui-holder[_ngcontent-%COMP%]{margin-top:6rem;background-color:#fff;width:40rem;min-height:29rem;border-radius:15px;box-shadow:4px 9px 27px 5px #00000061}.imgBx[_ngcontent-%COMP%]{max-width:300px;width:100%;height:300px;box-shadow:1px 1px 5px 0;border-radius:5px}.imgBx[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%!important}.fileData[_ngcontent-%COMP%]{margin:5px;box-shadow:1px 1px 10px 1px #00000054;border-radius:5px;overflow:hidden}"]}),e})(),mP=(()=>{class e{constructor(){this.title="client"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&(r._UZ(0,"app-home"),r._uU(1,"\ngreat"))},directives:[fP],styles:[""]}),e})(),gP=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[mP]}),e.\u0275inj=r.cJS({providers:[],imports:[[ye,ca,sr,ba.hO.initializeApp(ha),vI,DR,GA,aP.forRoot({timeOut:3e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]]}),e})();(0,r.G48)(),me().bootstrapModule(gP).catch(e=>console.error(e))},6304:(e,t,n)=>{"use strict";function r(e,t,n,r,s,i,o){try{var a=e[i](o),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(r,s)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(s,i){var o=e.apply(t,n);function a(e){r(o,s,i,a,l,"next",e)}function l(e){r(o,s,i,a,l,"throw",e)}a(void 0)})}}n.d(t,{Z:()=>s})},4762:(e,t,n)=>{"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}function s(e,t,n,r){return new(n||(n=Promise))(function(s,i){function o(e){try{l(r.next(e))}catch(t){i(t)}}function a(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}function i(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(a){i=[6,a],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,s,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(a){s={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(s)throw s.error}}return o}function l(e,t,n){if(n||2===arguments.length)for(var r,s=0,i=t.length;s<i;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))}n.d(t,{_T:()=>r,mG:()=>s,Jh:()=>i,XA:()=>o,CR:()=>a,ev:()=>l})}},e=>{"use strict";e(e.s=7581)}]);